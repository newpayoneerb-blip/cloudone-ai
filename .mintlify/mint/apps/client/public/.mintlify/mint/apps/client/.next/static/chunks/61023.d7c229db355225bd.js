"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61023],{50043:(t,e,n)=>{n.d(e,{D:()=>a});var r=n(95520),i=n(15575),o=n(28290),s=n(40838),a=function(){function t(t,e,n){this.name=t,this.version=e,this.actions=n,this.type="destination",this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track")}return t.prototype.isLoaded=function(){return!0},t.prototype.load=function(){return console.debug("loaded destination plugin: ".concat(this.name," v").concat(this.version)),Promise.resolve()},t.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.middleware).push.apply(t,e)},t.prototype.transform=function(t){return(0,r.sH)(this,void 0,void 0,function(){var e;return(0,r.YH)(this,function(n){switch(n.label){case 0:return[4,(0,s.applyDestinationMiddleware)(this.name,t.event,this.middleware)];case 1:return null==(e=n.sent())&&t.cancel(new i.d({retry:!1,reason:"dropped by destination middleware"})),[2,new o.o(e)]}})})},t.prototype._createMethod=function(t){var e=this;return function(n){return(0,r.sH)(e,void 0,void 0,function(){var e;return(0,r.YH)(this,function(r){switch(r.label){case 0:if(!this.actions[t])return[2,n];return[4,this.transform(n)];case 1:return e=r.sent(),[4,this.actions[t](e)];case 2:return r.sent(),[2,n]}})})}},t}()},61023:(t,e,n)=>{n.r(e),n.d(e,{Analytics:()=>ef,AnalyticsNode:()=>eQ,Context:()=>b.o,ContextCancelation:()=>b.d,Destination:()=>eX.D,EventFactory:()=>P,Group:()=>t5,HtEventsBrowser:()=>eF,UniversalStorage:()=>q,User:()=>t2,getGlobalAnalytics:()=>t8.kJ,loadLegacySettings:()=>eN});var r,i,o,s,a,u,c,l,h,f=n(95520),d=n(15435);function p(t,e,n,r){var i,o=[t,e,n,r],s=(0,d.Qd)(t)?t.event:t;if(!s||!(0,d.Kg)(s))throw Error("Event missing");var a=(0,d.Qd)(t)?null!=(i=t.properties)?i:{}:(0,d.Qd)(e)?e:{},u={};return(0,d.Tn)(n)||(u=null!=n?n:{}),(0,d.Qd)(t)&&!(0,d.Tn)(e)&&(u=null!=e?e:{}),[s,a,u,o.find(d.Tn)]}function v(t,e,n,r,i){var o,s,a=null,u=null,c=[t,e,n,r,i],l=c.filter(d.Kg);void 0!==l[0]&&void 0!==l[1]&&(a=l[0],u=l[1]),1===l.length&&(a=null,u=l[0]);var h=c.find(d.Tn),f=c.filter(function(t){return null===u?(0,d.Qd)(t):(0,d.Qd)(t)||null===t}),p=null!=(o=f[0])?o:{},v=null!=(s=f[1])?s:{};return[a,u,p,v,h]}var y=function(t){return function(){for(var e,n,r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var s={},a=["callback","options","traits","id"],u=0;u<i.length;u++){var c=i[u],l=a.pop();if("id"===l){if((0,d.Kg)(c)||(0,d.Et)(c)){s.id=c.toString();continue}if(null==c)continue;l=a.pop()}if(("traits"===l||"options"===l)&&(null==c||(0,d.Qd)(c))&&(s[l]=c),(0,d.Tn)(c)){s.callback=c;break}}return[null!=(e=s.id)?e:t.id(),null!=(n=s.traits)?n:{},null!=(r=s.options)?r:{},s.callback]}};function g(t,e,n,r){(0,d.Et)(t)&&(t=t.toString()),(0,d.Et)(e)&&(e=e.toString());var i=[t,e,n,r],o=i.filter(d.Kg),s=o[0],a=void 0===s?t:s,u=o[1],c=i.filter(d.Qd)[0];return[a,void 0===u?null:u,void 0===c?{}:c,i.find(d.Tn)]}var m=n(77371),b=n(28290),w=n(88514),_=n(335),S=n(10716),C=n(94968),k=n(34012),H=n.n(k),I=function(t,e,n,r,i,o){return{__t:"bpc",c:e,p:r,u:t,s:n,t:i,r:o}},M=Object.keys(I("","","","","","")),E=function(t){var e=t.indexOf("#");return -1===e?t:t.slice(0,e)},A=function(t){try{return new URL(t).pathname}catch(e){return"/"===t[0]?t:"/"+t}},x=function(t){var e=t.c,n=t.p,r=t.s,i=t.u,o=t.r,s=t.t,a=e?A(e):n,u=e?e.indexOf("?")>-1?e:e+r:E(i);return{path:a,referrer:o,search:r,title:s,url:u}},O=function(){var t=document.querySelector("link[rel='canonical']");return I(location.href,t&&t.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},j=function(t,e){void 0===e&&(e=x(O()));var n,r,i,o=t.context;"page"===t.type&&(i=t.properties&&(n=t.properties,r=Object.keys(e),Object.assign.apply(Object,(0,f.fX)([{}],r.map(function(t){var e;if(n&&Object.prototype.hasOwnProperty.call(n,t))return(e={})[t]=n[t],e}),!1))),t.properties=(0,f.Cl)((0,f.Cl)((0,f.Cl)({},e),t.properties),t.name?{name:t.name}:{})),o.page=(0,f.Cl)((0,f.Cl)((0,f.Cl)({},e),i),o.page)},P=function(){function t(t){this.user=t}return t.prototype.track=function(t,e,n,r,i){return this.normalize((0,f.Cl)((0,f.Cl)({},this.baseEvent()),{event:t,type:"track",properties:e,options:(0,f.Cl)({},n),integrations:(0,f.Cl)({},r)}),i)},t.prototype.page=function(t,e,n,r,i,o){var s,a={type:"page",properties:(0,f.Cl)({},n),options:(0,f.Cl)({},r),integrations:(0,f.Cl)({},i)};return null!==t&&(a.category=t,a.properties=null!=(s=a.properties)?s:{},a.properties.category=t),null!==e&&(a.name=e),this.normalize((0,f.Cl)((0,f.Cl)({},this.baseEvent()),a),o)},t.prototype.screen=function(t,e,n,r,i,o){var s={type:"screen",properties:(0,f.Cl)({},n),options:(0,f.Cl)({},r),integrations:(0,f.Cl)({},i)};return null!==t&&(s.category=t),null!==e&&(s.name=e),this.normalize((0,f.Cl)((0,f.Cl)({},this.baseEvent()),s),o)},t.prototype.identify=function(t,e,n,r,i){return this.normalize((0,f.Cl)((0,f.Cl)({},this.baseEvent()),{type:"identify",userId:t,traits:e,options:(0,f.Cl)({},n),integrations:(0,f.Cl)({},r)}),i)},t.prototype.group=function(t,e,n,r,i){return this.normalize((0,f.Cl)((0,f.Cl)({},this.baseEvent()),{type:"group",traits:e,options:(0,f.Cl)({},n),integrations:(0,f.Cl)({},r),groupId:t}),i)},t.prototype.alias=function(t,e,n,r,i){var o={userId:t,type:"alias",options:(0,f.Cl)({},n),integrations:(0,f.Cl)({},r)};return(null!==e&&(o.previousId=e),void 0===t)?this.normalize((0,f.Cl)((0,f.Cl)({},o),this.baseEvent())):this.normalize((0,f.Cl)((0,f.Cl)({},this.baseEvent()),o),i)},t.prototype.baseEvent=function(){var t={integrations:{},options:{}},e=this.user;return e.id()&&(t.userId=e.id()),e.anonymousId()&&(t.anonymousId=e.anonymousId()),t},t.prototype.context=function(t){var e,n,r,i=["integrations","anonymousId","timestamp","userId"],o=null!=(e=t.options)?e:{};delete o.integrations;var s=Object.keys(o),a=null!=(r=null==(n=t.options)?void 0:n.context)?r:{},u={};return s.forEach(function(t){"context"!==t&&(i.includes(t)?(0,C.J)(u,t,o[t]):(0,C.J)(a,t,o[t]))}),[a,u]},t.prototype.normalize=function(t,e){(null==(n=t.options)?void 0:n.anonymousId)&&this.user.anonymousId(t.options.anonymousId);var n,r,i,o=Object.keys(null!=(r=t.integrations)?r:{}).reduce(function(e,n){var r,i;return(0,f.Cl)((0,f.Cl)({},e),((r={})[n]=!!(null==(i=t.integrations)?void 0:i[n]),r))},{}),s=(0,f.Cl)((0,f.Cl)({},o),null==(i=t.options)?void 0:i.integrations),a=this.context(t),u=a[0],c=a[1];t.options;var l=(0,f.Tt)(t,["options"]),h=(0,f.Cl)((0,f.Cl)((0,f.Cl)((0,f.Cl)({timestamp:new Date},l),{context:u,integrations:s}),c),{messageId:H().hash(JSON.stringify(t)+(0,S.v4)())});j(h,e);var d=this.user.getAndUpdateSession();return null!=d&&(h.context=(0,f.Cl)((0,f.Cl)({},h.context),d)),h},t}(),z=n(31116),B=n(49560),D=n(15575),K=function(){var t,e,n=0;return{done:function(){return t},run:function(r){var i=r();return"object"==typeof i&&null!==i&&"then"in i&&"function"==typeof i.then&&(1==++n&&(t=new Promise(function(t){return e=t})),i.finally(function(){return 0==--n&&e()})),i}}},T=n(22850),Y=function(t){function e(e){return t.call(this,"string"==typeof e?new z.x(4,e):e)||this}return(0,f.C6)(e,t),e.prototype.flush=function(){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(e){return(0,m.a)()?[2,[]]:[2,t.prototype.flush.call(this)]})})},e}(function(t){function e(e){var n=t.call(this)||this;return n.criticalTasks=K(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=e,n.queue.on(B.g,function(){n.scheduleFlush(0)}),n}return(0,f.C6)(e,t),e.prototype.register=function(t,e,n){return(0,f.sH)(this,void 0,void 0,function(){var r=this;return(0,f.YH)(this,function(i){switch(i.label){case 0:return[4,Promise.resolve(e.load(t,n)).then(function(){r.plugins.push(e)}).catch(function(n){if("destination"===e.type){r.failedInitializations.push(e.name),console.warn(e.name,n),t.log("warn","Failed to load destination",{plugin:e.name,error:n});return}throw n})];case 1:return i.sent(),[2]}})})},e.prototype.deregister=function(t,e,n){return(0,f.sH)(this,void 0,void 0,function(){var r;return(0,f.YH)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!e.unload)return[3,2];return[4,Promise.resolve(e.unload(t,n))];case 1:i.sent(),i.label=2;case 2:return this.plugins=this.plugins.filter(function(t){return t.name!==e.name}),[3,4];case 3:return r=i.sent(),t.log("warn","Failed to unload destination",{plugin:e.name,error:r}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return(0,f.sH)(this,void 0,void 0,function(){var e;return(0,f.YH)(this,function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),e=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,e]})})},e.prototype.subscribeToDelivery=function(t){return(0,f.sH)(this,void 0,void 0,function(){var e=this;return(0,f.YH)(this,function(n){return[2,new Promise(function(n){var r=function(i,o){i.isSame(t)&&(e.off("flush",r),n(i))};e.on("flush",r)})]})})},e.prototype.dispatchSingle=function(t){return(0,f.sH)(this,void 0,void 0,function(){var e=this;return(0,f.YH)(this,function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(n){return e.enqueuRetry(n,t)?e.subscribeToDelivery(t):(t.setFailedDelivery({reason:n}),t)})]})})},e.prototype.isEmpty=function(){return 0===this.queue.length},e.prototype.scheduleFlush=function(t){var e=this;void 0===t&&(t=500),this.flushing||(this.flushing=!0,setTimeout(function(){e.flush().then(function(){setTimeout(function(){e.flushing=!1,e.queue.length&&e.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return(0,f.sH)(this,void 0,void 0,function(){var e,n,r,i;return(0,f.YH)(this,function(o){switch(o.label){case 0:return[4,this.criticalTasks.done()];case 1:o.sent(),e=Date.now(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=o.sent(),n=Date.now()-e,this.emit("delivery_success",t),t.stats.gauge("delivered",n),t.log("debug","Delivered",t.event),[2,t];case 4:throw i=r=o.sent(),t.log("error","Failed to deliver",i),this.emit("delivery_failure",t,i),t.stats.increment("delivery_failed"),r;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,e){return!!(!(t instanceof D.d)||t.retry)&&this.queue.pushWithBackoff(e)},e.prototype.flush=function(){return(0,f.sH)(this,void 0,void 0,function(){var t,e;return(0,f.YH)(this,function(n){switch(n.label){case 0:if(0===this.queue.length||!(t=this.queue.pop()))return[2,[]];t.attempts=this.queue.getAttempts(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=n.sent(),this.emit("flush",t,!0),[3,4];case 3:return e=n.sent(),this.enqueuRetry(e,t)||(t.setFailedDelivery({reason:e}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var e,n,r=(e="type",n={},this.plugins.filter(function(e){if("destination"!==e.type&&"Hightouch.io"!==e.name)return!0;var n,r,i,o=void 0;return null==(n=e.alternativeNames)||n.forEach(function(e){void 0!==t[e]&&(o=t[e])}),null!=(i=null!=(r=t[e.name])?r:o)?i:!1!==("Hightouch.io"===e.name||t.All)}).forEach(function(t){var r,i=void 0;if("string"==typeof e){var o=t[e];i="string"!=typeof o?JSON.stringify(o):o}else e instanceof Function&&(i=e(t));void 0!==i&&(n[i]=(0,f.fX)((0,f.fX)([],null!=(r=n[i])?r:[],!0),[t],!1))}),n),i=r.before,o=r.enrichment,s=r.destination,a=r.after;return{before:void 0===i?[]:i,enrichment:void 0===o?[]:o,destinations:void 0===s?[]:s,after:void 0===a?[]:a}},e.prototype.flushOne=function(t){var e,n;return(0,f.sH)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h,d,p,v,y;return(0,f.YH)(this,function(f){switch(f.label){case 0:if(!this.isReady())throw Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),i=(r=this.availableExtensions(null!=(e=t.event.integrations)?e:{})).before,o=r.enrichment,s=0,a=i,f.label=1;case 1:if(!(s<a.length))return[3,4];return u=a[s],[4,(0,T.D)(t,u)];case 2:(c=f.sent())instanceof D.j&&(t=c),this.emit("message_enriched",t,u),f.label=3;case 3:return s++,[3,1];case 4:l=0,h=o,f.label=5;case 5:if(!(l<h.length))return[3,8];return d=h[l],[4,(0,T.C)(t,d)];case 6:(c=f.sent())instanceof D.j&&(t=c),this.emit("message_enriched",t,d),f.label=7;case 7:return l++,[3,5];case 8:return v=(p=this.availableExtensions(null!=(n=t.event.integrations)?n:{})).destinations,y=p.after,[4,new Promise(function(e,n){setTimeout(function(){Promise.all(v.map(function(e){return(0,T.C)(t,e)})).then(e).catch(n)},0)})];case 9:return f.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),[4,Promise.all(y.map(function(e){return(0,T.C)(t,e)}))];case 10:return f.sent(),[2,t]}})})},e}(_.v));function R(t){for(var e=t.constructor.prototype,n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var i=r[n];if("constructor"!==i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);o&&"function"==typeof o.value&&(t[i]=t[i].bind(t))}}return t}var U={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},N=function(t,e,n,r){console.warn("".concat(t.constructor.name,": Can't ").concat(e,' key "').concat(n,'" | Err: ').concat(r))},q=function(){function t(t){this.stores=t}return t.prototype.get=function(t){for(var e=null,n=0,r=this.stores;n<r.length;n++){var i=r[n];try{if(null!=(e=i.get(t)))return e}catch(e){N(i,"get",t,e)}}return null},t.prototype.set=function(t,e){this.stores.forEach(function(n){try{n.set(t,e)}catch(e){N(n,"set",t,e)}})},t.prototype.clear=function(t){this.stores.forEach(function(e){try{e.remove(t)}catch(n){N(e,"remove",t,n)}})},t.prototype.getAndSync=function(t){var e=this.get(t),n="number"==typeof e?e.toString():e;return this.set(t,n),n},t}(),L=function(){function t(){this.cache={}}return t.prototype.get=function(t){var e;return null!=(e=this.cache[t])?e:null},t.prototype.set=function(t,e){this.cache[t]=e},t.prototype.remove=function(t){delete this.cache[t]},t}();function F(t){return t&&t.stores&&Array.isArray(t.stores)&&t.stores.every(function(t){return Object.values(U).includes(t)})}function Q(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var X=function t(e,n){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=Q({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=e.read(s,a),t===a)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){r(t,"",Q({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,Q({},this.attributes,e))},withConverter:function(e){return t(Q({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function J(t){var e=function(t){try{return new URL(t)}catch(t){return}}(t);if(e)for(var n=function(t){var e=t.hostname.split("."),n=e[e.length-1],r=[];if(4===e.length&&parseInt(n,10)>0||e.length<=1)return r;for(var i=e.length-2;i>=0;--i)r.push(e.slice(i).join("."));return r}(e),r=0;r<n.length;++r){var i=Math.round(1e4*Math.random()).toString(),o=n[r],s={domain:"."+o,path:"/",sameSite:"Lax"};try{if(X.set(i,"1",s),X.get(i))return X.remove(i,s),o}catch(t){return}}}var W=function(){function t(e){void 0===e&&(e=t.defaults),this.options=(0,f.Cl)((0,f.Cl)({},t.defaults),e)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:365,domain:J(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(t){var e;try{var n=X.get(t);if(null==n)return null;try{return null!=(e=JSON.parse(n))?e:null}catch(t){return null!=n?n:null}}catch(t){return null}},t.prototype.set=function(t,e){"string"==typeof e?X.set(t,e,this.opts()):null===e?X.remove(t,this.opts()):X.set(t,JSON.stringify(e),this.opts())},t.prototype.remove=function(t){return X.remove(t,this.opts())},t}(),V=function(){function t(){}return t.prototype.localStorageWarning=function(t,e){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(e))},t.prototype.get=function(t){var e;try{var n=localStorage.getItem(t);if(null===n)return null;try{return null!=(e=JSON.parse(n))?e:null}catch(t){return null!=n?n:null}}catch(e){return this.localStorageWarning(t,"unavailable"),null}},t.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){this.localStorageWarning(t,"full")}},t.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch(e){this.localStorageWarning(t,"unavailable")}},t}();function G(t){return t.map(function(t){var e,n;switch("object"==typeof t&&void 0!==t.name?(e=t.name,n=t.settings):e=t,e){case U.Cookie:return new W(n);case U.LocalStorage:return new V;case U.Memory:return new L;default:throw Error("Unknown Store Type: ".concat(t))}})}function Z(t,e){return t.map(function(t){return e&&t===U.Cookie?{name:t,settings:e}:t})}var $=(null==(r="undefined"!=typeof globalThis?globalThis:void 0)?void 0:r.crypto)||(null==(i=void 0!==n.g?n.g:void 0)?void 0:i.crypto)||(null==(o="undefined"!=typeof window?window:void 0)?void 0:o.crypto)||(null==(s="undefined"!=typeof self?self:void 0)?void 0:s.crypto)||(null==(u=null==(a="undefined"!=typeof frames?frames:void 0)?void 0:a[0])?void 0:u.crypto);c=$?function(t){for(var e=[],n=0;n<t;n+=4)e.push($.getRandomValues(new Uint32Array(1))[0]);return new te(e,t)}:function(t){for(var e=[],n=0,r=void 0;n<t;n+=4){var i=function(t){var e=t,n=0x3ade68b1;return function(){var t=((n=36969*(65535&n)+(n>>16)|0)<<16)+(e=18e3*(65535&e)+(e>>16)|0)|0;return t/=0x100000000,(t+=.5)*(Math.random()>.5?1:-1)}}(0x100000000*(r||Math.random()));r=0x3ade67b7*i(),e.push(0x100000000*i()|0)}return new te(e,t)};for(var tt=function(){function t(){}return t.create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(this.bind.apply(this,(0,f.fX)([void 0],t,!1)))},t.prototype.mixIn=function(t){return Object.assign(this,t)},t.prototype.clone=function(){var t=new this.constructor;return Object.assign(t,this),t},t}(),te=function(t){function e(e,n){void 0===e&&(e=[]),void 0===n&&(n=4*e.length);var r=t.call(this)||this,i=e;if(i instanceof ArrayBuffer&&(i=new Uint8Array(i)),(i instanceof Int8Array||i instanceof Uint8ClampedArray||i instanceof Int16Array||i instanceof Uint16Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Float32Array||i instanceof Float64Array)&&(i=new Uint8Array(i.buffer,i.byteOffset,i.byteLength)),i instanceof Uint8Array){for(var o=i.byteLength,s=[],a=0;a<o;a+=1)s[a>>>2]|=i[a]<<24-a%4*8;r.words=s,r.sigBytes=o}else r.words=e,r.sigBytes=n;return r}return(0,f.C6)(e,t),e.prototype.toString=function(t){return void 0===t&&(t=tn),t.stringify(this)},e.prototype.concat=function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o+=1){var s=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=s<<24-(r+o)%4*8}else for(var o=0;o<i;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},e.prototype.clamp=function(){var t=this.words,e=this.sigBytes;t[e>>>2]&=0xffffffff<<32-e%4*8,t.length=Math.ceil(e/4)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e.words=this.words.slice(0),e},e.random=c,e}(tt),tn={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=1){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new te(n,e/2)}},tr={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;i<n;i+=1){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;r<e;r+=1)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new te(n,e)}},ti={stringify:function(t){try{return decodeURIComponent(escape(tr.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return tr.parse(unescape(encodeURIComponent(t)))}},to=function(t){function e(){var e=t.call(this)||this;return e._minBufferSize=0,e}return(0,f.C6)(e,t),e.prototype.reset=function(){this._data=new te,this._nDataBytes=0},e.prototype._append=function(t){var e=t;"string"==typeof e&&(e=ti.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},e.prototype._process=function(t){var e,n=this._data,r=this.blockSize,i=n.words,o=n.sigBytes,s=o/(4*r),a=(s=t?Math.ceil(s):Math.max((0|s)-this._minBufferSize,0))*r,u=Math.min(4*a,o);if(a){for(var c=0;c<a;c+=r)this._doProcessBlock(i,c);e=i.splice(0,a),n.sigBytes-=u}return new te(e,u)},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._data=this._data.clone(),e},e}(tt),ts=function(t){function e(e){var n=t.call(this)||this;return n.blockSize=16,n.cfg=Object.assign(new tt,e),n.reset(),n}return(0,f.C6)(e,t),e._createHelper=function(t){return function(e,n){return new t(n).finalize(e)}},e._createHmacHelper=function(t){return function(e,n){return new ta(t,n).finalize(e)}},e.prototype.reset=function(){t.prototype.reset.call(this),this._doReset()},e.prototype.update=function(t){return this._append(t),this._process(),this},e.prototype.finalize=function(t){return t&&this._append(t),this._doFinalize()},e}(to),ta=function(t){function e(e,n){var r=t.call(this)||this,i=new e;r._hasher=i;var o=n;"string"==typeof o&&(o=ti.parse(o));var s=i.blockSize,a=4*s;o.sigBytes>a&&(o=i.finalize(n)),o.clamp();var u=o.clone();r._oKey=u;var c=o.clone();r._iKey=c;for(var l=u.words,h=c.words,f=0;f<s;f+=1)l[f]^=0x5c5c5c5c,h[f]^=0x36363636;return u.sigBytes=a,c.sigBytes=a,r.reset(),r}return(0,f.C6)(e,t),e.prototype.reset=function(){var t=this._hasher;t.reset(),t.update(this._iKey)},e.prototype.update=function(t){return this._hasher.update(t),this},e.prototype.finalize=function(t){var e=this._hasher,n=e.finalize(t);return e.reset(),e.finalize(this._oKey.clone().concat(n))},e}(tt),tu=function(t,e,n){for(var r=[],i=0,o=0;o<e;o+=1)if(o%4){var s=n[t.charCodeAt(o-1)]<<o%4*2|n[t.charCodeAt(o)]>>>6-o%4*2;r[i>>>2]|=s<<24-i%4*8,i+=1}return te.create(r,i)},tc={stringify:function(t){var e=t.words,n=t.sigBytes,r=this._map;t.clamp();for(var i=[],o=0;o<n;o+=3)for(var s=(e[o>>>2]>>>24-o%4*8&255)<<16|(e[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|e[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<n;a+=1)i.push(r.charAt(s>>>6*(3-a)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join("")},parse:function(t){var e=t.length,n=this._map,r=this._reverseMap;if(!r){this._reverseMap=[],r=this._reverseMap;for(var i=0;i<n.length;i+=1)r[n.charCodeAt(i)]=i}var o=n.charAt(64);if(o){var s=t.indexOf(o);-1!==s&&(e=s)}return tu(t,e,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},tl=[],th=0;th<64;th+=1)tl[th]=0x100000000*Math.abs(Math.sin(th+1))|0;var tf=function(t,e,n,r,i,o,s){var a=t+(e&n|~e&r)+i+s;return(a<<o|a>>>32-o)+e},td=function(t,e,n,r,i,o,s){var a=t+(e&r|n&~r)+i+s;return(a<<o|a>>>32-o)+e},tp=function(t,e,n,r,i,o,s){var a=t+(e^n^r)+i+s;return(a<<o|a>>>32-o)+e},tv=function(t,e,n,r,i,o,s){var a=t+(n^(e|~r))+i+s;return(a<<o|a>>>32-o)+e},ty=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,f.C6)(e,t),e.prototype._doReset=function(){this._hash=new te([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},e.prototype._doProcessBlock=function(t,e){for(var n=0;n<16;n+=1){var r=e+n,i=t[r];t[r]=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00}var o=this._hash.words,s=t[e+0],a=t[e+1],u=t[e+2],c=t[e+3],l=t[e+4],h=t[e+5],f=t[e+6],d=t[e+7],p=t[e+8],v=t[e+9],y=t[e+10],g=t[e+11],m=t[e+12],b=t[e+13],w=t[e+14],_=t[e+15],S=o[0],C=o[1],k=o[2],H=o[3];S=tf(S,C,k,H,s,7,tl[0]),H=tf(H,S,C,k,a,12,tl[1]),k=tf(k,H,S,C,u,17,tl[2]),C=tf(C,k,H,S,c,22,tl[3]),S=tf(S,C,k,H,l,7,tl[4]),H=tf(H,S,C,k,h,12,tl[5]),k=tf(k,H,S,C,f,17,tl[6]),C=tf(C,k,H,S,d,22,tl[7]),S=tf(S,C,k,H,p,7,tl[8]),H=tf(H,S,C,k,v,12,tl[9]),k=tf(k,H,S,C,y,17,tl[10]),C=tf(C,k,H,S,g,22,tl[11]),S=tf(S,C,k,H,m,7,tl[12]),H=tf(H,S,C,k,b,12,tl[13]),k=tf(k,H,S,C,w,17,tl[14]),C=tf(C,k,H,S,_,22,tl[15]),S=td(S,C,k,H,a,5,tl[16]),H=td(H,S,C,k,f,9,tl[17]),k=td(k,H,S,C,g,14,tl[18]),C=td(C,k,H,S,s,20,tl[19]),S=td(S,C,k,H,h,5,tl[20]),H=td(H,S,C,k,y,9,tl[21]),k=td(k,H,S,C,_,14,tl[22]),C=td(C,k,H,S,l,20,tl[23]),S=td(S,C,k,H,v,5,tl[24]),H=td(H,S,C,k,w,9,tl[25]),k=td(k,H,S,C,c,14,tl[26]),C=td(C,k,H,S,p,20,tl[27]),S=td(S,C,k,H,b,5,tl[28]),H=td(H,S,C,k,u,9,tl[29]),k=td(k,H,S,C,d,14,tl[30]),C=td(C,k,H,S,m,20,tl[31]),S=tp(S,C,k,H,h,4,tl[32]),H=tp(H,S,C,k,p,11,tl[33]),k=tp(k,H,S,C,g,16,tl[34]),C=tp(C,k,H,S,w,23,tl[35]),S=tp(S,C,k,H,a,4,tl[36]),H=tp(H,S,C,k,l,11,tl[37]),k=tp(k,H,S,C,d,16,tl[38]),C=tp(C,k,H,S,y,23,tl[39]),S=tp(S,C,k,H,b,4,tl[40]),H=tp(H,S,C,k,s,11,tl[41]),k=tp(k,H,S,C,c,16,tl[42]),C=tp(C,k,H,S,f,23,tl[43]),S=tp(S,C,k,H,v,4,tl[44]),H=tp(H,S,C,k,m,11,tl[45]),k=tp(k,H,S,C,_,16,tl[46]),C=tp(C,k,H,S,u,23,tl[47]),S=tv(S,C,k,H,s,6,tl[48]),H=tv(H,S,C,k,d,10,tl[49]),k=tv(k,H,S,C,w,15,tl[50]),C=tv(C,k,H,S,h,21,tl[51]),S=tv(S,C,k,H,m,6,tl[52]),H=tv(H,S,C,k,c,10,tl[53]),k=tv(k,H,S,C,y,15,tl[54]),C=tv(C,k,H,S,a,21,tl[55]),S=tv(S,C,k,H,p,6,tl[56]),H=tv(H,S,C,k,_,10,tl[57]),k=tv(k,H,S,C,f,15,tl[58]),C=tv(C,k,H,S,b,21,tl[59]),S=tv(S,C,k,H,l,6,tl[60]),H=tv(H,S,C,k,g,10,tl[61]),k=tv(k,H,S,C,u,15,tl[62]),C=tv(C,k,H,S,v,21,tl[63]),o[0]=o[0]+S|0,o[1]=o[1]+C|0,o[2]=o[2]+k|0,o[3]=o[3]+H|0},e.prototype._doFinalize=function(){var t=this._data,e=t.words,n=8*this._nDataBytes,r=8*t.sigBytes;e[r>>>5]|=128<<24-r%32;var i=Math.floor(n/0x100000000);e[(r+64>>>9<<4)+15]=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00,e[(r+64>>>9<<4)+14]=(n<<8|n>>>24)&0xff00ff|(n<<24|n>>>8)&0xff00ff00,t.sigBytes=(e.length+1)*4,this._process();for(var o=this._hash,s=o.words,a=0;a<4;a+=1){var u=s[a];s[a]=(u<<8|u>>>24)&0xff00ff|(u<<24|u>>>8)&0xff00ff00}return o},e.prototype.clone=function(){var e=t.prototype.clone.call(this);return e._hash=this._hash.clone(),e},e}(ts);ts._createHelper(ty),ts._createHmacHelper(ty);var tg=function(t){function e(e){var n=t.call(this)||this;return n.cfg=Object.assign(new tt,{keySize:4,hasher:ty,iterations:1},e),n}return(0,f.C6)(e,t),e.prototype.compute=function(t,e){for(var n,r=this.cfg,i=r.hasher.create(),o=te.create(),s=o.words,a=r.keySize,u=r.iterations;s.length<a;){n&&i.update(n),n=i.update(t).finalize(e),i.reset();for(var c=1;c<u;c+=1)n=i.finalize(n),i.reset();o.concat(n)}return o.sigBytes=4*a,o},e}(tt),tm=function(t){function e(e,n,r){var i=t.call(this)||this;return i.cfg=Object.assign(new tt,r),i._xformMode=e,i._key=n,i.reset(),i}return(0,f.C6)(e,t),e.createEncryptor=function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},e.createDecryptor=function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},e._createHelper=function(t){var e=function(t){return"string"==typeof t?tH:tk};return{encrypt:function(n,r,i){return e(r).encrypt(t,n,r,i)},decrypt:function(n,r,i){return e(r).decrypt(t,n,r,i)}}},e.prototype.reset=function(){t.prototype.reset.call(this),this._doReset()},e.prototype.process=function(t){return this._append(t),this._process()},e.prototype.finalize=function(t){return t&&this._append(t),this._doFinalize()},e}(to);function tb(t,e,n){var r,i=this._iv;i?(r=i,this._iv=void 0):r=this._prevBlock;for(var o=0;o<n;o+=1)t[e+o]^=r[o]}tm._ENC_XFORM_MODE=1,tm._DEC_XFORM_MODE=2,tm.keySize=4,tm.ivSize=4,function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(this,e)||this;return r.blockSize=1,r}(0,f.C6)(e,t),e.prototype._doFinalize=function(){return this._process(!0)}}(tm);var tw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,f.C6)(e,t),e}(function(t){function e(e,n){var r=t.call(this)||this;return r._cipher=e,r._iv=n,r}return(0,f.C6)(e,t),e.createEncryptor=function(t,e){return this.Encryptor.create(t,e)},e.createDecryptor=function(t,e){return this.Decryptor.create(t,e)},e}(tt));tw.Encryptor=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,f.C6)(e,t),e.prototype.processBlock=function(t,e){var n=this._cipher,r=n.blockSize;tb.call(this,t,e,r),n.encryptBlock(t,e),this._prevBlock=t.slice(e,e+r)},e}(tw),tw.Decryptor=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,f.C6)(e,t),e.prototype.processBlock=function(t,e){var n=this._cipher,r=n.blockSize,i=t.slice(e,e+r);n.decryptBlock(t,e),tb.call(this,t,e,r),this._prevBlock=i},e}(tw);var t_={pad:function(t,e){for(var n=4*e,r=n-t.sigBytes%n,i=r<<24|r<<16|r<<8|r,o=[],s=0;s<r;s+=4)o.push(i);var a=te.create(o,r);t.concat(a)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},tS=function(t){function e(e,n,r){var i=t.call(this,e,n,Object.assign({mode:tw,padding:t_},r))||this;return i.blockSize=4,i}return(0,f.C6)(e,t),e.prototype.reset=function(){t.prototype.reset.call(this);var e,n=this.cfg,r=n.iv,i=n.mode;this._xformMode===this.constructor._ENC_XFORM_MODE?e=i.createEncryptor:(e=i.createDecryptor,this._minBufferSize=1),this._mode=e.call(i,this,r&&r.words),this._mode.__creator=e},e.prototype._doProcessBlock=function(t,e){this._mode.processBlock(t,e)},e.prototype._doFinalize=function(){var t,e=this.cfg.padding;return this._xformMode===this.constructor._ENC_XFORM_MODE?(e.pad(this._data,this.blockSize),t=this._process(!0)):(t=this._process(!0),e.unpad(t)),t},e}(tm),tC=function(t){function e(e){var n=t.call(this)||this;return n.mixIn(e),n}return(0,f.C6)(e,t),e.prototype.toString=function(t){return(t||this.formatter).stringify(this)},e}(tt),tk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,f.C6)(e,t),e.encrypt=function(t,e,n,r){var i=Object.assign(new tt,this.cfg,r),o=t.createEncryptor(n,i),s=o.finalize(e),a=o.cfg;return tC.create({ciphertext:s,key:n,iv:a.iv,algorithm:t,mode:a.mode,padding:a.padding,blockSize:o.blockSize,formatter:i.format})},e.decrypt=function(t,e,n,r){var i=e,o=Object.assign(new tt,this.cfg,r);return i=this._parse(i,o.format),t.createDecryptor(n,o).finalize(i.ciphertext)},e._parse=function(t,e){return"string"==typeof t?e.parse(t,this):t},e}(tt);tk.cfg=Object.assign(new tt,{format:{stringify:function(t){var e=t.ciphertext,n=t.salt;return(n?te.create([0x53616c74,0x65645f5f]).concat(n).concat(e):e).toString(tc)},parse:function(t){var e,n=tc.parse(t),r=n.words;return 0x53616c74===r[0]&&0x65645f5f===r[1]&&(e=te.create(r.slice(2,4)),r.splice(0,4),n.sigBytes-=16),tC.create({ciphertext:n,salt:e})}}});var tH=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,f.C6)(e,t),e.encrypt=function(t,e,n,r){var i=Object.assign(new tt,this.cfg,r),o=i.kdf.execute(n,t.keySize,t.ivSize,i.salt,i.hasher);i.iv=o.iv;var s=tk.encrypt.call(this,t,e,o.key,i);return s.mixIn(o),s},e.decrypt=function(t,e,n,r){var i=e,o=Object.assign(new tt,this.cfg,r);i=this._parse(i,o.format);var s=o.kdf.execute(n,t.keySize,t.ivSize,i.salt,o.hasher);return o.iv=s.iv,tk.decrypt.call(this,t,i,s.key,o)},e}(tk);tH.cfg=Object.assign(tk.cfg,{kdf:{execute:function(t,e,n,r,i){var o,s=r;s||(s=te.random(8)),o=i?tg.create({keySize:e+n,hasher:i}).compute(t,s):tg.create({keySize:e+n}).compute(t,s);var a=te.create(o.words.slice(e),4*n);return o.sigBytes=4*e,tC.create({key:o,iv:a,salt:s})}}});for(var tI=[],tM=[],tE=[],tA=[],tx=[],tO=[],tj=[],tP=[],tz=[],tB=[],tD=[],tK=0;tK<256;tK+=1)tK<128?tD[tK]=tK<<1:tD[tK]=tK<<1^283;for(var tT=0,tY=0,tK=0;tK<256;tK+=1){var tR=tY^tY<<1^tY<<2^tY<<3^tY<<4;tR=tR>>>8^255&tR^99,tI[tT]=tR,tM[tR]=tT;var tU=tD[tT],tN=tD[tU],tq=tD[tN],tL=257*tD[tR]^0x1010100*tR;tE[tT]=tL<<24|tL>>>8,tA[tT]=tL<<16|tL>>>16,tx[tT]=tL<<8|tL>>>24,tO[tT]=tL,tL=0x1010101*tq^65537*tN^257*tU^0x1010100*tT,tj[tR]=tL<<24|tL>>>8,tP[tR]=tL<<16|tL>>>16,tz[tR]=tL<<8|tL>>>24,tB[tR]=tL,tT?(tT=tU^tD[tD[tD[tq^tU]]],tY^=tD[tD[tY]]):tT=tY=1}var tF=[0,1,2,4,8,16,32,64,128,27,54],tQ=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,f.C6)(e,t),e.prototype._doReset=function(){if(!this._nRounds||this._keyPriorReset!==this._key){this._keyPriorReset=this._key;var t,e=this._keyPriorReset,n=e.words,r=e.sigBytes/4;this._nRounds=r+6;var i=(this._nRounds+1)*4;this._keySchedule=[];for(var o=this._keySchedule,s=0;s<i;s+=1)s<r?o[s]=n[s]:(t=o[s-1],s%r?r>6&&s%r==4&&(t=tI[t>>>24]<<24|tI[t>>>16&255]<<16|tI[t>>>8&255]<<8|tI[255&t]):t=(tI[(t=t<<8|t>>>24)>>>24]<<24|tI[t>>>16&255]<<16|tI[t>>>8&255]<<8|tI[255&t])^tF[s/r|0]<<24,o[s]=o[s-r]^t);this._invKeySchedule=[];for(var a=this._invKeySchedule,u=0;u<i;u+=1){var s=i-u;t=u%4?o[s]:o[s-4],u<4||s<=4?a[u]=t:a[u]=tj[tI[t>>>24]]^tP[tI[t>>>16&255]]^tz[tI[t>>>8&255]]^tB[tI[255&t]]}}},e.prototype.encryptBlock=function(t,e){this._doCryptBlock(t,e,this._keySchedule,tE,tA,tx,tO,tI)},e.prototype.decryptBlock=function(t,e){var n=t[e+1];t[e+1]=t[e+3],t[e+3]=n,this._doCryptBlock(t,e,this._invKeySchedule,tj,tP,tz,tB,tM),n=t[e+1],t[e+1]=t[e+3],t[e+3]=n},e.prototype._doCryptBlock=function(t,e,n,r,i,o,s,a){for(var u=this._nRounds,c=t[e]^n[0],l=t[e+1]^n[1],h=t[e+2]^n[2],f=t[e+3]^n[3],d=4,p=1;p<u;p+=1){var v=r[c>>>24]^i[l>>>16&255]^o[h>>>8&255]^s[255&f]^n[d];d+=1;var y=r[l>>>24]^i[h>>>16&255]^o[f>>>8&255]^s[255&c]^n[d];d+=1;var g=r[h>>>24]^i[f>>>16&255]^o[c>>>8&255]^s[255&l]^n[d];d+=1;var m=r[f>>>24]^i[c>>>16&255]^o[l>>>8&255]^s[255&h]^n[d];d+=1,c=v,l=y,h=g,f=m}var b=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d];d+=1;var w=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[d];d+=1;var _=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[d];d+=1;var S=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[d];d+=1,t[e]=b,t[e+1]=w,t[e+2]=_,t[e+3]=S},e}(tS);tQ.keySize=8;var tX=tS._createHelper(tQ),tJ=function(t){var e;return new Uint8Array((null!=(e=null==window?void 0:window.atob(t))?e:"").split("").map(function(t){return t.charCodeAt(0)}))};function tW(t){try{return t?JSON.parse(t):null}catch(e){return t||null}}var tV="HtEvEncrypt:",tG="RudderEncrypt:",tZ="RS_ENC_v3_",t$=function(t){var e=Date.now(),n=t||18e5;return n<1e4&&console.warn("Session timeouts of less than 10 seconds are not recommended"),{id:e,expiresAt:e+n,timeout:n,sessionStart:!0,autoTrack:!0}},t0=function(t){return{id:!t||t.toString().startsWith("-")||t.toString().length<10?Date.now():t,sessionStart:!0,manualTrack:!0}},t1={persist:!0,cookie:{key:"htjs_user_id",oldKey:"ajs_user"},localStorage:{key:"htjs_user_traits"},sessions:{autoTrack:!0}},t2=function(){function t(t,e){void 0===t&&(t=t1);var n,r,i,o,s,a=this;this.options={},this.id=function(t){if(a.options.disable)return null;var e,n,r,i,o=a.identityStore.getAndSync(a.idKey);if(void 0!==t){var s=null===t,u=t!==o&&null!==o&&null!==t,c=t!==o&&null===o&&null!==t;a.identityStore.set(a.idKey,t),s&&(null==(n=null==(e=a.options)?void 0:e.httpCookieService)||n.dispatchClear()),u&&a.anonymousId(null),(u||c)&&(null==(i=null==(r=a.options)?void 0:r.httpCookieService)||i.dispatchCreate())}var l=a.identityStore.getAndSync(a.idKey);if(l)return l;var h=a.legacyUserStore.get(t1.cookie.oldKey);return h?"object"==typeof h?h.id:h:null},this.anonymousId=function(t){if(a.options.disable)return null;if(void 0===t){var e,n,r,i,o,s,u,c,l,h,f=a.identityStore.getAndSync(a.anonKey),d=!1;if(!f&&(d=!!(f=function(t){try{if(!t||"string"!=typeof t||""===t.trim())return null;if(t.substring(0,tV.length)===tV)return tW(tX.decrypt(t.substring(tV.length),"HTEV").toString(ti))}catch(t){console.error(t)}return t}(null!=(e=a.identityStore.getAndSync("htev_anonymous_id"))?e:"")),f&&a.identityStore.set(a.anonKey,f)),!f&&(d=!!(f=a.identityStore.getAndSync("ajs_anonymous_id")),f&&a.identityStore.set(a.anonKey,f)),!f&&(d=!!(f=function(t){try{if(!t||"string"!=typeof t||""===t.trim())return null;if(t.substring(0,tG.length)===tG)return tW(tX.decrypt(t.substring(tG.length),"Rudder").toString(ti));if(t.substring(0,tZ.length)===tZ){var e,n=tW((e=t.substring(tZ.length),new TextDecoder().decode(tJ(e))));if(!n||"string"!=typeof n||""===n.trim())return null;return n}}catch(t){console.error(t)}return t}(null!=(n=a.identityStore.getAndSync("rl_anonymous_id"))?n:"")),f&&a.identityStore.set(a.anonKey,f)),f||(f=null!=(i=null==(r=a.legacySIO())?void 0:r[0])?i:null),d&&(null==(s=null==(o=a.options)?void 0:o.httpCookieService)||s.dispatchCreate()),f)return f}if(null===t){a.identityStore.set(a.anonKey,null);var p=a.identityStore.getAndSync(a.anonKey);return null==(c=null==(u=a.options)?void 0:u.httpCookieService)||c.dispatchClear(),p}a.identityStore.set(a.anonKey,null!=t?t:(0,S.v4)());var v=a.identityStore.getAndSync(a.anonKey);return null==(h=null==(l=a.options)?void 0:l.httpCookieService)||h.dispatchCreate(),v},this.traits=function(t){var e;if(!a.options.disable)return null===t&&(t={}),t&&a.traitsStore.set(a.traitsKey,null!=t?t:{}),null!=(e=a.traitsStore.get(a.traitsKey))?e:{}},this.options=(0,f.Cl)((0,f.Cl)({},t1),t),this.cookieOptions=e,this.idKey=null!=(r=null==(n=t.cookie)?void 0:n.key)?r:t1.cookie.key,this.traitsKey=null!=(o=null==(i=t.localStorage)?void 0:i.key)?o:t1.localStorage.key,this.anonKey="htjs_anonymous_id",this.seshKey="htjs_sesh",this.identityStore=this.createStorage(this.options,e),this.sessionStore=this.createStorage(this.options,e),this.legacyUserStore=this.createStorage(this.options,e,function(t){return t===U.Cookie}),this.traitsStore=this.createStorage(this.options,e,function(t){return t!==U.Cookie});var u=this.legacyUserStore.get(t1.cookie.oldKey);u&&"object"==typeof u&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),this.options.httpCookieService&&(this.identityStore.getAndSync(this.anonKey),this.identityStore.getAndSync(this.idKey),null==(s=this.options.httpCookieService)||s.dispatchCreate()),R(this)}return t.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var e=t.split("----");return[e[0],e[1]]},t.prototype.identify=function(t,e){if(!this.options.disable){e=null!=e?e:{};var n=this.id();(null===n||n===t)&&(e=(0,f.Cl)((0,f.Cl)({},this.traits()),e)),t&&this.id(t),this.traits(e)}},t.prototype.startManualSession=function(t){if(!this.options.disable){this.sessionStore.clear(this.seshKey);var e=t0(t);this.sessionStore.set(this.seshKey,e)}},t.prototype.endManualSession=function(){this.sessionStore.clear(this.seshKey)},t.prototype.getAndUpdateSessionInfo=function(){if(this.options.disable)return null;var t,e,n,r,i,o,s,a,u=this.sessionStore.getAndSync(this.seshKey);return null==u?(null==(r=null==(n=this.options)?void 0:n.sessions)?void 0:r.autoTrack)?(u=t$(null==(o=null==(i=this.options)?void 0:i.sessions)?void 0:o.timeout),this.sessionStore.set(this.seshKey,u),u):null:(null==u?void 0:u.autoTrack)&&(t=u.expiresAt,Date.now()>t)?(u=t$(null==(a=null==(s=this.options)?void 0:s.sessions)?void 0:a.timeout),this.sessionStore.set(this.seshKey,u),u):((e=u).sessionStart=!1,e.autoTrack&&(e.expiresAt=Date.now()+e.timeout),u=e,this.sessionStore.set(this.seshKey,u),u)},t.prototype.getAndUpdateSession=function(){var t=this.getAndUpdateSessionInfo(),e={};return(null==t?void 0:t.id)&&(e.sessionId=t.id),(null==t?void 0:t.sessionStart)&&(e.sessionStart=t.sessionStart),e},t.prototype.sessionId=function(){var t,e=this.sessionStore.getAndSync(this.seshKey);return null!=(t=null==e?void 0:e.id)?t:null},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.sessionStore.clear(this.seshKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(t,e,n){var r=[U.LocalStorage,U.Cookie,U.Memory];return t.disable?new q([]):t.persist?(void 0!==t.storage&&null!==t.storage&&F(t.storage)&&(r=t.storage.stores),t.localStorageFallbackDisabled&&(r=r.filter(function(t){return t!==U.LocalStorage})),n&&(r=r.filter(n)),new q(G(Z(r,e)))):new q([new L])},t.defaults=t1,t}(),t4={persist:!0,cookie:{key:"htjs_group_id"},localStorage:{key:"htjs_group_properties"}},t5=function(t){function e(e,n){void 0===e&&(e=t4);var r=t.call(this,(0,f.Cl)((0,f.Cl)({},t4),e),n)||this;return r.anonymousId=function(t){},R(r),r}return(0,f.C6)(e,t),e}(t2),t3=n(5018),t6=n(68456),t8=n(14717),t7=function(t,e,n){n.getCalls(t).forEach(function(t){es(e,t).catch(console.error)})},t9=t7.bind(void 0,"on"),et=t7.bind(void 0,"setAnonymousId"),ee=function(t,e){e.toArray().forEach(function(e){setTimeout(function(){es(t,e).catch(console.error)},0)})},en=function(t){if(er(t))return x(t.pop())},er=function(t){var e=t[t.length-1];if(!(0,d.Qd)(e)||"bpc"!==e.__t)return!1;for(var n in e)if(!M.includes(n))return!1;return!0},ei=function(t,e,n,r){void 0===n&&(n=function(){}),void 0===r&&(r=console.error),this.method=t,this.resolve=n,this.reject=r,this.called=!1,this.args=e},eo=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._callMap={},this.push.apply(this,t)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(t){this._callMap=t},enumerable:!1,configurable:!0}),t.prototype.getCalls=function(t){var e;return null!=(e=this.calls[t])?e:[]},t.prototype.push=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){["track","screen","alias","group","page","identify"].includes(e.method)&&!er(e.args)&&(e.args=(0,f.fX)((0,f.fX)([],e.args,!0),[O()],!1)),t.calls[e.method]?t.calls[e.method].push(e):t.calls[e.method]=[e]})},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){var t=(0,t8.kJ)();if(Array.isArray(t)){var e=t.splice(0,t.length).map(function(t){return new ei(t[0],t.slice(1))});this.push.apply(this,e)}},t}();function es(t,e){return(0,f.sH)(this,void 0,void 0,function(){var n,r;return(0,f.YH)(this,function(i){switch(i.label){case 0:var o;if(i.trys.push([0,3,,4]),e.called)return[2,void 0];if(e.called=!0,!("object"==typeof(o=n=t[e.method].apply(t,e.args))&&null!==o&&"then"in o&&"function"==typeof o.then))return[3,2];return[4,n];case 1:i.sent(),i.label=2;case 2:return e.resolve(n),[3,4];case 3:return r=i.sent(),e.reject(r),[3,4];case 4:return[2]}})})}var ea=function(){function t(t){var e=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=t3.r,this._preInitBuffer=new eo,this._promise=t(this._preInitBuffer),this._promise.then(function(t){var n=t[0],r=t[1];e.instance=n,e.ctx=r}).catch(function(){})}return t.prototype.then=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).then.apply(t,e)},t.prototype.catch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).catch.apply(t,e)},t.prototype.finally=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).finally.apply(t,e)},t.prototype._createMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?Promise.resolve((n=e.instance)[t].apply(n,r)):new Promise(function(n,i){e._preInitBuffer.push(new ei(t,r,n,i))})}},t.prototype._createChainableMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?(n=e.instance)[t].apply(n,r):e._preInitBuffer.push(new ei(t,r)),e}},t}(),eu="This is being deprecated and will be not be available in future releases of Analytics JS",ec=(0,t6.m)(),el=null==ec?void 0:ec.analytics;function eh(){console.warn(eu)}var ef=function(t){function e(e,n,r,i,o){var s,a,u,c,l,h,d,p=this;(p=t.call(this)||this)._debug=!1,p.initialized=!1,p.user=function(){return p._user},p.init=p.initialize.bind(p),p.log=eh,p.addIntegrationMiddleware=eh,p.listeners=eh,p.addEventListener=eh,p.removeAllListeners=eh,p.removeListener=eh,p.removeEventListener=eh,p.hasListeners=eh,p.add=eh,p.addIntegration=eh;var v=null==n?void 0:n.cookie,y=null!=(l=null==n?void 0:n.disableClientPersistence)&&l;p.settings=e,p.settings.timeout=null!=(h=p.settings.timeout)?h:300,p.queue=null!=r?r:(s="".concat(e.writeKey,":event-queue"),void 0===(a=null==n?void 0:n.retryQueue)&&(a=!1),void 0===(u=y)&&(u=!1),c=a?4:1,new Y(u?new B.M(c,[]):new z.x(c,s)));var g=null==n?void 0:n.storage;return p._universalStorage=p.createStore(y,g,v),p._user=null!=i?i:new t2((0,f.Cl)({persist:!y,storage:null==n?void 0:n.storage,httpCookieService:null==n?void 0:n.httpCookieService},null==n?void 0:n.user),v).load(),p._group=null!=o?o:new t5((0,f.Cl)({persist:!y,storage:null==n?void 0:n.storage},null==n?void 0:n.group),v).load(),p.eventFactory=new P(p._user),p.integrations=null!=(d=null==n?void 0:n.integrations)?d:{},p.options=null!=n?n:{},R(p),p}return(0,f.C6)(e,t),e.prototype.createStore=function(t,e,n){return new q(t?[new L]:e&&F(e)?G(Z(e.stores,n)):G([U.LocalStorage,{name:U.Cookie,settings:n},U.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return(0,f.YH)(this,function(c){return e=en(t),r=(n=p.apply(void 0,t))[0],i=n[1],o=n[2],s=n[3],a=this.eventFactory.track(r,i,o,this.integrations,e),[2,this._dispatch(a,s).then(function(t){return u.emit("track",r,t.event.properties,t.event.options),t})]})})},e.prototype.page=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c=this;return(0,f.YH)(this,function(l){return e=en(t),r=(n=v.apply(void 0,t))[0],i=n[1],o=n[2],s=n[3],a=n[4],u=this.eventFactory.page(r,i,o,s,this.integrations,e),[2,this._dispatch(u,a).then(function(t){return c.emit("page",r,i,t.event.properties,t.event.options),t})]})})},e.prototype.identify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return(0,f.YH)(this,function(c){return e=en(t),r=(n=y(this._user).apply(void 0,t))[0],i=n[1],o=n[2],s=n[3],this._user.identify(r,i),a=this.eventFactory.identify(this._user.id(),this._user.traits(),o,this.integrations,e),[2,this._dispatch(a,s).then(function(t){return u.emit("identify",t.event.userId,t.event.traits,t.event.options),t})]})})},e.prototype.group=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=en(e);if(0===e.length)return this._group;var i=y(this._group).apply(void 0,e),o=i[0],s=i[1],a=i[2],u=i[3];this._group.identify(o,s);var c=this._group.id(),l=this._group.traits(),h=this.eventFactory.group(c,l,a,this.integrations,r);return this._dispatch(h,u).then(function(e){return t.emit("group",e.event.groupId,e.event.traits,e.event.options),e})},e.prototype.alias=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u=this;return(0,f.YH)(this,function(c){return e=en(t),r=(n=g.apply(void 0,t))[0],i=n[1],o=n[2],s=n[3],a=this.eventFactory.alias(r,i,o,this.integrations,e),[2,this._dispatch(a,s).then(function(t){return u.emit("alias",r,i,t.event.options),t})]})})},e.prototype.screen=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c=this;return(0,f.YH)(this,function(l){return e=en(t),r=(n=v.apply(void 0,t))[0],i=n[1],o=n[2],s=n[3],a=n[4],u=this.eventFactory.screen(r,i,o,s,this.integrations,e),[2,this._dispatch(u,a).then(function(t){return c.emit("screen",r,i,t.event.properties,t.event.options),t})]})})},e.prototype.trackClick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e;return(0,f.YH)(this,function(r){switch(r.label){case 0:return[4,n.e(80248).then(n.bind(n,74085))];case 1:return[2,(e=r.sent().link).call.apply(e,(0,f.fX)([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e;return(0,f.YH)(this,function(r){switch(r.label){case 0:return[4,n.e(80248).then(n.bind(n,74085))];case 1:return[2,(e=r.sent().link).call.apply(e,(0,f.fX)([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e;return(0,f.YH)(this,function(r){switch(r.label){case 0:return[4,n.e(80248).then(n.bind(n,74085))];case 1:return[2,(e=r.sent().form).call.apply(e,(0,f.fX)([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e;return(0,f.YH)(this,function(r){switch(r.label){case 0:return[4,n.e(80248).then(n.bind(n,74085))];case 1:return[2,(e=r.sent().form).call.apply(e,(0,f.fX)([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e,n=this;return(0,f.YH)(this,function(r){switch(r.label){case 0:return e=b.o.system(),[4,Promise.all(t.map(function(t){return n.queue.register(e,t,n)}))];case 1:return r.sent(),[2,e]}})})},e.prototype.deregister=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,f.sH)(this,void 0,void 0,function(){var e,n=this;return(0,f.YH)(this,function(r){switch(r.label){case 0:return e=b.o.system(),[4,Promise.all(t.map(function(t){var r=n.queue.plugins.find(function(e){return e.name===t});if(r)return n.queue.deregister(e,r,n);e.log("warn","plugin ".concat(t," not found"))}))];case 1:return r.sent(),[2,e]}})})},e.prototype.debug=function(t){return!1===t&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.startSession=function(t){this._user.startManualSession(t)},e.prototype.endSession=function(){this._user.endManualSession()},e.prototype.getSessionId=function(){var t;return null!=(t=this._user.sessionId())?t:null},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,e){return(0,f.sH)(this,void 0,void 0,function(){var n;return(0,f.YH)(this,function(r){return(n=new b.o(t),(0,m.a)()&&!this.options.retryQueue)?[2,n]:[2,function(t,e,n,r){return(0,f.sH)(this,void 0,void 0,function(){var i,o;return(0,f.YH)(this,function(s){switch(s.label){case 0:if(n.emit("dispatch_start",t),i=Date.now(),!e.isEmpty())return[3,2];return[4,e.dispatchSingle(t)];case 1:return o=s.sent(),[3,4];case 2:return[4,e.dispatch(t)];case 3:o=s.sent(),s.label=4;case 4:var a,u;if(!(null==r?void 0:r.callback))return[3,6];return[4,(0,w.w_)(o,r.callback,(a=i,Math.max((null!=(u=r.timeout)?u:300)-(Date.now()-a),0)))];case 5:o=s.sent(),s.label=6;case 6:return(null==r?void 0:r.debug)&&o.flush(),[2,o]}})})}(n,this.queue,this,{callback:e,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return(0,f.sH)(this,void 0,void 0,function(){var e=this;return(0,f.YH)(this,function(r){switch(r.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,f.sH)(e,void 0,void 0,function(){var e,r,i;return(0,f.YH)(this,function(o){switch(o.label){case 0:return[4,n.e(42751).then(n.bind(n,40838))];case 1:return e=o.sent().sourceMiddlewarePlugin,r={},this.queue.plugins.forEach(function(t){if("destination"===t.type)return r[t.name]=!0}),i=e(t,r),[4,this.register(i)];case 2:return o.sent(),[2]}})})})];case 1:return r.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queue.plugins.filter(function(e){return e.name.toLowerCase()===t.toLowerCase()}).forEach(function(t){t.addMiddleware.apply(t,e)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(e){switch(e.label){case 0:if(!1===this.options.useQueryString)return[2,[]];return[4,n.e(97538).then(n.bind(n,67803))];case 1:return[2,(0,e.sent().queryString)(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return void 0===t&&(t=function(t){return t}),(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(e){return[2,Promise.all(this.queue.plugins.map(function(t){return t.ready?t.ready():Promise.resolve()})).then(function(e){return t(e),e})]})})},e.prototype.noConflict=function(){return console.warn(eu),(0,t8.Ud)(null!=el?el:this),this},e.prototype.normalize=function(t){return console.warn(eu),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(eu),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return t3.r},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,e){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(t){return console.warn(eu),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(e){switch(e.label){case 0:return console.warn(eu),[4,this.page({path:t})];case 1:return e.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(eu),null!=(t=this._plugins)?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){return console.warn(eu),this.queue.plugins.filter(function(t){return"destination"===t.type}).reduce(function(t,e){var n="".concat(e.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),r=window[n];if(!r)return t;var i=r.Integration;return i?t[e.name]=i:t[e.name]=r,t},{})},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var e=t.shift();(!e||this[e])&&this[e].apply(this,t)},e}(_.v),ed=n(40459);function ep(){return void 0!==ed&&ed.env?ed.env:{}}var ev=n(66357),ey=n(43716),eg=function(){function t(e){var n,r,i,o=t.urlHelper(e);this.renewUrl=o.renewUrl,this.clearUrl=o.clearUrl,this.backoff=null!=(n=e.backoff)?n:300,this.retries=null!=(r=e.retries)?r:3,this.flushInterval=null!=(i=e.flushInterval)?i:1e3,this.queue=[]}return t.urlHelper=function(t){var e=window.location.origin;return{renewUrl:new URL(t.renewUrl,e).href,clearUrl:new URL(t.clearUrl,e).href}},t.load=function(e){return(0,f.sH)(this,void 0,void 0,function(){var n;return(0,f.YH)(this,function(r){switch(r.label){case 0:return[4,em((n=new t(e)).sendHTTPCookies(n.renewUrl),n.retries,n.backoff).catch(console.error)];case 1:return r.sent(),n.startQueueConsumer(),[2,n]}})})},t.prototype.dispatchCreate=function(){this.queue.push(this.sendHTTPCookies(this.renewUrl))},t.prototype.dispatchClear=function(){this.queue.push(this.sendHTTPCookies(this.clearUrl))},t.prototype.startQueueConsumer=function(){if(this.flushIntervalId)return void console.error("HTTPCookie queue consumer is already running.");var t=this.consumeQueue.bind(this);this.flushIntervalId=setInterval(function(){return t().catch(console.error)},this.flushInterval)},t.prototype.stopQueueConsumer=function(){if(!this.flushIntervalId)return void console.error("HTTPCookie queue consumer is already stopped.");clearInterval(this.flushIntervalId),this.flushIntervalId=void 0},t.prototype.sendHTTPCookies=function(t){return function(){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(e){switch(e.label){case 0:return[4,(0,ey.h)(t,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify({sentAt:new Date().toISOString()})})];case 1:return[2,e.sent()]}})})}},t.prototype.consumeQueue=function(){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(t){switch(t.label){case 0:if(!(this.queue.length>0))return[3,2];return[4,em(this.queue.shift(),this.retries,this.backoff).catch(console.error)];case 1:return t.sent(),[3,0];case 2:return[2]}})})},t}();function em(t,e,n){return(0,f.sH)(this,void 0,void 0,function(){var r;return(0,f.YH)(this,function(i){switch(i.label){case 0:if(!(e>=0))return[3,6];i.label=1;case 1:return i.trys.push([1,3,,5]),[4,t().then(function(t){if(t.ok)return t;throw Error("Status: ".concat(t.status," ").concat(t.statusText))})];case 2:return[2,i.sent()];case 3:if(r=i.sent(),(e-=1)<=0)throw r;return[4,function(t){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(e){return[2,new Promise(function(e){return setTimeout(e,t)})]})})}(n)];case 4:return i.sent(),[3,5];case 5:return[3,0];case 6:throw Error("HtEvents: Problem with DeferredRequest")}})})}var eb=n(1915),ew=function(){var t,e,n=new Promise(function(n,r){t=n,e=r});return{resolve:t,reject:e,promise:n}},e_=n(25287),eS=n(84783),eC=function(t){try{var e=new URLSearchParams;return Object.entries(t).forEach(function(t){var n=t[0],r=t[1];Array.isArray(r)?r.forEach(function(t){return e.append(n,t)}):e.append(n,r)}),e.toString()}catch(t){return""}},ek=new function(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(e,n){return(0,f.sH)(t,void 0,void 0,function(){var t;return(0,f.YH)(this,function(e){switch(e.label){case 0:this.instance=n,e.label=1;case 1:return e.trys.push([1,3,,4]),t=this,[4,function(t){return(0,f.sH)(this,void 0,void 0,function(){var e;return(0,f.YH)(this,function(n){return(e=navigator.userAgentData)?t?[2,e.getHighEntropyValues(t).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}(this.instance.options.highEntropyValuesClientHints)];case 2:return t.userAgentData=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(e){var n,r,i,o,s,a,u=e.event.context,c=u.page.search||"",h="object"==typeof c?eC(c):c;u.userAgent=navigator.userAgent,u.userAgentData=t.userAgentData;var d=navigator.userLanguage||navigator.language;void 0===u.locale&&void 0!==d&&(u.locale=d),null!=u.library||(u.library={name:"events-sdk-js",version:"".concat("web"===(0,e_.X)()?"web":"npm","-").concat(t3.r)}),h&&!u.campaign&&((n=h).startsWith("?")&&(n=n.substring(1)),u.campaign=(n=n.replace(/\?/g,"&")).split("&").reduce(function(t,e){var n=e.split("="),r=n[0],i=n[1];if(r.includes("utm_")&&r.length>4){var o=r.slice(4);"campaign"===o&&(o="name"),t[o]=(0,eS.p)(void 0===i?"":i)}return t},{}));var p=function(){var t=X.get("_ga");if(t&&t.startsWith("amp"))return t}();p&&(u.amp={id:p}),o=(i=new q(null!=(a=t.instance.options.disableClientPersistence)&&a?[]:[new W(function(){if(l)return l;var t=J(window.location.href);return l={expires:31536e6,secure:!1,path:"/"},t&&(l.domain=t),l}())])).get("s:context.referrer"),(s=null!=(r=function(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1));for(var n=(t=t.replace(/\?/g,"&")).split("&"),r=0;r<n.length;r++){var i=n[r].split("="),o=i[0],s=i[1];if(e[o])return{id:s,type:e[o]}}}(h))?r:o)&&(u&&(u.referrer=(0,f.Cl)((0,f.Cl)({},u.referrer),s)),i.set("s:context.referrer",s));try{u.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){}return e},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},eH=n(14816),eI=n(40838),eM=function(){function t(t,e){this.version="1.0.0",this.alternativeNames=[],this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=e,this.name=t,this.type=e.type,this.alternativeNames.push(e.name)}return t.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"destination"===this.type&&(t=this.middleware).push.apply(t,e)},t.prototype.transform=function(t){return(0,f.sH)(this,void 0,void 0,function(){var e;return(0,f.YH)(this,function(n){switch(n.label){case 0:return[4,(0,eI.applyDestinationMiddleware)(this.name,t.event,this.middleware)];case 1:return null===(e=n.sent())&&t.cancel(new D.d({retry:!1,reason:"dropped by destination middleware"})),[2,new b.o(e)]}})})},t.prototype._createMethod=function(t){var e=this;return function(n){return(0,f.sH)(e,void 0,void 0,function(){var e;return(0,f.YH)(this,function(r){switch(r.label){case 0:if(!this.action[t])return[2,n];if(e=n,"destination"!==this.type)return[3,2];return[4,this.transform(n)];case 1:e=r.sent(),r.label=2;case 2:return[4,this.action[t](e)];case 3:return r.sent(),[2,n]}})})}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return this.action.ready?this.action.ready():Promise.resolve()},t.prototype.load=function(t,e){return this.action.load(t,e)},t.prototype.unload=function(t,e){var n,r;return null==(r=(n=this.action).unload)?void 0:r.call(n,t,e)},t}(),eE=n(46402),eA=function(t){var e=!1;window.addEventListener("pagehide",function(){e||t(e=!0)}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){if(e)return;e=!0}else e=!1;t(e)})};function ex(t){return(encodeURI(JSON.stringify(t)).split(/%..|./).length-1)/1024}var eO=n(83464);function ej(t,e,n,r){var i=this;t||setTimeout(function(){return(0,f.sH)(i,void 0,void 0,function(){var t,i;return(0,f.YH)(this,function(o){switch(o.label){case 0:return t=!0,[4,function(t,e){return(0,f.sH)(this,void 0,void 0,function(){var n,r=this;return(0,f.YH)(this,function(i){switch(i.label){case 0:if(n=[],(0,m.a)())return[2,e];return[4,(0,eO._)(function(){return e.length>0&&!(0,m.a)()},function(){return(0,f.sH)(r,void 0,void 0,function(){var r;return(0,f.YH)(this,function(i){switch(i.label){case 0:if(!(r=e.pop()))return[2];return[4,(0,T.C)(r,t)];case 1:return i.sent()instanceof b.o||n.push(r),[2]}})})})];case 1:return i.sent(),n.map(function(t){return e.pushWithBackoff(t)}),[2,e]}})})}(n,e)];case 1:return i=o.sent(),t=!1,e.todo>0&&r(t,i,n,r),[2]}})})},5e3*Math.random())}var eP=n(45902),ez=function(t){function e(e,n){var r=t.call(this,"".concat(e," ").concat(n))||this;return r.field=e,r}return(0,f.C6)(e,t),e}(Error),eB="is not a string",eD="is nil";function eK(t){var e,n=t.event;if(!(0,d.t2)(n))throw new ez("Event",eD);if("object"!=typeof n)throw new ez("Event","is not an object");if(!(0,d.Kg)(n.type))throw new ez(".type",eB);"track"===n.type&&function(t){if(!(0,d.Kg)(t.event))throw new ez(".event",eB)}(n);var r=null!=(e=n.properties)?e:n.traits;if("alias"!==n.type&&!(0,d.Qd)(r))throw new ez(".properties","is not an object");return!function(t){var e,n,r,i=".userId/anonymousId/previousId/groupId",o=null!=(r=null!=(n=null!=(e=t.userId)?e:t.anonymousId)?n:t.groupId)?r:t.previousId;if((0,d.t2)(o)){if(!(0,d.Kg)(o))throw new ez(i,eB)}else throw new ez(i,eD)}(n),t}var eT={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:eK,identify:eK,page:eK,alias:eK,group:eK,screen:eK},eY=(0,t6.m)(),eR=null!=(h=eY.__HIGHTOUCH_INSPECTOR__)?h:eY.__HIGHTOUCH_INSPECTOR__={},eU=function(t){var e;return null==(e=eR.attach)?void 0:e.call(eR,t)};function eN(t,e){var n=null!=e?e:(0,ev.I2)();return(0,ey.h)("".concat(n,"/v1/projects/").concat(t,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(t){throw Error(t)})}).catch(function(t){throw console.error(t.message),t})}var eq={apiKey:"WRITE_KEY",apiHost:"us-east-1.hightouch-events.com",protocol:"https",unbundledIntegrations:[],addBundledMetadata:!1,maybeBundledConfigIds:{},deliveryStrategy:{strategy:"standard"}},eL={integrations:{},plan:{track:{__default:{enabled:!0,integrations:{}}},identify:{__default:{enabled:!0}},group:{__default:{enabled:!0}}},enabledMiddleware:{},metrics:{sampleRate:0},legacyVideoPluginsEnabled:!1,remotePlugins:[]},eF=function(t){function e(){var e=this,r=ew(),i=r.promise,o=r.resolve;return(e=t.call(this,function(t){return i.then(function(e){return function(t,e,r){var i,o,s,a,u,c;return void 0===e&&(e={}),(0,f.sH)(this,void 0,void 0,function(){var l,h,d,p,v,y,g,b,w,_,S;return(0,f.YH)(this,function(C){switch(C.label){case 0:if(e.globalAnalyticsKey&&(0,t8.rY)(e.globalAnalyticsKey),t.cdnURL&&(0,ev.qQ)(t.cdnURL),t.cdnSettings?l=t.cdnSettings:(eL.integrations["Hightouch.io"]=(0,f.Cl)((0,f.Cl)((0,f.Cl)((0,f.Cl)((0,f.Cl)({},eq),t.writeKey?{apiKey:t.writeKey}:{}),e.apiHost?{apiHost:e.apiHost}:{}),e.protocol?{protocol:e.protocol}:{}),!0==e.batching?{deliveryStrategy:{strategy:"batching",config:{timeout:1e3,size:10}}}:{}),l=eL),e.updateCDNSettings&&(l=e.updateCDNSettings(l)),h=null==(o=null==(i=l.integrations["Hightouch.io"])?void 0:i.retryQueue)||o,!(!e.disableClientPersistence&&e.httpCookieServiceOptions))return[3,2];return d=e,[4,eg.load(e.httpCookieServiceOptions).catch(function(t){return console.error(t)})];case 1:d.httpCookieService=C.sent(),C.label=2;case 2:var k;return eU(v=new ef(t,p=(0,f.Cl)({retryQueue:h},e))),y=null!=(s=t.plugins)?s:[],g=null!=(a=t.classicIntegrations)?a:[],et(k=v,r),t9(k,r),[4,function(t,e,r,i,o,s,a){var u,c,l,h;return void 0===s&&(s=[]),(0,f.sH)(this,void 0,void 0,function(){var d,p,v,y,g,b,w,_,S,C,k,H,I,M,E=this;return(0,f.YH)(this,function(A){var x,O,j;switch(A.label){case 0:if(d=null==s?void 0:s.filter(function(t){return"object"==typeof t}),p=null==s?void 0:s.filter(function(t){return"function"==typeof t&&"string"==typeof t.pluginName}),"test"===ep().NODE_ENV||!((null!=(j=null==(O=null==(x=e.middlewareSettings)?void 0:x.routingRules)?void 0:O.length)?j:0)>0))return[3,2];return[4,Promise.all([n.e(34012),n.e(69010)]).then(n.bind(n,88543)).then(function(t){return t.tsubMiddleware(e.middlewareSettings.routingRules)})];case 1:return y=A.sent(),[3,3];case 2:y=void 0,A.label=3;case 3:if(v=y,("test"===ep().NODE_ENV||!(Object.keys(e.integrations).length>1))&&!(a.length>0))return[3,5];return[4,Promise.all([n.e(24430),n.e(5706),n.e(35050)]).then(n.bind(n,49548)).then(function(n){return n.ajsDestinations(t,e,r.integrations,i,v,a)})];case 4:return b=A.sent(),[3,6];case 5:b=[],A.label=6;case 6:if(g=b,!e.legacyVideoPluginsEnabled)return[3,8];return[4,n.e(19694).then(n.bind(n,76794)).then(function(t){return t.loadLegacyVideoPlugins(r)})];case 7:A.sent(),A.label=8;case 8:if(!(null==(u=i.plan)?void 0:u.track))return[3,10];return[4,n.e(3104).then(n.bind(n,85116)).then(function(t){var n;return t.schemaFilter(null==(n=i.plan)?void 0:n.track,e)})];case 9:return _=A.sent(),[3,11];case 10:_=void 0,A.label=11;case 11:return w=_,S=(0,eb.J)(e,o),[4,(function(t,e,n,r,i,o){var s,a,u;return(0,f.sH)(this,void 0,void 0,function(){var c,l,h=this;return(0,f.YH)(this,function(d){switch(d.label){case 0:return c=[],l=null!=(a=null==(s=t.middlewareSettings)?void 0:s.routingRules)?a:[],[4,Promise.all((null!=(u=t.remotePlugins)?u:[]).map(function(t){return(0,f.sH)(h,void 0,void 0,function(){var s,a,u,h,d;return(0,f.YH)(this,function(p){switch(p.label){case 0:var v,y;if(v=e[t.creationName],y=e[t.name],!1===e.All&&!v&&!y||!1===v||!1===y||0)return[2];p.label=1;case 1:if(p.trys.push([1,6,,7]),a=null==o?void 0:o.find(function(e){return e.pluginName===t.name}))return[3,3];return[4,function(t,e){return(0,f.sH)(this,void 0,void 0,function(){var n,r,i,o,s;return(0,f.YH)(this,function(a){switch(a.label){case 0:if(n=RegExp("https://cdn.hightouch-events.(com|build)"),r=(0,ev.I2)(),!e)return[3,6];o=(i=t.url.split("/"))[i.length-2],s=t.url.replace(o,btoa(o).replace(/=/g,"")),a.label=1;case 1:return a.trys.push([1,3,,5]),[4,(0,eH.k)(s.replace(n,r))];case 2:case 4:return a.sent(),[3,5];case 3:return a.sent(),[4,(0,eH.k)(t.url.replace(n,r))];case 5:return[3,8];case 6:return[4,(0,eH.k)(t.url.replace(n,r))];case 7:a.sent(),a.label=8;case 8:if("function"==typeof window[t.libraryName])return[2,window[t.libraryName]];return[2]}})})}(t,r)];case 2:a=p.sent(),p.label=3;case 3:if(!(s=a))return[3,5];return[4,s((0,f.Cl)((0,f.Cl)({},t.settings),n[t.name]))];case 4:!function(t){if(!Array.isArray(t))throw Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];t.forEach(function(t){e.forEach(function(e){var n;if(void 0===t[e])throw Error("Plugin: ".concat(null!=(n=t.name)?n:"unknown"," missing required function ").concat(e))})})}(h=Array.isArray(u=p.sent())?u:[u]),d=l.filter(function(e){return e.destinationName===t.creationName}),h.forEach(function(e){var n=new eM(t.creationName,e);d.length&&i&&"destination"===e.type&&n.addMiddleware(i),c.push(n)}),p.label=5;case 5:return[3,7];case 6:return console.warn("Failed to load Remote Plugin",p.sent()),[3,7];case 7:return[2]}})})}))];case 1:return d.sent(),[2,c.filter(Boolean)]}})})})(e,r.integrations,S,o.obfuscate,v,p).catch(function(){return[]})];case 12:if(C=A.sent(),k=(0,f.fX)((0,f.fX)((0,f.fX)([eT,ek],d,!0),g,!0),C,!0),w&&k.push(w),(null==(c=i.integrations)?void 0:c.All)===!1&&!i.integrations["Hightouch.io"]||i.integrations&&!1===i.integrations["Hightouch.io"])return[3,14];return I=(H=k).push,[4,function(t,e,n){window.addEventListener("pagehide",function(){u.push.apply(u,Array.from(c)),c.clear()});var r,i,o,s,a=null!=(i=null==e?void 0:e.apiKey)?i:"",u=t.options.disableClientPersistence?new B.M(t.queue.queue.maxAttempts,[]):new z.x(t.queue.queue.maxAttempts,"".concat(a,":dest-Hightouch.io")),c=new Set,l=null!=(o=null==e?void 0:e.apiHost)?o:eP.a,h=null!=(s=null==e?void 0:e.protocol)?s:"https",d="".concat(h,"://").concat(l),p=null==e?void 0:e.deliveryStrategy,v=(null==p?void 0:p.strategy)==="batching"?function(t,e,n){void 0===n&&(n="https");var r,i,o,s=[],a=!1,u=null!=(r=null==e?void 0:e.size)?r:10,c=null!=(i=null==e?void 0:e.timeout)?i:5e3;function l(e){if(0!==e.length){var r,i=null==(r=e[0])?void 0:r.writeKey,o=e.map(function(t){return t.sentAt,(0,f.Tt)(t,["sentAt"])});return(0,ey.h)("".concat(n,"://").concat(t,"/v1/batch"),{keepalive:a,headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify({writeKey:i,batch:o,sentAt:new Date().toISOString()})})}}function h(){return(0,f.sH)(this,void 0,void 0,function(){var t;return(0,f.YH)(this,function(e){return s.length?(t=s,s=[],[2,l(t)]):[2]})})}return eA(function(t){if((a=t)&&s.length){var e,n;Promise.all((e=[],n=0,s.forEach(function(t){ex(e[n])>=64&&n++,e[n]?e[n].push(t):e[n]=[t]}),e).map(l)).catch(console.error)}}),{dispatch:function(t,e){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(t){return s.push(e),[2,s.length>=u||ex(s)>=450||a?h():void(!o&&(o=setTimeout(function(){o=void 0,h().catch(console.error)},c)))]})})}}}(l,p.config,h):(r=null==p?void 0:p.config,{dispatch:function(t,e){return(0,ey.h)(t,{keepalive:null==r?void 0:r.keepalive,headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify(e)})}});function y(r){return(0,f.sH)(this,void 0,void 0,function(){var i,o;return(0,f.YH)(this,function(s){var a,l,h,p,y,b;return(0,m.a)()?(u.push(r),ej(!1,u,g,ej),[2,r]):(c.add(r),i=r.event.type,o=(0,eE.W)(r.event).json(),"track"===r.event.type&&delete o.traits,"alias"===r.event.type&&(a=o,b=t.user(),a.previousId=null!=(p=null!=(h=null!=(l=a.previousId)?l:a.from)?h:b.id())?p:b.anonymousId(),a.userId=null!=(y=a.userId)?y:a.to,delete a.from,delete a.to,o=a),[2,v.dispatch("".concat(d,"/v1/").concat(i),function(t,e,n,r){var i,o=t.user();delete e.options,e.writeKey=null==n?void 0:n.apiKey,e.userId=e.userId||o.id(),e.anonymousId=e.anonymousId||o.anonymousId(),e.sentAt=new Date;var s=t.queue.failedInitializations||[];s.length>0&&(e._metadata={failedInitializations:s});var a=[],u=[];for(var c in r){var l=r[c];"Hightouch.io"===c&&a.push(c),"bundled"===l.bundlingStatus&&a.push(c),"unbundled"===l.bundlingStatus&&u.push(c)}for(var h=0,d=(null==n?void 0:n.unbundledIntegrations)||[];h<d.length;h++){var p=d[h];u.includes(p)||u.push(p)}var v=null!=(i=null==n?void 0:n.maybeBundledConfigIds)?i:{},y=[];return a.sort().forEach(function(t){var e;(null!=(e=v[t])?e:[]).forEach(function(t){y.push(t)})}),(null==n?void 0:n.addBundledMetadata)!==!1&&(e._metadata=(0,f.Cl)((0,f.Cl)({},e._metadata),{bundled:a.sort(),unbundled:u.sort(),bundledIds:y})),e}(t,o,e,n)).then(function(){return r}).catch(function(){return u.pushWithBackoff(r),ej(!1,u,g,ej),r}).finally(function(){c.delete(r)})])})})}var g={name:"Hightouch.io",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:y,identify:y,page:y,alias:y,group:y,screen:y};return u.todo&&ej(!1,u,g,ej),g}(r,S["Hightouch.io"],e.integrations)];case 13:I.apply(H,[A.sent()]),A.label=14;case 14:return[4,Promise.allSettled(Object.entries(null!=(l=o.destinations)?l:{}).map(function(t){var e=t[0],r=t[1];return(0,f.sH)(E,void 0,void 0,function(){var t;return(0,f.YH)(this,function(i){switch(i.label){case 0:return[4,function(t,e){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(r){switch(t){case"gtag":return[2,n.e(11666).then(n.bind(n,90818)).then(function(t){return t.default(e)})];case"Google Tag Manager":return[2,n.e(12391).then(n.bind(n,36049)).then(function(t){return t.default(e)})];default:return[2,void 0]}})})}(e,r)];case 1:return(t=i.sent())?k.push(t):console.warn("failed to load destination plugin: ".concat(e)),[2]}})})}))];case 15:return A.sent(),[4,r.register.apply(r,k)];case 16:if(M=A.sent(),!Object.entries(null!=(h=e.enabledMiddleware)?h:{}).some(function(t){return t[1]}))return[3,18];return[4,n.e(20521).then(n.bind(n,87261)).then(function(t){var n=t.remoteMiddlewares;return(0,f.sH)(E,void 0,void 0,function(){return(0,f.YH)(this,function(t){switch(t.label){case 0:return[4,n(M,e,o.obfuscate)];case 1:return[2,Promise.all(t.sent().map(function(t){return r.addSourceMiddleware(t)}))]}})})})];case 17:A.sent(),A.label=18;case 18:return[2,M]}})})}(t.writeKey,l,v,p,e,y,g)];case 3:if(b=C.sent(),w=null!=(u=window.location.search)?u:"",_=null!=(c=window.location.hash)?c:"",!(S=w.length?w:_.replace(/(?=#).*(?=\?)/,"")).includes("ajs_"))return[3,5];return[4,v.queryString(S).catch(console.error)];case 4:C.sent(),C.label=5;case 5:return v.initialized=!0,v.emit("initialize",t,e),e.initialPageview&&v.page().catch(console.error),[4,function(t,e){return(0,f.sH)(this,void 0,void 0,function(){return(0,f.YH)(this,function(n){switch(n.label){case 0:return[4,(0,f.sH)(void 0,void 0,void 0,function(){var n,r;return(0,f.YH)(this,function(i){switch(i.label){case 0:n=0,r=e.getCalls("addSourceMiddleware"),i.label=1;case 1:if(!(n<r.length))return[3,4];return[4,es(t,r[n]).catch(console.error)];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})];case 1:return n.sent(),ee(t,e),e.clear(),[2]}})})}(v,r)];case 6:return C.sent(),[2,[v,b]]}})})}(e[0],e[1],t)})})||this)._resolveLoadStart=function(t,e){return o([t,e])},e}return(0,f.C6)(e,t),e.prototype.load=function(t,e){return void 0===e&&(e={}),this._resolveLoadStart(t,e),this},e.load=function(t,n){return void 0===n&&(n={}),new e().load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then(function(t){return t[0]})},e}(ea),eQ=function(){function t(){}return t.load=function(){return Promise.reject(Error("AnalyticsNode is not available in browsers."))},t}(),eX=n(50043)},84783:(t,e,n)=>{n.d(e,{p:()=>r});function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}}},88514:(t,e,n)=>{function r(t,e){return new Promise(function(n,r){var i=setTimeout(function(){r(Error("Promise timed out"))},e);t.then(function(t){return clearTimeout(i),n(t)}).catch(r)})}function i(t,e,n){var i=function(){try{return Promise.resolve(e(t))}catch(t){return Promise.reject(t)}};return new Promise(function(t){return setTimeout(t,n)}).then(function(){return r(i(),1e3)}).catch(function(e){null==t||t.log("warn","Callback Error",{error:e}),null==t||t.stats.increment("callback_error")}).then(function(){return t})}n.d(e,{s2:()=>r,w_:()=>i})}}]);