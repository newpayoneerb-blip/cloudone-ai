exports.id=2303,exports.ids=[2303],exports.modules={134960:(a,b,c)=>{"use strict";let d,e=c(74075),f=c(871783),g=c(671322),{kStatusCode:h}=c(715443),i=Buffer.from([0,0,255,255]),j=Symbol("permessage-deflate"),k=Symbol("total-length"),l=Symbol("callback"),m=Symbol("buffers"),n=Symbol("error");class o{constructor(a,b,c){this._maxPayload=0|c,this._options=a||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!b,this._deflate=null,this._inflate=null,this.params=null,d||(d=new g(void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10))}static get extensionName(){return"permessage-deflate"}offer(){let a={};return this._options.serverNoContextTakeover&&(a.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(a.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(a.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?a.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(a.client_max_window_bits=!0),a}accept(a){return a=this.normalizeParams(a),this.params=this._isServer?this.acceptAsServer(a):this.acceptAsClient(a),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let a=this._deflate[l];this._deflate.close(),this._deflate=null,a&&a(Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(a){let b=this._options,c=a.find(a=>(!1!==b.serverNoContextTakeover||!a.server_no_context_takeover)&&(!a.server_max_window_bits||!1!==b.serverMaxWindowBits&&("number"!=typeof b.serverMaxWindowBits||!(b.serverMaxWindowBits>a.server_max_window_bits)))&&("number"!=typeof b.clientMaxWindowBits||!!a.client_max_window_bits));if(!c)throw Error("None of the extension offers can be accepted");return b.serverNoContextTakeover&&(c.server_no_context_takeover=!0),b.clientNoContextTakeover&&(c.client_no_context_takeover=!0),"number"==typeof b.serverMaxWindowBits&&(c.server_max_window_bits=b.serverMaxWindowBits),"number"==typeof b.clientMaxWindowBits?c.client_max_window_bits=b.clientMaxWindowBits:(!0===c.client_max_window_bits||!1===b.clientMaxWindowBits)&&delete c.client_max_window_bits,c}acceptAsClient(a){let b=a[0];if(!1===this._options.clientNoContextTakeover&&b.client_no_context_takeover)throw Error('Unexpected parameter "client_no_context_takeover"');if(b.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&b.client_max_window_bits>this._options.clientMaxWindowBits)throw Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(b.client_max_window_bits=this._options.clientMaxWindowBits);return b}normalizeParams(a){return a.forEach(a=>{Object.keys(a).forEach(b=>{let c=a[b];if(c.length>1)throw Error(`Parameter "${b}" must have only a single value`);if(c=c[0],"client_max_window_bits"===b){if(!0!==c){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if(!this._isServer)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else if("server_max_window_bits"===b){let a=+c;if(!Number.isInteger(a)||a<8||a>15)throw TypeError(`Invalid value for parameter "${b}": ${c}`);c=a}else if("client_no_context_takeover"===b||"server_no_context_takeover"===b){if(!0!==c)throw TypeError(`Invalid value for parameter "${b}": ${c}`)}else throw Error(`Unknown parameter "${b}"`);a[b]=c})}),a}decompress(a,b,c){d.add(d=>{this._decompress(a,b,(a,b)=>{d(),c(a,b)})})}compress(a,b,c){d.add(d=>{this._compress(a,b,(a,b)=>{d(),c(a,b)})})}_decompress(a,b,c){let d=this._isServer?"client":"server";if(!this._inflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:b}),this._inflate[j]=this,this._inflate[k]=0,this._inflate[m]=[],this._inflate.on("error",r),this._inflate.on("data",q)}this._inflate[l]=c,this._inflate.write(a),b&&this._inflate.write(i),this._inflate.flush(()=>{let a=this._inflate[n];if(a){this._inflate.close(),this._inflate=null,c(a);return}let e=f.concat(this._inflate[m],this._inflate[k]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[k]=0,this._inflate[m]=[],b&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),c(null,e)})}_compress(a,b,c){let d=this._isServer?"server":"client";if(!this._deflate){let a=`${d}_max_window_bits`,b="number"!=typeof this.params[a]?e.Z_DEFAULT_WINDOWBITS:this.params[a];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:b}),this._deflate[k]=0,this._deflate[m]=[],this._deflate.on("data",p)}this._deflate[l]=c,this._deflate.write(a),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let a=f.concat(this._deflate[m],this._deflate[k]);b&&(a=a.slice(0,a.length-4)),this._deflate[l]=null,this._deflate[k]=0,this._deflate[m]=[],b&&this.params[`${d}_no_context_takeover`]&&this._deflate.reset(),c(null,a)})}}function p(a){this[m].push(a),this[k]+=a.length}function q(a){if(this[k]+=a.length,this[j]._maxPayload<1||this[k]<=this[j]._maxPayload)return void this[m].push(a);this[n]=RangeError("Max payload size exceeded"),this[n].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[n][h]=1009,this.removeListener("data",q),this.reset()}function r(a){this[j]._inflate=null,a[h]=1007,this[l](a)}a.exports=o},151243:(a,b,c)=>{"use strict";let{tokenChars:d}=c(580379);function e(a,b,c){void 0===a[b]?a[b]=[c]:a[b].push(c)}a.exports={format:function(a){return Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>[b].concat(Object.keys(a).map(b=>{let c=a[b];return Array.isArray(c)||(c=[c]),c.map(a=>!0===a?b:`${b}=${a}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(a){let b,c,f=Object.create(null),g=Object.create(null),h=!1,i=!1,j=!1,k=-1,l=-1,m=-1,n=0;for(;n<a.length;n++)if(l=a.charCodeAt(n),void 0===b)if(-1===m&&1===d[l])-1===k&&(k=n);else if(0!==n&&(32===l||9===l))-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let c=a.slice(k,m);44===l?(e(f,c,g),g=Object.create(null)):b=c,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);else if(void 0===c)if(-1===m&&1===d[l])-1===k&&(k=n);else if(32===l||9===l)-1===m&&-1!==k&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n),e(g,a.slice(k,m),!0),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),k=m=-1}else if(61===l&&-1!==k&&-1===m)c=a.slice(k,n),k=m=-1;else throw SyntaxError(`Unexpected character at index ${n}`);else if(i){if(1!==d[l])throw SyntaxError(`Unexpected character at index ${n}`);-1===k?k=n:h||(h=!0),i=!1}else if(j)if(1===d[l])-1===k&&(k=n);else if(34===l&&-1!==k)j=!1,m=n;else if(92===l)i=!0;else throw SyntaxError(`Unexpected character at index ${n}`);else if(34===l&&61===a.charCodeAt(n-1))j=!0;else if(-1===m&&1===d[l])-1===k&&(k=n);else if(-1!==k&&(32===l||9===l))-1===m&&(m=n);else if(59===l||44===l){if(-1===k)throw SyntaxError(`Unexpected character at index ${n}`);-1===m&&(m=n);let d=a.slice(k,m);h&&(d=d.replace(/\\/g,""),h=!1),e(g,c,d),44===l&&(e(f,b,g),g=Object.create(null),b=void 0),c=void 0,k=m=-1}else throw SyntaxError(`Unexpected character at index ${n}`);if(-1===k||j||32===l||9===l)throw SyntaxError("Unexpected end of input");-1===m&&(m=n);let o=a.slice(k,m);return void 0===b?e(f,o,g):(void 0===c?e(g,o,!0):h?e(g,c,o.replace(/\\/g,"")):e(g,c,o),e(f,b,g)),f}}},276007:(a,b,c)=>{var d=c(629021),e=c(379551),f=c(579646).spawn;function g(a){"use strict";a=a||{};var b,g,h=this,i=c(781630),j=c(55591),k={},l=!1,m={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},n=Object.assign({},m),o=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],p=["TRACE","TRACK","CONNECT"],q=!1,r=!1,s=!1,t={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.open=function(a,b,c,d,e){if(this.abort(),r=!1,s=!1,!(a&&-1===p.indexOf(a)))throw Error("SecurityError: Request method not allowed");k={method:a,url:b.toString(),async:"boolean"!=typeof c||c,user:d||null,password:e||null},u(this.OPENED)},this.setDisableHeaderCheck=function(a){l=a},this.setRequestHeader=function(a,b){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!l&&(!a||-1!==o.indexOf(a.toLowerCase())))return console.warn('Refused to set unsafe header "'+a+'"'),!1;if(q)throw Error("INVALID_STATE_ERR: send flag is true");return n[a]=b,!0},this.getResponseHeader=function(a){return"string"==typeof a&&this.readyState>this.OPENED&&g.headers[a.toLowerCase()]&&!r?g.headers[a.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||r)return"";var a="";for(var b in g.headers)"set-cookie"!==b&&"set-cookie2"!==b&&(a+=b+": "+g.headers[b]+"\r\n");return a.substr(0,a.length-2)},this.getRequestHeader=function(a){return"string"==typeof a&&n[a]?n[a]:""},this.send=function(c){if(this.readyState!=this.OPENED)throw Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(q)throw Error("INVALID_STATE_ERR: send has already been called");var l,m=!1,o=!1,p=e.parse(k.url);switch(p.protocol){case"https:":m=!0;case"http:":l=p.hostname;break;case"file:":o=!0;break;case void 0:case"":l="localhost";break;default:throw Error("Protocol not supported.")}if(o){if("GET"!==k.method)throw Error("XMLHttpRequest: Only GET method is supported");if(k.async)d.readFile(unescape(p.pathname),"utf8",function(a,b){a?h.handleError(a,a.errno||-1):(h.status=200,h.responseText=b,u(h.DONE))});else try{this.responseText=d.readFileSync(unescape(p.pathname),"utf8"),this.status=200,u(h.DONE)}catch(a){this.handleError(a,a.errno||-1)}return}var s=p.port||(m?443:80),t=p.pathname+(p.search?p.search:"");if(n.Host=l,m&&443===s||80===s||(n.Host+=":"+p.port),k.user){void 0===k.password&&(k.password="");var v=new Buffer(k.user+":"+k.password);n.Authorization="Basic "+v.toString("base64")}"GET"===k.method||"HEAD"===k.method?c=null:c?(n["Content-Length"]=Buffer.isBuffer(c)?c.length:Buffer.byteLength(c),n["Content-Type"]||(n["Content-Type"]="text/plain;charset=UTF-8")):"POST"===k.method&&(n["Content-Length"]=0);var w=a.agent||!1,x={host:l,port:s,path:t,method:k.method,headers:n,agent:w};if(m&&(x.pfx=a.pfx,x.key=a.key,x.passphrase=a.passphrase,x.cert=a.cert,x.ca=a.ca,x.ciphers=a.ciphers,x.rejectUnauthorized=!1!==a.rejectUnauthorized),r=!1,k.async){var y=m?j.request:i.request;q=!0,h.dispatchEvent("readystatechange");var z=function(c){if(302===(g=c).statusCode||303===g.statusCode||307===g.statusCode){k.url=g.headers.location;var d=e.parse(k.url);l=d.hostname;var f={hostname:d.hostname,port:d.port,path:d.path,method:303===g.statusCode?"GET":k.method,headers:n};m&&(f.pfx=a.pfx,f.key=a.key,f.passphrase=a.passphrase,f.cert=a.cert,f.ca=a.ca,f.ciphers=a.ciphers,f.rejectUnauthorized=!1!==a.rejectUnauthorized),(b=y(f,z).on("error",A)).end();return}g&&g.setEncoding&&g.setEncoding("utf8"),u(h.HEADERS_RECEIVED),h.status=g.statusCode,g.on("data",function(a){a&&(h.responseText+=a),q&&u(h.LOADING)}),g.on("end",function(){q&&(q=!1,u(h.DONE))}),g.on("error",function(a){h.handleError(a)})},A=function(a){h.handleError(a)};b=y(x,z).on("error",A),a.autoUnref&&b.on("socket",a=>{a.unref()}),c&&b.write(c),b.end(),h.dispatchEvent("loadstart")}else{var B=".node-xmlhttprequest-content-"+process.pid,C=".node-xmlhttprequest-sync-"+process.pid;d.writeFileSync(C,"","utf8");for(var D="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(m?"s":"")+".request;var options = "+JSON.stringify(x)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+B+"', 'NODE-XMLHTTPREQUEST-STATUS:' + response.statusCode + ',' + responseText, 'utf8');fs.unlinkSync('"+C+"');});response.on('error', function(error) {fs.writeFileSync('"+B+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+C+"');});}).on('error', function(error) {fs.writeFileSync('"+B+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+C+"');});"+(c?"req.write('"+JSON.stringify(c).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",E=f(process.argv[0],["-e",D]);d.existsSync(C););if(h.responseText=d.readFileSync(B,"utf8"),E.stdin.end(),d.unlinkSync(B),h.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var F=h.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,"");h.handleError(F,503)}else h.status=h.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1"),h.responseText=h.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"),u(h.DONE)}},this.handleError=function(a,b){this.status=b||0,this.statusText=a,this.responseText=a.stack,r=!0,u(this.DONE)},this.abort=function(){b&&(b.abort(),b=null),n=Object.assign({},m),this.responseText="",this.responseXML="",r=s=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||q)&&this.readyState!==this.DONE&&(q=!1,u(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(a,b){a in t||(t[a]=[]),t[a].push(b)},this.removeEventListener=function(a,b){a in t&&(t[a]=t[a].filter(function(a){return a!==b}))},this.dispatchEvent=function(a){if("function"==typeof h["on"+a]&&(this.readyState===this.DONE?setImmediate(function(){h["on"+a]()}):h["on"+a]()),a in t)for(let b=0,c=t[a].length;b<c;b++)this.readyState===this.DONE?setImmediate(function(){t[a][b].call(h)}):t[a][b].call(h)};var u=function(a){if(h.readyState!==a&&(h.readyState!==h.UNSENT||!s)&&(h.readyState=a,(k.async||h.readyState<h.OPENED||h.readyState===h.DONE)&&h.dispatchEvent("readystatechange"),h.readyState===h.DONE)){let a;a=s?"abort":r?"error":"load",h.dispatchEvent(a),h.dispatchEvent("loadend")}}}a.exports=g,g.XMLHttpRequest=g},299881:(a,b,c)=>{"use strict";let d=c(594735),e=c(55591),f=c(781630),g=c(491645),h=c(134631),{randomBytes:i,createHash:j}=c(455511),{Readable:k}=c(927910),{URL:l}=c(379551),m=c(134960),n=c(889621),o=c(933365),{BINARY_TYPES:p,EMPTY_BUFFER:q,GUID:r,kForOnEventAttribute:s,kListener:t,kStatusCode:u,kWebSocket:v,NOOP:w}=c(715443),{EventTarget:{addEventListener:x,removeEventListener:y}}=c(607310),{format:z,parse:A}=c(151243),{toBuffer:B}=c(871783),C=Symbol("kAborted"),D=[8,13],E=["CONNECTING","OPEN","CLOSING","CLOSED"],F=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class G extends d{constructor(a,b,c){super(),this._binaryType=p[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=q,this._closeTimer=null,this._extensions={},this._paused=!1,this._protocol="",this._readyState=G.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==a?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===b?b=[]:Array.isArray(b)||("object"==typeof b&&null!==b?(c=b,b=[]):b=[b]),function a(b,c,d,g){let h,k,n,o,p={protocolVersion:D[1],maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...g,createConnection:void 0,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(!D.includes(p.protocolVersion))throw RangeError(`Unsupported protocol version: ${p.protocolVersion} (supported versions: ${D.join(", ")})`);if(c instanceof l)h=c,b._url=c.href;else{try{h=new l(c)}catch(a){throw SyntaxError(`Invalid URL: ${c}`)}b._url=c}let q="wss:"===h.protocol,s="ws+unix:"===h.protocol;if("ws:"===h.protocol||q||s?s&&!h.pathname?k="The URL's pathname is empty":h.hash&&(k="The URL contains a fragment identifier"):k='The URL\'s protocol must be one of "ws:", "wss:", or "ws+unix:"',k){let a=SyntaxError(k);if(0!==b._redirects)return void H(b,a);throw a}let t=q?443:80,u=i(16).toString("base64"),v=q?e.request:f.request,w=new Set;if(p.createConnection=q?J:I,p.defaultPort=p.defaultPort||t,p.port=h.port||t,p.host=h.hostname.startsWith("[")?h.hostname.slice(1,-1):h.hostname,p.headers={...p.headers,"Sec-WebSocket-Version":p.protocolVersion,"Sec-WebSocket-Key":u,Connection:"Upgrade",Upgrade:"websocket"},p.path=h.pathname+h.search,p.timeout=p.handshakeTimeout,p.perMessageDeflate&&(n=new m(!0!==p.perMessageDeflate?p.perMessageDeflate:{},!1,p.maxPayload),p.headers["Sec-WebSocket-Extensions"]=z({[m.extensionName]:n.offer()})),d.length){for(let a of d){if("string"!=typeof a||!F.test(a)||w.has(a))throw SyntaxError("An invalid or duplicated subprotocol was specified");w.add(a)}p.headers["Sec-WebSocket-Protocol"]=d.join(",")}if(p.origin&&(p.protocolVersion<13?p.headers["Sec-WebSocket-Origin"]=p.origin:p.headers.Origin=p.origin),(h.username||h.password)&&(p.auth=`${h.username}:${h.password}`),s){let a=p.path.split(":");p.socketPath=a[0],p.path=a[1]}if(p.followRedirects){if(0===b._redirects){b._originalIpc=s,b._originalSecure=q,b._originalHostOrSocketPath=s?p.socketPath:h.host;let a=g&&g.headers;if(g={...g,headers:{}},a)for(let[b,c]of Object.entries(a))g.headers[b.toLowerCase()]=c}else if(0===b.listenerCount("redirect")){let a=s?!!b._originalIpc&&p.socketPath===b._originalHostOrSocketPath:!b._originalIpc&&h.host===b._originalHostOrSocketPath;a&&(!b._originalSecure||q)||(delete p.headers.authorization,delete p.headers.cookie,a||delete p.headers.host,p.auth=void 0)}p.auth&&!g.headers.authorization&&(g.headers.authorization="Basic "+Buffer.from(p.auth).toString("base64")),o=b._req=v(p),b._redirects&&b.emit("redirect",b.url,o)}else o=b._req=v(p);p.timeout&&o.on("timeout",()=>{K(b,o,"Opening handshake has timed out")}),o.on("error",a=>{null===o||o[C]||(o=b._req=null,H(b,a))}),o.on("response",e=>{let f=e.headers.location,h=e.statusCode;if(f&&p.followRedirects&&h>=300&&h<400){let e;if(++b._redirects>p.maxRedirects)return void K(b,o,"Maximum redirects exceeded");o.abort();try{e=new l(f,c)}catch(a){H(b,SyntaxError(`Invalid URL: ${f}`));return}a(b,e,d,g)}else b.emit("unexpected-response",o,e)||K(b,o,`Unexpected server response: ${e.statusCode}`)}),o.on("upgrade",(a,c,d)=>{let e;if(b.emit("upgrade",a),b.readyState!==G.CONNECTING)return;if(o=b._req=null,"websocket"!==a.headers.upgrade.toLowerCase())return void K(b,c,"Invalid Upgrade header");let f=j("sha1").update(u+r).digest("base64");if(a.headers["sec-websocket-accept"]!==f)return void K(b,c,"Invalid Sec-WebSocket-Accept header");let g=a.headers["sec-websocket-protocol"];if(void 0!==g?w.size?w.has(g)||(e="Server sent an invalid subprotocol"):e="Server sent a subprotocol but none was requested":w.size&&(e="Server sent no subprotocol"),e)return void K(b,c,e);g&&(b._protocol=g);let h=a.headers["sec-websocket-extensions"];if(void 0!==h){let a;if(!n)return void K(b,c,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");try{a=A(h)}catch(a){K(b,c,"Invalid Sec-WebSocket-Extensions header");return}let d=Object.keys(a);if(1!==d.length||d[0]!==m.extensionName)return void K(b,c,"Server indicated an extension that was not requested");try{n.accept(a[m.extensionName])}catch(a){K(b,c,"Invalid Sec-WebSocket-Extensions header");return}b._extensions[m.extensionName]=n}b.setSocket(c,d,{generateMask:p.generateMask,maxPayload:p.maxPayload,skipUTF8Validation:p.skipUTF8Validation})}),o.end()}(this,a,b,c)):this._isServer=!0}get binaryType(){return this._binaryType}set binaryType(a){p.includes(a)&&(this._binaryType=a,this._receiver&&(this._receiver._binaryType=a))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(a,b,c){let d=new n({binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:c.maxPayload,skipUTF8Validation:c.skipUTF8Validation});this._sender=new o(a,this._extensions,c.generateMask),this._receiver=d,this._socket=a,d[v]=this,a[v]=this,d.on("conclude",M),d.on("drain",N),d.on("error",O),d.on("message",Q),d.on("ping",R),d.on("pong",S),a.setTimeout(0),a.setNoDelay(),b.length>0&&a.unshift(b),a.on("close",U),a.on("data",V),a.on("end",W),a.on("error",X),this._readyState=G.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=G.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[m.extensionName]&&this._extensions[m.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=G.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(a,b){if(this.readyState!==G.CLOSED){if(this.readyState===G.CONNECTING)return K(this,this._req,"WebSocket was closed before the connection was established");if(this.readyState===G.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=G.CLOSING,this._sender.close(a,b,!this._isServer,a=>{!a&&(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),this._closeTimer=setTimeout(this._socket.destroy.bind(this._socket),3e4)}}pause(){this.readyState!==G.CONNECTING&&this.readyState!==G.CLOSED&&(this._paused=!0,this._socket.pause())}ping(a,b,c){if(this.readyState===G.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==G.OPEN)return void L(this,a,c);void 0===b&&(b=!this._isServer),this._sender.ping(a||q,b,c)}pong(a,b,c){if(this.readyState===G.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof a?(c=a,a=b=void 0):"function"==typeof b&&(c=b,b=void 0),"number"==typeof a&&(a=a.toString()),this.readyState!==G.OPEN)return void L(this,a,c);void 0===b&&(b=!this._isServer),this._sender.pong(a||q,b,c)}resume(){this.readyState!==G.CONNECTING&&this.readyState!==G.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(a,b,c){if(this.readyState===G.CONNECTING)throw Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof b&&(c=b,b={}),"number"==typeof a&&(a=a.toString()),this.readyState!==G.OPEN)return void L(this,a,c);let d={binary:"string"!=typeof a,mask:!this._isServer,compress:!0,fin:!0,...b};this._extensions[m.extensionName]||(d.compress=!1),this._sender.send(a||q,d,c)}terminate(){if(this.readyState!==G.CLOSED){if(this.readyState===G.CONNECTING)return K(this,this._req,"WebSocket was closed before the connection was established");this._socket&&(this._readyState=G.CLOSING,this._socket.destroy())}}}function H(a,b){a._readyState=G.CLOSING,a.emit("error",b),a.emitClose()}function I(a){return a.path=a.socketPath,g.connect(a)}function J(a){return a.path=void 0,a.servername||""===a.servername||(a.servername=g.isIP(a.host)?"":a.host),h.connect(a)}function K(a,b,c){a._readyState=G.CLOSING;let d=Error(c);Error.captureStackTrace(d,K),b.setHeader?(b[C]=!0,b.abort(),b.socket&&!b.socket.destroyed&&b.socket.destroy(),process.nextTick(H,a,d)):(b.destroy(d),b.once("error",a.emit.bind(a,"error")),b.once("close",a.emitClose.bind(a)))}function L(a,b,c){if(b){let c=B(b).length;a._socket?a._sender._bufferedBytes+=c:a._bufferedAmount+=c}c&&c(Error(`WebSocket is not open: readyState ${a.readyState} (${E[a.readyState]})`))}function M(a,b){let c=this[v];c._closeFrameReceived=!0,c._closeMessage=b,c._closeCode=a,void 0!==c._socket[v]&&(c._socket.removeListener("data",V),process.nextTick(T,c._socket),1005===a?c.close():c.close(a,b))}function N(){let a=this[v];a.isPaused||a._socket.resume()}function O(a){let b=this[v];void 0!==b._socket[v]&&(b._socket.removeListener("data",V),process.nextTick(T,b._socket),b.close(a[u])),b.emit("error",a)}function P(){this[v].emitClose()}function Q(a,b){this[v].emit("message",a,b)}function R(a){let b=this[v];b.pong(a,!b._isServer,w),b.emit("ping",a)}function S(a){this[v].emit("pong",a)}function T(a){a.resume()}function U(){let a,b=this[v];this.removeListener("close",U),this.removeListener("data",V),this.removeListener("end",W),b._readyState=G.CLOSING,this._readableState.endEmitted||b._closeFrameReceived||b._receiver._writableState.errorEmitted||null===(a=b._socket.read())||b._receiver.write(a),b._receiver.end(),this[v]=void 0,clearTimeout(b._closeTimer),b._receiver._writableState.finished||b._receiver._writableState.errorEmitted?b.emitClose():(b._receiver.on("error",P),b._receiver.on("finish",P))}function V(a){this[v]._receiver.write(a)||this.pause()}function W(){let a=this[v];a._readyState=G.CLOSING,a._receiver.end(),this.end()}function X(){let a=this[v];this.removeListener("error",X),this.on("error",w),a&&(a._readyState=G.CLOSING,this.destroy())}Object.defineProperty(G,"CONNECTING",{enumerable:!0,value:E.indexOf("CONNECTING")}),Object.defineProperty(G.prototype,"CONNECTING",{enumerable:!0,value:E.indexOf("CONNECTING")}),Object.defineProperty(G,"OPEN",{enumerable:!0,value:E.indexOf("OPEN")}),Object.defineProperty(G.prototype,"OPEN",{enumerable:!0,value:E.indexOf("OPEN")}),Object.defineProperty(G,"CLOSING",{enumerable:!0,value:E.indexOf("CLOSING")}),Object.defineProperty(G.prototype,"CLOSING",{enumerable:!0,value:E.indexOf("CLOSING")}),Object.defineProperty(G,"CLOSED",{enumerable:!0,value:E.indexOf("CLOSED")}),Object.defineProperty(G.prototype,"CLOSED",{enumerable:!0,value:E.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(a=>{Object.defineProperty(G.prototype,a,{enumerable:!0})}),["open","error","close","message"].forEach(a=>{Object.defineProperty(G.prototype,`on${a}`,{enumerable:!0,get(){for(let b of this.listeners(a))if(b[s])return b[t];return null},set(b){for(let b of this.listeners(a))if(b[s]){this.removeListener(a,b);break}"function"==typeof b&&this.addEventListener(a,b,{[s]:!0})}})}),G.prototype.addEventListener=x,G.prototype.removeEventListener=y,a.exports=G},372303:(a,b,c)=>{"use strict";let d,e;c.d(b,{default:()=>ay});var f,g={};c.r(g),c.d(g,{Decoder:()=>an,Encoder:()=>al,PacketType:()=>f,protocol:()=>ak});let h=Object.create(null);h.open="0",h.close="1",h.ping="2",h.pong="3",h.message="4",h.upgrade="5",h.noop="6";let i=Object.create(null);Object.keys(h).forEach(a=>{i[h[a]]=a});let j={type:"error",data:"parser error"},k=({type:a,data:b},c,d)=>d(b instanceof ArrayBuffer||ArrayBuffer.isView(b)?c?b:"b"+l(b,!0).toString("base64"):h[a]+(b||"")),l=(a,b)=>Buffer.isBuffer(a)||a instanceof Uint8Array&&!b?a:a instanceof ArrayBuffer?Buffer.from(a):Buffer.from(a.buffer,a.byteOffset,a.byteLength),m=(a,b)=>{if("string"!=typeof a)return{type:"message",data:n(a,b)};let c=a.charAt(0);return"b"===c?{type:"message",data:n(Buffer.from(a.substring(1),"base64"),b)}:i[c]?a.length>1?{type:i[c],data:a.substring(1)}:{type:i[c]}:j},n=(a,b)=>"arraybuffer"===b?a instanceof ArrayBuffer?a:Buffer.isBuffer(a)?a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength):a.buffer:Buffer.isBuffer(a)?a:Buffer.from(a);function o(a){return a.reduce((a,b)=>a+b.length,0)}function p(a,b){if(a[0].length===b)return a.shift();let c=new Uint8Array(b),d=0;for(let e=0;e<b;e++)c[e]=a[0][d++],d===a[0].length&&(a.shift(),d=0);return a.length&&d<a[0].length&&(a[0]=a[0].slice(d)),c}function q(a){if(a){var b=a;for(var c in q.prototype)b[c]=q.prototype[c];return b}}q.prototype.on=q.prototype.addEventListener=function(a,b){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(b),this},q.prototype.once=function(a,b){function c(){this.off(a,c),b.apply(this,arguments)}return c.fn=b,this.on(a,c),this},q.prototype.off=q.prototype.removeListener=q.prototype.removeAllListeners=q.prototype.removeEventListener=function(a,b){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var c,d=this._callbacks["$"+a];if(!d)return this;if(1==arguments.length)return delete this._callbacks["$"+a],this;for(var e=0;e<d.length;e++)if((c=d[e])===b||c.fn===b){d.splice(e,1);break}return 0===d.length&&delete this._callbacks["$"+a],this},q.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var b=Array(arguments.length-1),c=this._callbacks["$"+a],d=1;d<arguments.length;d++)b[d-1]=arguments[d];if(c){c=c.slice(0);for(var d=0,e=c.length;d<e;++d)c[d].apply(this,b)}return this},q.prototype.emitReserved=q.prototype.emit,q.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]},q.prototype.hasListeners=function(a){return!!this.listeners(a).length};let r=global;function s(a,...b){return b.reduce((b,c)=>(a.hasOwnProperty(c)&&(b[c]=a[c]),b),{})}let t=r.setTimeout,u=r.clearTimeout;function v(a,b){b.useNativeTimers?(a.setTimeoutFn=t.bind(r),a.clearTimeoutFn=u.bind(r)):(a.setTimeoutFn=r.setTimeout.bind(r),a.clearTimeoutFn=r.clearTimeout.bind(r))}var w=c(682842);let x=w("engine.io-client:transport");class y extends Error{constructor(a,b,c){super(a),this.description=b,this.context=c,this.type="TransportError"}}class z extends q{constructor(a){super(),this.writable=!1,v(this,a),this.opts=a,this.query=a.query,this.socket=a.socket}onError(a,b,c){return super.emitReserved("error",new y(a,b,c)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(a){"open"===this.readyState?this.write(a):x("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(a){let b=m(a,this.socket.binaryType);this.onPacket(b)}onPacket(a){super.emitReserved("packet",a)}onClose(a){this.readyState="closed",super.emitReserved("close",a)}pause(a){}createUri(a,b={}){return a+"://"+this._hostname()+this._port()+this.opts.path+this._query(b)}_hostname(){let a=this.opts.hostname;return -1===a.indexOf(":")?a:"["+a+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(a){let b=function(a){let b="";for(let c in a)a.hasOwnProperty(c)&&(b.length&&(b+="&"),b+=encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b}(a);return b.length?"?"+b:""}}let A="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),B={},C=0,D=0,E;function F(a){let b="";do b=A[a%64]+b,a=Math.floor(a/64);while(a>0);return b}function G(){let a=F(+new Date);return a!==E?(C=0,E=a):a+"."+F(C++)}for(;D<64;D++)B[A[D]]=D;var H=c(276007),I=c.t(H,2);let J=H||I;class K{constructor(){this.cookies=new Map}parseCookies(a){let b=a.getResponseHeader("set-cookie");b&&b.forEach(a=>{let b=function(a){let b=a.split("; "),c=b[0].indexOf("=");if(-1===c)return;let d=b[0].substring(0,c).trim();if(!d.length)return;let e=b[0].substring(c+1).trim();34===e.charCodeAt(0)&&(e=e.slice(1,-1));let f={name:d,value:e};for(let a=1;a<b.length;a++){let c=b[a].split("=");if(2!==c.length)continue;let d=c[0].trim(),e=c[1].trim();switch(d){case"Expires":f.expires=new Date(e);break;case"Max-Age":let g=new Date;g.setUTCSeconds(g.getUTCSeconds()+parseInt(e,10)),f.expires=g}}return f}(a);b&&this.cookies.set(b.name,b)})}addCookies(a){let b=[];this.cookies.forEach((a,c)=>{var d;(null==(d=a.expires)?void 0:d.getTime())<Date.now()?this.cookies.delete(c):b.push(`${c}=${a.value}`)}),b.length&&(a.setDisableHeaderCheck(!0),a.setRequestHeader("cookie",b.join("; ")))}}let L=w("engine.io-client:polling");function M(){}let N=null!=new J({xdomain:!1}).responseType;class O extends z{constructor(a){if(super(a),this.polling=!1,"undefined"!=typeof location){let b="https:"===location.protocol,c=location.port;c||(c=b?"443":"80"),this.xd="undefined"!=typeof location&&a.hostname!==location.hostname||c!==a.port}let b=a&&a.forceBase64;this.supportsBinary=N&&!b,this.opts.withCredentials&&(this.cookieJar=new K)}get name(){return"polling"}doOpen(){this.poll()}pause(a){this.readyState="pausing";let b=()=>{L("paused"),this.readyState="paused",a()};if(this.polling||!this.writable){let a=0;this.polling&&(L("we are currently polling - waiting to pause"),a++,this.once("pollComplete",function(){L("pre-pause polling complete"),--a||b()})),this.writable||(L("we are currently writing - waiting to pause"),a++,this.once("drain",function(){L("pre-pause writing complete"),--a||b()}))}else b()}poll(){L("polling"),this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(a){L("polling got data %s",a);let b=a=>{if("opening"===this.readyState&&"open"===a.type&&this.onOpen(),"close"===a.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};((a,b)=>{let c=a.split("\x1e"),d=[];for(let a=0;a<c.length;a++){let e=m(c[a],b);if(d.push(e),"error"===e.type)break}return d})(a,this.socket.binaryType).forEach(b),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState?this.poll():L('ignoring poll - transport state "%s"',this.readyState))}doClose(){let a=()=>{L("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(L("transport open - closing"),a()):(L("transport not open - deferring close"),this.once("open",a))}write(a){this.writable=!1,((a,b)=>{let c=a.length,d=Array(c),e=0;a.forEach((a,f)=>{k(a,!1,a=>{d[f]=a,++e===c&&b(d.join("\x1e"))})})})(a,a=>{this.doWrite(a,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let a=this.opts.secure?"https":"http",b=this.query||{};return!1!==this.opts.timestampRequests&&(b[this.opts.timestampParam]=G()),this.supportsBinary||b.sid||(b.b64=1),this.createUri(a,b)}request(a={}){return Object.assign(a,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new P(this.uri(),a)}doWrite(a,b){let c=this.request({method:"POST",data:a});c.on("success",b),c.on("error",(a,b)=>{this.onError("xhr post error",a,b)})}doPoll(){L("xhr poll");let a=this.request();a.on("data",this.onData.bind(this)),a.on("error",(a,b)=>{this.onError("xhr poll error",a,b)}),this.pollXhr=a}}class P extends q{constructor(a,b){super(),v(this,b),this.opts=b,this.method=b.method||"GET",this.uri=a,this.data=void 0!==b.data?b.data:null,this.create()}create(){var a;let b=s(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");b.xdomain=!!this.opts.xd;let c=this.xhr=new J(b);try{L("xhr open %s: %s",this.method,this.uri),c.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(let a in c.setDisableHeaderCheck&&c.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(a)&&c.setRequestHeader(a,this.opts.extraHeaders[a])}catch(a){}if("POST"===this.method)try{c.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}try{c.setRequestHeader("Accept","*/*")}catch(a){}null==(a=this.opts.cookieJar)||a.addCookies(c),"withCredentials"in c&&(c.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(c.timeout=this.opts.requestTimeout),c.onreadystatechange=()=>{var a;3===c.readyState&&(null==(a=this.opts.cookieJar)||a.parseCookies(c)),4===c.readyState&&(200===c.status||1223===c.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof c.status?c.status:0)},0))},L("xhr data %s",this.data),c.send(this.data)}catch(a){this.setTimeoutFn(()=>{this.onError(a)},0);return}"undefined"!=typeof document&&(this.index=P.requestsCount++,P.requests[this.index]=this)}onError(a){this.emitReserved("error",a,this.xhr),this.cleanup(!0)}cleanup(a){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=M,a)try{this.xhr.abort()}catch(a){}"undefined"!=typeof document&&delete P.requests[this.index],this.xhr=null}}onLoad(){let a=this.xhr.responseText;null!==a&&(this.emitReserved("data",a),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}function Q(){for(let a in P.requests)P.requests.hasOwnProperty(a)&&P.requests[a].abort()}P.requestsCount=0,P.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",Q):"function"==typeof addEventListener&&addEventListener("onpagehide"in r?"pagehide":"unload",Q,!1)),c(829103),c(889621),c(933365);var R=c(299881);c(820801);let S=process.nextTick,T=w("engine.io-client:websocket"),U="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class V extends z{constructor(a){super(a),this.supportsBinary=!a.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let a=this.uri(),b=this.opts.protocols,c=U?{}:s(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(c.headers=this.opts.extraHeaders);try{this.ws=new R(a,b,c)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=a=>this.onClose({description:"websocket connection closed",context:a}),this.ws.onmessage=a=>this.onData(a.data),this.ws.onerror=a=>this.onError("websocket error",a)}write(a){this.writable=!1;for(let b=0;b<a.length;b++){let c=a[b],d=b===a.length-1;k(c,this.supportsBinary,a=>{let b={};c.options&&(b.compress=c.options.compress),this.opts.perMessageDeflate&&("string"==typeof a?Buffer.byteLength(a):a.length)<this.opts.perMessageDeflate.threshold&&(b.compress=!1);try{this.ws.send(a,b)}catch(a){T("websocket closed before onclose event")}d&&S(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let a=this.opts.secure?"wss":"ws",b=this.query||{};return this.opts.timestampRequests&&(b[this.opts.timestampParam]=G()),this.supportsBinary||(b.b64=1),this.createUri(a,b)}check(){return!!R}}let W=w("engine.io-client:webtransport");class X extends z{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{W("transport closed gracefully"),this.onClose()}).catch(a=>{W("transport closed due to %s",a),this.onError("webtransport error",a)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(a=>{let b=function(a,b){e||(e=new TextDecoder);let c=[],d=0,f=-1,g=!1;return new TransformStream({transform(h,i){for(c.push(h);;){if(0===d){if(1>o(c))break;let a=p(c,1);g=(128&a[0])==128,d=(f=127&a[0])<126?3:126===f?1:2}else if(1===d){if(2>o(c))break;let a=p(c,2);f=new DataView(a.buffer,a.byteOffset,a.length).getUint16(0),d=3}else if(2===d){if(8>o(c))break;let a=p(c,8),b=new DataView(a.buffer,a.byteOffset,a.length),e=b.getUint32(0);if(e>2097151){i.enqueue(j);break}f=0x100000000*e+b.getUint32(4),d=3}else{if(o(c)<f)break;let a=p(c,f);i.enqueue(m(g?a:e.decode(a),b)),d=0}if(0===f||f>a){i.enqueue(j);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),c=a.readable.pipeThrough(b).getReader(),f=new TransformStream({transform(a,b){!function(a,b){if(a.data instanceof ArrayBuffer||ArrayBuffer.isView(a.data))return b(l(a.data,!1));k(a,!0,a=>{d||(d=new TextEncoder),b(d.encode(a))})}(a,c=>{let d,e=c.length;if(e<126)new DataView((d=new Uint8Array(1)).buffer).setUint8(0,e);else if(e<65536){let a=new DataView((d=new Uint8Array(3)).buffer);a.setUint8(0,126),a.setUint16(1,e)}else{let a=new DataView((d=new Uint8Array(9)).buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(e))}a.data&&"string"!=typeof a.data&&(d[0]|=128),b.enqueue(d),b.enqueue(c)})}});f.readable.pipeTo(a.writable),this.writer=f.writable.getWriter();let g=()=>{c.read().then(({done:a,value:b})=>{if(a)return void W("session is closed");W("received chunk: %o",b),this.onPacket(b),g()}).catch(a=>{W("an error occurred while reading: %s",a)})};g();let h={type:"open"};this.query.sid&&(h.data=`{"sid":"${this.query.sid}"}`),this.writer.write(h).then(()=>this.onOpen())})}))}write(a){this.writable=!1;for(let b=0;b<a.length;b++){let c=a[b],d=b===a.length-1;this.writer.write(c).then(()=>{d&&S(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var a;null==(a=this.transport)||a.close()}}let Y={websocket:V,webtransport:X,polling:O},Z=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _(a){let b=a,c=a.indexOf("["),d=a.indexOf("]");-1!=c&&-1!=d&&(a=a.substring(0,c)+a.substring(c,d).replace(/:/g,";")+a.substring(d,a.length));let e=Z.exec(a||""),f={},g=14;for(;g--;)f[$[g]]=e[g]||"";return -1!=c&&-1!=d&&(f.source=b,f.host=f.host.substring(1,f.host.length-1).replace(/;/g,":"),f.authority=f.authority.replace("[","").replace("]","").replace(/;/g,":"),f.ipv6uri=!0),f.pathNames=function(a,b){let c=b.replace(/\/{2,9}/g,"/").split("/");return("/"==b.slice(0,1)||0===b.length)&&c.splice(0,1),"/"==b.slice(-1)&&c.splice(c.length-1,1),c}(0,f.path),f.queryKey=function(a,b){let c={};return b.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,b,d){b&&(c[b]=d)}),c}(0,f.query),f}let aa=w("engine.io-client:socket");class ab extends q{constructor(a,b={}){super(),this.binaryType="nodebuffer",this.writeBuffer=[],a&&"object"==typeof a&&(b=a,a=null),a?(a=_(a),b.hostname=a.host,b.secure="https"===a.protocol||"wss"===a.protocol,b.port=a.port,a.query&&(b.query=a.query)):b.host&&(b.hostname=_(b.host).host),v(this,b),this.secure=null!=b.secure?b.secure:"undefined"!=typeof location&&"https:"===location.protocol,b.hostname&&!b.port&&(b.port=this.secure?"443":"80"),this.hostname=b.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=b.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=b.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},b),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(a){let b={},c=a.split("&");for(let a=0,d=c.length;a<d;a++){let d=c[a].split("=");b[decodeURIComponent(d[0])]=decodeURIComponent(d[1])}return b}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(a){aa('creating transport "%s"',a);let b=Object.assign({},this.opts.query);b.EIO=4,b.transport=a,this.id&&(b.sid=this.id);let c=Object.assign({},this.opts,{query:b,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[a]);return aa("options: %j",c),new Y[a](c)}open(){let a;if(this.opts.rememberUpgrade&&ab.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))a="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);a=this.transports[0]}this.readyState="opening";try{a=this.createTransport(a)}catch(a){aa("error while creating transport: %s",a),this.transports.shift(),this.open();return}a.open(),this.setTransport(a)}setTransport(a){aa("setting transport %s",a.name),this.transport&&(aa("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=a,a.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",a=>this.onClose("transport close",a))}probe(a){aa('probing transport "%s"',a);let b=this.createTransport(a),c=!1;ab.priorWebsocketSuccess=!1;let d=()=>{c||(aa('probe transport "%s" opened',a),b.send([{type:"ping",data:"probe"}]),b.once("packet",d=>{if(!c)if("pong"===d.type&&"probe"===d.data){if(aa('probe transport "%s" pong',a),this.upgrading=!0,this.emitReserved("upgrading",b),!b)return;ab.priorWebsocketSuccess="websocket"===b.name,aa('pausing current transport "%s"',this.transport.name),this.transport.pause(()=>{c||"closed"!==this.readyState&&(aa("changing transport and sending upgrade packet"),j(),this.setTransport(b),b.send([{type:"upgrade"}]),this.emitReserved("upgrade",b),b=null,this.upgrading=!1,this.flush())})}else{aa('probe transport "%s" failed',a);let c=Error("probe error");c.transport=b.name,this.emitReserved("upgradeError",c)}}))};function e(){c||(c=!0,j(),b.close(),b=null)}let f=c=>{let d=Error("probe error: "+c);d.transport=b.name,e(),aa('probe transport "%s" failed because of error: %s',a,c),this.emitReserved("upgradeError",d)};function g(){f("transport closed")}function h(){f("socket closed")}function i(a){b&&a.name!==b.name&&(aa('"%s" works - aborting "%s"',a.name,b.name),e())}let j=()=>{b.removeListener("open",d),b.removeListener("error",f),b.removeListener("close",g),this.off("close",h),this.off("upgrading",i)};b.once("open",d),b.once("error",f),b.once("close",g),this.once("close",h),this.once("upgrading",i),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==a?this.setTimeoutFn(()=>{c||b.open()},200):b.open()}onOpen(){if(aa("socket open"),this.readyState="open",ab.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){aa("starting upgrade probes");let a=0,b=this.upgrades.length;for(;a<b;a++)this.probe(this.upgrades[a])}}onPacket(a){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(aa('socket receive: type "%s", data "%s"',a.type,a.data),this.emitReserved("packet",a),this.emitReserved("heartbeat"),this.resetPingTimeout(),a.type){case"open":this.onHandshake(JSON.parse(a.data));break;case"ping":this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let b=Error("server error");b.code=a.data,this.onError(b);break;case"message":this.emitReserved("data",a.data),this.emitReserved("message",a.data)}else aa('packet received with socket readyState "%s"',this.readyState)}onHandshake(a){this.emitReserved("handshake",a),this.id=a.sid,this.transport.query.sid=a.sid,this.upgrades=this.filterUpgrades(a.upgrades),this.pingInterval=a.pingInterval,this.pingTimeout=a.pingTimeout,this.maxPayload=a.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let a=this.getWritablePackets();aa("flushing %d packets in socket",a.length),this.transport.send(a),this.prevBufferLen=a.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let a=1;for(let b=0;b<this.writeBuffer.length;b++){let c=this.writeBuffer[b].data;if(c&&(a+="string"==typeof c?function(a){let b=0,c=0;for(let d=0,e=a.length;d<e;d++)(b=a.charCodeAt(d))<128?c+=1:b<2048?c+=2:b<55296||b>=57344?c+=3:(d++,c+=4);return c}(c):Math.ceil(1.33*(c.byteLength||c.size))),b>0&&a>this.maxPayload)return aa("only send %d out of %d packets",b,this.writeBuffer.length),this.writeBuffer.slice(0,b);a+=2}return aa("payload size is %d (max: %d)",a,this.maxPayload),this.writeBuffer}write(a,b,c){return this.sendPacket("message",a,b,c),this}send(a,b,c){return this.sendPacket("message",a,b,c),this}sendPacket(a,b,c,d){if("function"==typeof b&&(d=b,b=void 0),"function"==typeof c&&(d=c,c=null),"closing"===this.readyState||"closed"===this.readyState)return;(c=c||{}).compress=!1!==c.compress;let e={type:a,data:b,options:c};this.emitReserved("packetCreate",e),this.writeBuffer.push(e),d&&this.once("flush",d),this.flush()}close(){let a=()=>{this.onClose("forced close"),aa("socket closing - telling transport to close"),this.transport.close()},b=()=>{this.off("upgrade",b),this.off("upgradeError",b),a()},c=()=>{this.once("upgrade",b),this.once("upgradeError",b)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?c():a()}):this.upgrading?c():a()),this}onError(a){aa("socket error %j",a),ab.priorWebsocketSuccess=!1,this.emitReserved("error",a),this.onClose("transport error",a)}onClose(a,b){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(aa('socket close with reason: "%s"',a),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",a,b),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(a){let b=[],c=0,d=a.length;for(;c<d;c++)~this.transports.indexOf(a[c])&&b.push(a[c]);return b}}ab.protocol=4,ab.protocol;let ac=w("socket.io-client:url"),ad="function"==typeof ArrayBuffer,ae=Object.prototype.toString,af="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===ae.call(Blob),ag="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===ae.call(File);function ah(a){return ad&&(a instanceof ArrayBuffer||("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer))||af&&a instanceof Blob||ag&&a instanceof File}let ai=w("socket.io-parser"),aj=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],ak=5;!function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"}(f||(f={}));class al{constructor(a){this.replacer=a}encode(a){return(ai("encoding packet %j",a),(a.type===f.EVENT||a.type===f.ACK)&&function a(b,c){if(!b||"object"!=typeof b)return!1;if(Array.isArray(b)){for(let c=0,d=b.length;c<d;c++)if(a(b[c]))return!0;return!1}if(ah(b))return!0;if(b.toJSON&&"function"==typeof b.toJSON&&1==arguments.length)return a(b.toJSON(),!0);for(let c in b)if(Object.prototype.hasOwnProperty.call(b,c)&&a(b[c]))return!0;return!1}(a))?this.encodeAsBinary({type:a.type===f.EVENT?f.BINARY_EVENT:f.BINARY_ACK,nsp:a.nsp,data:a.data,id:a.id}):[this.encodeAsString(a)]}encodeAsString(a){let b=""+a.type;return(a.type===f.BINARY_EVENT||a.type===f.BINARY_ACK)&&(b+=a.attachments+"-"),a.nsp&&"/"!==a.nsp&&(b+=a.nsp+","),null!=a.id&&(b+=a.id),null!=a.data&&(b+=JSON.stringify(a.data,this.replacer)),ai("encoded %j as %s",a,b),b}encodeAsBinary(a){let b=function(a){let b=[],c=a.data;return a.data=function a(b,c){if(!b)return b;if(ah(b)){let a={_placeholder:!0,num:c.length};return c.push(b),a}if(Array.isArray(b)){let d=Array(b.length);for(let e=0;e<b.length;e++)d[e]=a(b[e],c);return d}if("object"==typeof b&&!(b instanceof Date)){let d={};for(let e in b)Object.prototype.hasOwnProperty.call(b,e)&&(d[e]=a(b[e],c));return d}return b}(c,b),a.attachments=b.length,{packet:a,buffers:b}}(a),c=this.encodeAsString(b.packet),d=b.buffers;return d.unshift(c),d}}function am(a){return"[object Object]"===Object.prototype.toString.call(a)}class an extends q{constructor(a){super(),this.reviver=a}add(a){let b;if("string"==typeof a){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");let c=(b=this.decodeString(a)).type===f.BINARY_EVENT;c||b.type===f.BINARY_ACK?(b.type=c?f.EVENT:f.ACK,this.reconstructor=new ao(b),0===b.attachments&&super.emitReserved("decoded",b)):super.emitReserved("decoded",b)}else if(ah(a)||a.base64)if(this.reconstructor)(b=this.reconstructor.takeBinaryData(a))&&(this.reconstructor=null,super.emitReserved("decoded",b));else throw Error("got binary data when not reconstructing a packet");else throw Error("Unknown type: "+a)}decodeString(a){let b=0,c={type:Number(a.charAt(0))};if(void 0===f[c.type])throw Error("unknown packet type "+c.type);if(c.type===f.BINARY_EVENT||c.type===f.BINARY_ACK){let d=b+1;for(;"-"!==a.charAt(++b)&&b!=a.length;);let e=a.substring(d,b);if(e!=Number(e)||"-"!==a.charAt(b))throw Error("Illegal attachments");c.attachments=Number(e)}if("/"===a.charAt(b+1)){let d=b+1;for(;++b&&","!==a.charAt(b)&&b!==a.length;);c.nsp=a.substring(d,b)}else c.nsp="/";let d=a.charAt(b+1);if(""!==d&&Number(d)==d){let d=b+1;for(;++b;){let c=a.charAt(b);if(null==c||Number(c)!=c){--b;break}if(b===a.length)break}c.id=Number(a.substring(d,b+1))}if(a.charAt(++b)){let d=this.tryParse(a.substr(b));if(an.isPayloadValid(c.type,d))c.data=d;else throw Error("invalid payload")}return ai("decoded %s as %j",a,c),c}tryParse(a){try{return JSON.parse(a,this.reviver)}catch(a){return!1}}static isPayloadValid(a,b){switch(a){case f.CONNECT:return am(b);case f.DISCONNECT:return void 0===b;case f.CONNECT_ERROR:return"string"==typeof b||am(b);case f.EVENT:case f.BINARY_EVENT:return Array.isArray(b)&&("number"==typeof b[0]||"string"==typeof b[0]&&-1===aj.indexOf(b[0]));case f.ACK:case f.BINARY_ACK:return Array.isArray(b)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ao{constructor(a){this.packet=a,this.buffers=[],this.reconPack=a}takeBinaryData(a){if(this.buffers.push(a),this.buffers.length===this.reconPack.attachments){var b,c;let a=(b=this.reconPack,c=this.buffers,b.data=function a(b,c){if(!b)return b;if(b&&!0===b._placeholder){if("number"==typeof b.num&&b.num>=0&&b.num<c.length)return c[b.num];throw Error("illegal attachments")}if(Array.isArray(b))for(let d=0;d<b.length;d++)b[d]=a(b[d],c);else if("object"==typeof b)for(let d in b)Object.prototype.hasOwnProperty.call(b,d)&&(b[d]=a(b[d],c));return b}(b.data,c),delete b.attachments,b);return this.finishedReconstruction(),a}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ap(a,b,c){return a.on(b,c),function(){a.off(b,c)}}let aq=w("socket.io-client:socket"),ar=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class as extends q{constructor(a,b,c){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=a,this.nsp=b,c&&c.auth&&(this.auth=c.auth),this._opts=Object.assign({},c),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let a=this.io;this.subs=[ap(a,"open",this.onopen.bind(this)),ap(a,"packet",this.onpacket.bind(this)),ap(a,"error",this.onerror.bind(this)),ap(a,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...a){return a.unshift("message"),this.emit.apply(this,a),this}emit(a,...b){if(ar.hasOwnProperty(a))throw Error('"'+a.toString()+'" is a reserved event name');if(b.unshift(a),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(b),this;let c={type:f.EVENT,data:b};if(c.options={},c.options.compress=!1!==this.flags.compress,"function"==typeof b[b.length-1]){let a=this.ids++;aq("emitting packet with ack id %d",a);let d=b.pop();this._registerAckCallback(a,d),c.id=a}let d=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return!this.flags.volatile||d&&this.connected?this.connected?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c):aq("discard packet as the transport is not currently writable"),this.flags={},this}_registerAckCallback(a,b){var c;let d=null!=(c=this.flags.timeout)?c:this._opts.ackTimeout;if(void 0===d){this.acks[a]=b;return}let e=this.io.setTimeoutFn(()=>{delete this.acks[a];for(let b=0;b<this.sendBuffer.length;b++)this.sendBuffer[b].id===a&&(aq("removing packet with ack id %d from the buffer",a),this.sendBuffer.splice(b,1));aq("event with ack id %d has timed out after %d ms",a,d),b.call(this,Error("operation has timed out"))},d);this.acks[a]=(...a)=>{this.io.clearTimeoutFn(e),b.apply(this,[null,...a])}}emitWithAck(a,...b){let c=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((d,e)=>{b.push((a,b)=>c?a?e(a):d(b):d(a)),this.emit(a,...b)})}_addToQueue(a){let b;"function"==typeof a[a.length-1]&&(b=a.pop());let c={id:this._queueSeq++,tryCount:0,pending:!1,args:a,flags:Object.assign({fromQueue:!0},this.flags)};a.push((a,...d)=>{if(c===this._queue[0])return null!==a?c.tryCount>this._opts.retries&&(aq("packet [%d] is discarded after %d tries",c.id,c.tryCount),this._queue.shift(),b&&b(a)):(aq("packet [%d] was successfully sent",c.id),this._queue.shift(),b&&b(null,...d)),c.pending=!1,this._drainQueue()}),this._queue.push(c),this._drainQueue()}_drainQueue(a=!1){if(aq("draining queue"),!this.connected||0===this._queue.length)return;let b=this._queue[0];if(b.pending&&!a)return void aq("packet [%d] has already been sent and is waiting for an ack",b.id);b.pending=!0,b.tryCount++,aq("sending packet [%d] (try n\xb0%d)",b.id,b.tryCount),this.flags=b.flags,this.emit.apply(this,b.args)}packet(a){a.nsp=this.nsp,this.io._packet(a)}onopen(){aq("transport is open - connecting"),"function"==typeof this.auth?this.auth(a=>{this._sendConnectPacket(a)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(a){this.packet({type:f.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},a):a})}onerror(a){this.connected||this.emitReserved("connect_error",a)}onclose(a,b){aq("close (%s)",a),this.connected=!1,delete this.id,this.emitReserved("disconnect",a,b)}onpacket(a){if(a.nsp===this.nsp)switch(a.type){case f.CONNECT:a.data&&a.data.sid?this.onconnect(a.data.sid,a.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case f.EVENT:case f.BINARY_EVENT:this.onevent(a);break;case f.ACK:case f.BINARY_ACK:this.onack(a);break;case f.DISCONNECT:this.ondisconnect();break;case f.CONNECT_ERROR:this.destroy();let b=Error(a.data.message);b.data=a.data.data,this.emitReserved("connect_error",b)}}onevent(a){let b=a.data||[];aq("emitting event %j",b),null!=a.id&&(aq("attaching ack callback to event"),b.push(this.ack(a.id))),this.connected?this.emitEvent(b):this.receiveBuffer.push(Object.freeze(b))}emitEvent(a){if(this._anyListeners&&this._anyListeners.length)for(let b of this._anyListeners.slice())b.apply(this,a);super.emit.apply(this,a),this._pid&&a.length&&"string"==typeof a[a.length-1]&&(this._lastOffset=a[a.length-1])}ack(a){let b=this,c=!1;return function(...d){c||(c=!0,aq("sending ack %j",d),b.packet({type:f.ACK,id:a,data:d}))}}onack(a){let b=this.acks[a.id];"function"==typeof b?(aq("calling ack %s with %j",a.id,a.data),b.apply(this,a.data),delete this.acks[a.id]):aq("bad ack %s",a.id)}onconnect(a,b){aq("socket connected with id %s",a),this.id=a,this.recovered=b&&this._pid===b,this._pid=b,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(a=>this.emitEvent(a)),this.receiveBuffer=[],this.sendBuffer.forEach(a=>{this.notifyOutgoingListeners(a),this.packet(a)}),this.sendBuffer=[]}ondisconnect(){aq("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(a=>a()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(aq("performing disconnect (%s)",this.nsp),this.packet({type:f.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(a){return this.flags.compress=a,this}get volatile(){return this.flags.volatile=!0,this}timeout(a){return this.flags.timeout=a,this}onAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(a),this}prependAny(a){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(a),this}offAny(a){if(!this._anyListeners)return this;if(a){let b=this._anyListeners;for(let c=0;c<b.length;c++)if(a===b[c]){b.splice(c,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(a),this}prependAnyOutgoing(a){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(a),this}offAnyOutgoing(a){if(!this._anyOutgoingListeners)return this;if(a){let b=this._anyOutgoingListeners;for(let c=0;c<b.length;c++)if(a===b[c]){b.splice(c,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(a){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length)for(let b of this._anyOutgoingListeners.slice())b.apply(this,a.data)}}function at(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}at.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var b=Math.random(),c=Math.floor(b*this.jitter*a);a=(1&Math.floor(10*b))==0?a-c:a+c}return 0|Math.min(a,this.max)},at.prototype.reset=function(){this.attempts=0},at.prototype.setMin=function(a){this.ms=a},at.prototype.setMax=function(a){this.max=a},at.prototype.setJitter=function(a){this.jitter=a};let au=w("socket.io-client:manager");class av extends q{constructor(a,b){var c;super(),this.nsps={},this.subs=[],a&&"object"==typeof a&&(b=a,a=void 0),(b=b||{}).path=b.path||"/socket.io",this.opts=b,v(this,b),this.reconnection(!1!==b.reconnection),this.reconnectionAttempts(b.reconnectionAttempts||1/0),this.reconnectionDelay(b.reconnectionDelay||1e3),this.reconnectionDelayMax(b.reconnectionDelayMax||5e3),this.randomizationFactor(null!=(c=b.randomizationFactor)?c:.5),this.backoff=new at({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==b.timeout?2e4:b.timeout),this._readyState="closed",this.uri=a;let d=b.parser||g;this.encoder=new d.Encoder,this.decoder=new d.Decoder,this._autoConnect=!1!==b.autoConnect,this._autoConnect&&this.open()}reconnection(a){return arguments.length?(this._reconnection=!!a,this):this._reconnection}reconnectionAttempts(a){return void 0===a?this._reconnectionAttempts:(this._reconnectionAttempts=a,this)}reconnectionDelay(a){var b;return void 0===a?this._reconnectionDelay:(this._reconnectionDelay=a,null==(b=this.backoff)||b.setMin(a),this)}randomizationFactor(a){var b;return void 0===a?this._randomizationFactor:(this._randomizationFactor=a,null==(b=this.backoff)||b.setJitter(a),this)}reconnectionDelayMax(a){var b;return void 0===a?this._reconnectionDelayMax:(this._reconnectionDelayMax=a,null==(b=this.backoff)||b.setMax(a),this)}timeout(a){return arguments.length?(this._timeout=a,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(a){if(au("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;au("opening %s",this.uri),this.engine=new ab(this.uri,this.opts);let b=this.engine,c=this;this._readyState="opening",this.skipReconnect=!1;let d=ap(b,"open",function(){c.onopen(),a&&a()}),e=b=>{au("error"),this.cleanup(),this._readyState="closed",this.emitReserved("error",b),a?a(b):this.maybeReconnectOnOpen()},f=ap(b,"error",e);if(!1!==this._timeout){let a=this._timeout;au("connect attempt will timeout after %d",a);let c=this.setTimeoutFn(()=>{au("connect attempt timed out after %d",a),d(),e(Error("timeout")),b.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(d),this.subs.push(f),this}connect(a){return this.open(a)}onopen(){au("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");let a=this.engine;this.subs.push(ap(a,"ping",this.onping.bind(this)),ap(a,"data",this.ondata.bind(this)),ap(a,"error",this.onerror.bind(this)),ap(a,"close",this.onclose.bind(this)),ap(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(a){try{this.decoder.add(a)}catch(a){this.onclose("parse error",a)}}ondecoded(a){S(()=>{this.emitReserved("packet",a)},this.setTimeoutFn)}onerror(a){au("error",a),this.emitReserved("error",a)}socket(a,b){let c=this.nsps[a];return c?this._autoConnect&&!c.active&&c.connect():(c=new as(this,a,b),this.nsps[a]=c),c}_destroy(a){for(let a of Object.keys(this.nsps))if(this.nsps[a].active)return void au("socket %s is still active, skipping close",a);this._close()}_packet(a){au("writing packet %j",a);let b=this.encoder.encode(a);for(let c=0;c<b.length;c++)this.engine.write(b[c],a.options)}cleanup(){au("cleanup"),this.subs.forEach(a=>a()),this.subs.length=0,this.decoder.destroy()}_close(){au("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(a,b){au("closed due to %s",a),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",a,b),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let a=this;if(this.backoff.attempts>=this._reconnectionAttempts)au("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let b=this.backoff.duration();au("will wait %dms before reconnect attempt",b),this._reconnecting=!0;let c=this.setTimeoutFn(()=>{!a.skipReconnect&&(au("attempting reconnect"),this.emitReserved("reconnect_attempt",a.backoff.attempts),a.skipReconnect||a.open(b=>{b?(au("reconnect attempt error"),a._reconnecting=!1,a.reconnect(),this.emitReserved("reconnect_error",b)):(au("reconnect success"),a.onreconnect())}))},b);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}}onreconnect(){let a=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",a)}}let aw=w("socket.io-client"),ax={};function ay(a,b){let c;"object"==typeof a&&(b=a,a=void 0);let d=function(a,b="",c){let d=a;c=c||"undefined"!=typeof location&&location,null==a&&(a=c.protocol+"//"+c.host),"string"==typeof a&&("/"===a.charAt(0)&&(a="/"===a.charAt(1)?c.protocol+a:c.host+a),/^(https?|wss?):\/\//.test(a)||(ac("protocol-less url %s",a),a=void 0!==c?c.protocol+"//"+a:"https://"+a),ac("parse %s",a),d=_(a)),!d.port&&(/^(http|ws)$/.test(d.protocol)?d.port="80":/^(http|ws)s$/.test(d.protocol)&&(d.port="443")),d.path=d.path||"/";let e=-1!==d.host.indexOf(":")?"["+d.host+"]":d.host;return d.id=d.protocol+"://"+e+":"+d.port+b,d.href=d.protocol+"://"+e+(c&&c.port===d.port?"":":"+d.port),d}(a,(b=b||{}).path||"/socket.io"),e=d.source,f=d.id,g=d.path,h=ax[f]&&g in ax[f].nsps;return b.forceNew||b["force new connection"]||!1===b.multiplex||h?(aw("ignoring socket cache for %s",e),c=new av(e,b)):(ax[f]||(aw("new io instance for %s",e),ax[f]=new av(e,b)),c=ax[f]),d.query&&!b.query&&(b.query=d.queryKey),c.socket(d.path,b)}Object.assign(ay,{Manager:av,Socket:as,io:ay,connect:ay})},564100:(a,b,c)=>{"use strict";let{tokenChars:d}=c(580379);a.exports={parse:function(a){let b=new Set,c=-1,e=-1,f=0;for(;f<a.length;f++){let g=a.charCodeAt(f);if(-1===e&&1===d[g])-1===c&&(c=f);else if(0!==f&&(32===g||9===g))-1===e&&-1!==c&&(e=f);else if(44===g){if(-1===c)throw SyntaxError(`Unexpected character at index ${f}`);-1===e&&(e=f);let d=a.slice(c,e);if(b.has(d))throw SyntaxError(`The "${d}" subprotocol is duplicated`);b.add(d),c=e=-1}else throw SyntaxError(`Unexpected character at index ${f}`)}if(-1===c||-1!==e)throw SyntaxError("Unexpected end of input");let g=a.slice(c,f);if(b.has(g))throw SyntaxError(`The "${g}" subprotocol is duplicated`);return b.add(g),b}}},580379:(a,b,c)=>{"use strict";function d(a){let b=a.length,c=0;for(;c<b;)if((128&a[c])==0)c++;else if((224&a[c])==192){if(c+1===b||(192&a[c+1])!=128||(254&a[c])==192)return!1;c+=2}else if((240&a[c])==224){if(c+2>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||224===a[c]&&(224&a[c+1])==128||237===a[c]&&(224&a[c+1])==160)return!1;c+=3}else{if((248&a[c])!=240||c+3>=b||(192&a[c+1])!=128||(192&a[c+2])!=128||(192&a[c+3])!=128||240===a[c]&&(240&a[c+1])==128||244===a[c]&&a[c+1]>143||a[c]>244)return!1;c+=4}return!0}if(a.exports={isValidStatusCode:function(a){return a>=1e3&&a<=1014&&1004!==a&&1005!==a&&1006!==a||a>=3e3&&a<=4999},isValidUTF8:d,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},!process.env.WS_NO_UTF_8_VALIDATE)try{let b=c(801241);a.exports.isValidUTF8=function(a){return a.length<150?d(a):b(a)}}catch(a){}},607310:(a,b,c)=>{"use strict";let{kForOnEventAttribute:d,kListener:e}=c(715443),f=Symbol("kCode"),g=Symbol("kData"),h=Symbol("kError"),i=Symbol("kMessage"),j=Symbol("kReason"),k=Symbol("kTarget"),l=Symbol("kType"),m=Symbol("kWasClean");class n{constructor(a){this[k]=null,this[l]=a}get target(){return this[k]}get type(){return this[l]}}Object.defineProperty(n.prototype,"target",{enumerable:!0}),Object.defineProperty(n.prototype,"type",{enumerable:!0});class o extends n{constructor(a,b={}){super(a),this[f]=void 0===b.code?0:b.code,this[j]=void 0===b.reason?"":b.reason,this[m]=void 0!==b.wasClean&&b.wasClean}get code(){return this[f]}get reason(){return this[j]}get wasClean(){return this[m]}}Object.defineProperty(o.prototype,"code",{enumerable:!0}),Object.defineProperty(o.prototype,"reason",{enumerable:!0}),Object.defineProperty(o.prototype,"wasClean",{enumerable:!0});class p extends n{constructor(a,b={}){super(a),this[h]=void 0===b.error?null:b.error,this[i]=void 0===b.message?"":b.message}get error(){return this[h]}get message(){return this[i]}}Object.defineProperty(p.prototype,"error",{enumerable:!0}),Object.defineProperty(p.prototype,"message",{enumerable:!0});class q extends n{constructor(a,b={}){super(a),this[g]=void 0===b.data?null:b.data}get data(){return this[g]}}function r(a,b,c){"object"==typeof a&&a.handleEvent?a.handleEvent.call(a,c):a.call(b,c)}Object.defineProperty(q.prototype,"data",{enumerable:!0}),a.exports={CloseEvent:o,ErrorEvent:p,Event:n,EventTarget:{addEventListener(a,b,c={}){let f;for(let f of this.listeners(a))if(!c[d]&&f[e]===b&&!f[d])return;if("message"===a)f=function(a,c){let d=new q("message",{data:c?a:a.toString()});d[k]=this,r(b,this,d)};else if("close"===a)f=function(a,c){let d=new o("close",{code:a,reason:c.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});d[k]=this,r(b,this,d)};else if("error"===a)f=function(a){let c=new p("error",{error:a,message:a.message});c[k]=this,r(b,this,c)};else{if("open"!==a)return;f=function(){let a=new n("open");a[k]=this,r(b,this,a)}}f[d]=!!c[d],f[e]=b,c.once?this.once(a,f):this.on(a,f)},removeEventListener(a,b){for(let c of this.listeners(a))if(c[e]===b&&!c[d]){this.removeListener(a,c);break}}},MessageEvent:q}},671322:a=>{"use strict";let b=Symbol("kDone"),c=Symbol("kRun");class d{constructor(a){this[b]=()=>{this.pending--,this[c]()},this.concurrency=a||1/0,this.jobs=[],this.pending=0}add(a){this.jobs.push(a),this[c]()}[c](){if(this.pending!==this.concurrency&&this.jobs.length){let a=this.jobs.shift();this.pending++,a(this[b])}}}a.exports=d},715443:a=>{"use strict";a.exports={BINARY_TYPES:["nodebuffer","arraybuffer","fragments"],EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}},772088:()=>{},801241:()=>{},820801:(a,b,c)=>{"use strict";let d=c(594735),e=c(781630);c(55591),c(491645),c(134631);let{createHash:f}=c(455511),g=c(151243),h=c(134960),i=c(564100),j=c(299881),{GUID:k,kWebSocket:l}=c(715443),m=/^[+/0-9A-Za-z]{22}==$/;class n extends d{constructor(a,b){if(super(),null==(a={maxPayload:0x6400000,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:j,...a}).port&&!a.server&&!a.noServer||null!=a.port&&(a.server||a.noServer)||a.server&&a.noServer)throw TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=a.port?(this._server=e.createServer((a,b)=>{let c=e.STATUS_CODES[426];b.writeHead(426,{"Content-Length":c.length,"Content-Type":"text/plain"}),b.end(c)}),this._server.listen(a.port,a.host,a.backlog,b)):a.server&&(this._server=a.server),this._server){let a=this.emit.bind(this,"connection");this._removeListeners=function(a,b){for(let c of Object.keys(b))a.on(c,b[c]);return function(){for(let c of Object.keys(b))a.removeListener(c,b[c])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(b,c,d)=>{this.handleUpgrade(b,c,d,a)}})}!0===a.perMessageDeflate&&(a.perMessageDeflate={}),a.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=a,this._state=0}address(){if(this.options.noServer)throw Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(a){if(2===this._state){a&&this.once("close",()=>{a(Error("The server is not running"))}),process.nextTick(o,this);return}if(a&&this.once("close",a),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(o,this);else{let a=this._server;this._removeListeners(),this._removeListeners=this._server=null,a.close(()=>{o(this)})}}shouldHandle(a){if(this.options.path){let b=a.url.indexOf("?");if((-1!==b?a.url.slice(0,b):a.url)!==this.options.path)return!1}return!0}handleUpgrade(a,b,c,d){b.on("error",p);let e=a.headers["sec-websocket-key"],f=+a.headers["sec-websocket-version"];if("GET"!==a.method)return void r(this,a,b,405,"Invalid HTTP method");if("websocket"!==a.headers.upgrade.toLowerCase())return void r(this,a,b,400,"Invalid Upgrade header");if(!e||!m.test(e))return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Key header");if(8!==f&&13!==f)return void r(this,a,b,400,"Missing or invalid Sec-WebSocket-Version header");if(!this.shouldHandle(a))return void q(b,400);let j=a.headers["sec-websocket-protocol"],k=new Set;if(void 0!==j)try{k=i.parse(j)}catch(c){r(this,a,b,400,"Invalid Sec-WebSocket-Protocol header");return}let l=a.headers["sec-websocket-extensions"],n={};if(this.options.perMessageDeflate&&void 0!==l){let c=new h(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let a=g.parse(l);a[h.extensionName]&&(c.accept(a[h.extensionName]),n[h.extensionName]=c)}catch(c){r(this,a,b,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let g={origin:a.headers[`${8===f?"sec-websocket-origin":"origin"}`],secure:!!(a.socket.authorized||a.socket.encrypted),req:a};if(2===this.options.verifyClient.length)return void this.options.verifyClient(g,(f,g,h,i)=>{if(!f)return q(b,g||401,h,i);this.completeUpgrade(n,e,k,a,b,c,d)});if(!this.options.verifyClient(g))return q(b,401)}this.completeUpgrade(n,e,k,a,b,c,d)}completeUpgrade(a,b,c,d,e,i,j){if(!e.readable||!e.writable)return e.destroy();if(e[l])throw Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return q(e,503);let m=f("sha1").update(b+k).digest("base64"),n=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${m}`],r=new this.options.WebSocket(null);if(c.size){let a=this.options.handleProtocols?this.options.handleProtocols(c,d):c.values().next().value;a&&(n.push(`Sec-WebSocket-Protocol: ${a}`),r._protocol=a)}if(a[h.extensionName]){let b=a[h.extensionName].params,c=g.format({[h.extensionName]:[b]});n.push(`Sec-WebSocket-Extensions: ${c}`),r._extensions=a}this.emit("headers",n,d),e.write(n.concat("\r\n").join("\r\n")),e.removeListener("error",p),r.setSocket(e,i,{maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(r),r.on("close",()=>{this.clients.delete(r),this._shouldEmitClose&&!this.clients.size&&process.nextTick(o,this)})),j(r,d)}}function o(a){a._state=2,a.emit("close")}function p(){this.destroy()}function q(a,b,c,d){c=c||e.STATUS_CODES[b],d={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(c),...d},a.once("finish",a.destroy),a.end(`HTTP/1.1 ${b} ${e.STATUS_CODES[b]}\r
`+Object.keys(d).map(a=>`${a}: ${d[a]}`).join("\r\n")+"\r\n\r\n"+c)}function r(a,b,c,d,e){if(a.listenerCount("wsClientError")){let d=Error(e);Error.captureStackTrace(d,r),a.emit("wsClientError",d,c,b)}else q(c,d,e)}a.exports=n},829103:(a,b,c)=>{"use strict";let{Duplex:d}=c(927910);function e(a){a.emit("close")}function f(){!this.destroyed&&this._writableState.finished&&this.destroy()}function g(a){this.removeListener("error",g),this.destroy(),0===this.listenerCount("error")&&this.emit("error",a)}a.exports=function(a,b){let c=!0,h=new d({...b,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return a.on("message",function(b,c){let d=!c&&h._readableState.objectMode?b.toString():b;h.push(d)||a.pause()}),a.once("error",function(a){h.destroyed||(c=!1,h.destroy(a))}),a.once("close",function(){h.destroyed||h.push(null)}),h._destroy=function(b,d){if(a.readyState===a.CLOSED){d(b),process.nextTick(e,h);return}let f=!1;a.once("error",function(a){f=!0,d(a)}),a.once("close",function(){f||d(b),process.nextTick(e,h)}),c&&a.terminate()},h._final=function(b){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._final(b)});null!==a._socket&&(a._socket._writableState.finished?(b(),h._readableState.endEmitted&&h.destroy()):(a._socket.once("finish",function(){b()}),a.close()))},h._read=function(){a.isPaused&&a.resume()},h._write=function(b,c,d){if(a.readyState===a.CONNECTING)return void a.once("open",function(){h._write(b,c,d)});a.send(b,d)},h.on("end",f),h.on("error",g),h}},871783:(a,b,c)=>{"use strict";let{EMPTY_BUFFER:d}=c(715443);function e(a,b,c,d,e){for(let f=0;f<e;f++)c[d+f]=a[f]^b[3&f]}function f(a,b){for(let c=0;c<a.length;c++)a[c]^=b[3&c]}function g(a){let b;return(g.readOnly=!0,Buffer.isBuffer(a))?a:(a instanceof ArrayBuffer?b=Buffer.from(a):ArrayBuffer.isView(a)?b=Buffer.from(a.buffer,a.byteOffset,a.byteLength):(b=Buffer.from(a),g.readOnly=!1),b)}if(a.exports={concat:function(a,b){if(0===a.length)return d;if(1===a.length)return a[0];let c=Buffer.allocUnsafe(b),e=0;for(let b=0;b<a.length;b++){let d=a[b];c.set(d,e),e+=d.length}return e<b?c.slice(0,e):c},mask:e,toArrayBuffer:function(a){return a.byteLength===a.buffer.byteLength?a.buffer:a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)},toBuffer:g,unmask:f},!process.env.WS_NO_BUFFER_UTIL)try{let b=c(772088);a.exports.mask=function(a,c,d,f,g){g<48?e(a,c,d,f,g):b.mask(a,c,d,f,g)},a.exports.unmask=function(a,c){a.length<32?f(a,c):b.unmask(a,c)}}catch(a){}},889621:(a,b,c)=>{"use strict";let{Writable:d}=c(927910),e=c(134960),{BINARY_TYPES:f,EMPTY_BUFFER:g,kStatusCode:h,kWebSocket:i}=c(715443),{concat:j,toArrayBuffer:k,unmask:l}=c(871783),{isValidStatusCode:m,isValidUTF8:n}=c(580379);class o extends d{constructor(a={}){super(),this._binaryType=a.binaryType||f[0],this._extensions=a.extensions||{},this._isServer=!!a.isServer,this._maxPayload=0|a.maxPayload,this._skipUTF8Validation=!!a.skipUTF8Validation,this[i]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._state=0,this._loop=!1}_write(a,b,c){if(8===this._opcode&&0==this._state)return c();this._bufferedBytes+=a.length,this._buffers.push(a),this.startLoop(c)}consume(a){if(this._bufferedBytes-=a,a===this._buffers[0].length)return this._buffers.shift();if(a<this._buffers[0].length){let b=this._buffers[0];return this._buffers[0]=b.slice(a),b.slice(0,a)}let b=Buffer.allocUnsafe(a);do{let c=this._buffers[0],d=b.length-a;a>=c.length?b.set(this._buffers.shift(),d):(b.set(new Uint8Array(c.buffer,c.byteOffset,a),d),this._buffers[0]=c.slice(a)),a-=c.length}while(a>0);return b}startLoop(a){let b;this._loop=!0;do switch(this._state){case 0:b=this.getInfo();break;case 1:b=this.getPayloadLength16();break;case 2:b=this.getPayloadLength64();break;case 3:this.getMask();break;case 4:b=this.getData(a);break;default:this._loop=!1;return}while(this._loop);a(b)}getInfo(){if(this._bufferedBytes<2){this._loop=!1;return}let a=this.consume(2);if((48&a[0])!=0)return this._loop=!1,p(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");let b=(64&a[0])==64;if(b&&!this._extensions[e.extensionName])return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._fin=(128&a[0])==128,this._opcode=15&a[0],this._payloadLength=127&a[1],0===this._opcode){if(b)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(!this._fragmented)return this._loop=!1,p(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented)return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");this._compressed=b}else{if(!(this._opcode>7)||!(this._opcode<11))return this._loop=!1,p(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");if(!this._fin)return this._loop=!1,p(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");if(b)return this._loop=!1,p(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");if(this._payloadLength>125)return this._loop=!1,p(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH")}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=(128&a[1])==128,this._isServer){if(!this._masked)return this._loop=!1,p(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK")}else if(this._masked)return this._loop=!1,p(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");if(126===this._payloadLength)this._state=1;else{if(127!==this._payloadLength)return this.haveLength();this._state=2}}getPayloadLength16(){if(this._bufferedBytes<2){this._loop=!1;return}return this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength()}getPayloadLength64(){if(this._bufferedBytes<8){this._loop=!1;return}let a=this.consume(8),b=a.readUInt32BE(0);return b>2097151?(this._loop=!1,p(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH")):(this._payloadLength=0x100000000*b+a.readUInt32BE(4),this.haveLength())}haveLength(){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0))return this._loop=!1,p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");this._masked?this._state=3:this._state=4}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=4}getData(a){let b=g;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}b=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!=0&&l(b,this._mask)}if(this._opcode>7)return this.controlMessage(b);if(this._compressed){this._state=5,this.decompress(b,a);return}return b.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(b)),this.dataMessage()}decompress(a,b){this._extensions[e.extensionName].decompress(a,this._fin,(a,c)=>{if(a)return b(a);if(c.length){if(this._messageLength+=c.length,this._messageLength>this._maxPayload&&this._maxPayload>0)return b(p(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"));this._fragments.push(c)}let d=this.dataMessage();if(d)return b(d);this.startLoop(b)})}dataMessage(){if(this._fin){let a=this._messageLength,b=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let c;c="nodebuffer"===this._binaryType?j(b,a):"arraybuffer"===this._binaryType?k(j(b,a)):b,this.emit("message",c,!0)}else{let c=j(b,a);if(!this._skipUTF8Validation&&!n(c))return this._loop=!1,p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("message",c,!1)}}this._state=0}controlMessage(a){if(8===this._opcode)if(this._loop=!1,0===a.length)this.emit("conclude",1005,g),this.end();else{if(1===a.length)return p(RangeError,"invalid payload length 1",!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");let b=a.readUInt16BE(0);if(!m(b))return p(RangeError,`invalid status code ${b}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");let c=a.slice(2);if(!this._skipUTF8Validation&&!n(c))return p(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");this.emit("conclude",b,c),this.end()}else 9===this._opcode?this.emit("ping",a):this.emit("pong",a);this._state=0}}function p(a,b,c,d,e){let f=new a(c?`Invalid WebSocket frame: ${b}`:b);return Error.captureStackTrace(f,p),f.code=e,f[h]=d,f}a.exports=o},933365:(a,b,c)=>{"use strict";c(491645),c(134631);let{randomFillSync:d}=c(455511),e=c(134960),{EMPTY_BUFFER:f}=c(715443),{isValidStatusCode:g}=c(580379),{mask:h,toBuffer:i}=c(871783),j=Symbol("kByteLength"),k=Buffer.alloc(4);class l{constructor(a,b,c){this._extensions=b||{},c&&(this._generateMask=c,this._maskBuffer=Buffer.alloc(4)),this._socket=a,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._deflating=!1,this._queue=[]}static frame(a,b){let c,e,f=!1,g=2,i=!1;b.mask&&(c=b.maskBuffer||k,b.generateMask?b.generateMask(c):d(c,0,4),i=(c[0]|c[1]|c[2]|c[3])==0,g=6),"string"==typeof a?e=(!b.mask||i)&&void 0!==b[j]?b[j]:(a=Buffer.from(a)).length:(e=a.length,f=b.mask&&b.readOnly&&!i);let l=e;e>=65536?(g+=8,l=127):e>125&&(g+=2,l=126);let m=Buffer.allocUnsafe(f?e+g:g);return(m[0]=b.fin?128|b.opcode:b.opcode,b.rsv1&&(m[0]|=64),m[1]=l,126===l?m.writeUInt16BE(e,2):127===l&&(m[2]=m[3]=0,m.writeUIntBE(e,4,6)),b.mask)?(m[1]|=128,m[g-4]=c[0],m[g-3]=c[1],m[g-2]=c[2],m[g-1]=c[3],i)?[m,a]:f?(h(a,c,m,g,e),[m]):(h(a,c,a,0,e),[m,a]):[m,a]}close(a,b,c,d){let e;if(void 0===a)e=f;else if("number"==typeof a&&g(a))if(void 0!==b&&b.length){let c=Buffer.byteLength(b);if(c>123)throw RangeError("The message must not be greater than 123 bytes");(e=Buffer.allocUnsafe(2+c)).writeUInt16BE(a,0),"string"==typeof b?e.write(b,2):e.set(b,2)}else(e=Buffer.allocUnsafe(2)).writeUInt16BE(a,0);else throw TypeError("First argument must be a valid error code number");let h={[j]:e.length,fin:!0,generateMask:this._generateMask,mask:c,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._deflating?this.enqueue([this.dispatch,e,!1,h,d]):this.sendFrame(l.frame(e,h),d)}ping(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):(d=(a=i(a)).length,e=i.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[j]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:9,readOnly:e,rsv1:!1};this._deflating?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(l.frame(a,f),c)}pong(a,b,c){let d,e;if("string"==typeof a?(d=Buffer.byteLength(a),e=!1):(d=(a=i(a)).length,e=i.readOnly),d>125)throw RangeError("The data size must not be greater than 125 bytes");let f={[j]:d,fin:!0,generateMask:this._generateMask,mask:b,maskBuffer:this._maskBuffer,opcode:10,readOnly:e,rsv1:!1};this._deflating?this.enqueue([this.dispatch,a,!1,f,c]):this.sendFrame(l.frame(a,f),c)}send(a,b,c){let d,f,g=this._extensions[e.extensionName],h=b.binary?2:1,k=b.compress;if("string"==typeof a?(d=Buffer.byteLength(a),f=!1):(d=(a=i(a)).length,f=i.readOnly),this._firstFragment?(this._firstFragment=!1,k&&g&&g.params[g._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(k=d>=g._threshold),this._compress=k):(k=!1,h=0),b.fin&&(this._firstFragment=!0),g){let e={[j]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:f,rsv1:k};this._deflating?this.enqueue([this.dispatch,a,this._compress,e,c]):this.dispatch(a,this._compress,e,c)}else this.sendFrame(l.frame(a,{[j]:d,fin:b.fin,generateMask:this._generateMask,mask:b.mask,maskBuffer:this._maskBuffer,opcode:h,readOnly:f,rsv1:!1}),c)}dispatch(a,b,c,d){if(!b)return void this.sendFrame(l.frame(a,c),d);let f=this._extensions[e.extensionName];this._bufferedBytes+=c[j],this._deflating=!0,f.compress(a,c.fin,(a,b)=>{if(this._socket.destroyed){let a=Error("The socket was closed while data was being compressed");"function"==typeof d&&d(a);for(let b=0;b<this._queue.length;b++){let c=this._queue[b],d=c[c.length-1];"function"==typeof d&&d(a)}return}this._bufferedBytes-=c[j],this._deflating=!1,c.readOnly=!1,this.sendFrame(l.frame(b,c),d),this.dequeue()})}dequeue(){for(;!this._deflating&&this._queue.length;){let a=this._queue.shift();this._bufferedBytes-=a[3][j],Reflect.apply(a[0],this,a.slice(1))}}enqueue(a){this._bufferedBytes+=a[3][j],this._queue.push(a)}sendFrame(a,b){2===a.length?(this._socket.cork(),this._socket.write(a[0]),this._socket.write(a[1],b),this._socket.uncork()):this._socket.write(a[0],b)}}a.exports=l}};