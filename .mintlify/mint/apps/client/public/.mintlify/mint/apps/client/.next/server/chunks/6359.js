"use strict";exports.id=6359,exports.ids=[6359],exports.modules={60666:(a,b,c)=>{function d(a,b){return new Promise(function(c,d){var e=setTimeout(function(){d(Error("Promise timed out"))},b);a.then(function(a){return clearTimeout(e),c(a)}).catch(d)})}function e(a,b,c){var e=function(){try{return Promise.resolve(b(a))}catch(a){return Promise.reject(a)}};return new Promise(function(a){return setTimeout(a,c)}).then(function(){return d(e(),1e3)}).catch(function(b){null==a||a.log("warn","Callback Error",{error:b}),null==a||a.stats.increment("callback_error")}).then(function(){return a})}c.d(b,{s2:()=>d,w_:()=>e})},87109:(a,b,c)=>{c.d(b,{D:()=>h});var d=c(508524),e=c(230313),f=c(3265),g=c(17188),h=function(){function a(a,b,c){this.name=a,this.version=b,this.actions=c,this.type="destination",this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track")}return a.prototype.isLoaded=function(){return!0},a.prototype.load=function(){return console.debug("loaded destination plugin: ".concat(this.name," v").concat(this.version)),Promise.resolve()},a.prototype.addMiddleware=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];(a=this.middleware).push.apply(a,b)},a.prototype.transform=function(a){return(0,d.sH)(this,void 0,void 0,function(){var b;return(0,d.YH)(this,function(c){switch(c.label){case 0:return[4,(0,g.applyDestinationMiddleware)(this.name,a.event,this.middleware)];case 1:return null==(b=c.sent())&&a.cancel(new e.d({retry:!1,reason:"dropped by destination middleware"})),[2,new f.o(b)]}})})},a.prototype._createMethod=function(a){var b=this;return function(c){return(0,d.sH)(b,void 0,void 0,function(){var b;return(0,d.YH)(this,function(d){switch(d.label){case 0:if(!this.actions[a])return[2,c];return[4,this.transform(c)];case 1:return b=d.sent(),[4,this.actions[a](b)];case 2:return d.sent(),[2,c]}})})}},a}()},598297:(a,b,c)=>{c.d(b,{p:()=>d});function d(a){try{return decodeURIComponent(a.replace(/\+/g," "))}catch(b){return a}}},856359:(a,b,c)=>{c.r(b),c.d(b,{Analytics:()=>bm,AnalyticsNode:()=>bU,Context:()=>t.o,ContextCancelation:()=>t.d,Destination:()=>bV.D,EventFactory:()=>H,Group:()=>a4,HtEventsBrowser:()=>bS,UniversalStorage:()=>R,User:()=>a2,getGlobalAnalytics:()=>a7.kJ,loadLegacySettings:()=>bP});var d,e,f,g,h,i,j,k,l,m=c(508524),n=c(189287);function o(a,b,c,d){var e,f=[a,b,c,d],g=(0,n.Qd)(a)?a.event:a;if(!g||!(0,n.Kg)(g))throw Error("Event missing");var h=(0,n.Qd)(a)?null!=(e=a.properties)?e:{}:(0,n.Qd)(b)?b:{},i={};return(0,n.Tn)(c)||(i=null!=c?c:{}),(0,n.Qd)(a)&&!(0,n.Tn)(b)&&(i=null!=b?b:{}),[g,h,i,f.find(n.Tn)]}function p(a,b,c,d,e){var f,g,h=null,i=null,j=[a,b,c,d,e],k=j.filter(n.Kg);void 0!==k[0]&&void 0!==k[1]&&(h=k[0],i=k[1]),1===k.length&&(h=null,i=k[0]);var l=j.find(n.Tn),m=j.filter(function(a){return null===i?(0,n.Qd)(a):(0,n.Qd)(a)||null===a}),o=null!=(f=m[0])?f:{},p=null!=(g=m[1])?g:{};return[h,i,o,p,l]}var q=function(a){return function(){for(var b,c,d,e=[],f=0;f<arguments.length;f++)e[f]=arguments[f];for(var g={},h=["callback","options","traits","id"],i=0;i<e.length;i++){var j=e[i],k=h.pop();if("id"===k){if((0,n.Kg)(j)||(0,n.Et)(j)){g.id=j.toString();continue}if(null==j)continue;k=h.pop()}if(("traits"===k||"options"===k)&&(null==j||(0,n.Qd)(j))&&(g[k]=j),(0,n.Tn)(j)){g.callback=j;break}}return[null!=(b=g.id)?b:a.id(),null!=(c=g.traits)?c:{},null!=(d=g.options)?d:{},g.callback]}};function r(a,b,c,d){(0,n.Et)(a)&&(a=a.toString()),(0,n.Et)(b)&&(b=b.toString());var e=[a,b,c,d],f=e.filter(n.Kg),g=f[0],h=void 0===g?a:g,i=f[1],j=e.filter(n.Qd)[0];return[h,void 0===i?null:i,void 0===j?{}:j,e.find(n.Tn)]}var s=c(909035),t=c(3265),u=c(60666),v=c(223345),w=c(107090),x=c(212418),y=c(554184),z=c.n(y),A=function(a,b,c,d,e,f){return{__t:"bpc",c:b,p:d,u:a,s:c,t:e,r:f}},B=Object.keys(A("","","","","","")),C=function(a){var b=a.indexOf("#");return -1===b?a:a.slice(0,b)},D=function(a){try{return new URL(a).pathname}catch(b){return"/"===a[0]?a:"/"+a}},E=function(a){var b=a.c,c=a.p,d=a.s,e=a.u,f=a.r,g=a.t,h=b?D(b):c,i=b?b.indexOf("?")>-1?b:b+d:C(e);return{path:h,referrer:f,search:d,title:g,url:i}},F=function(){var a=document.querySelector("link[rel='canonical']");return A(location.href,a&&a.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},G=function(a,b){void 0===b&&(b=E(F()));var c,d,e,f=a.context;"page"===a.type&&(e=a.properties&&(c=a.properties,d=Object.keys(b),Object.assign.apply(Object,(0,m.fX)([{}],d.map(function(a){var b;if(c&&Object.prototype.hasOwnProperty.call(c,a))return(b={})[a]=c[a],b}),!1))),a.properties=(0,m.Cl)((0,m.Cl)((0,m.Cl)({},b),a.properties),a.name?{name:a.name}:{})),f.page=(0,m.Cl)((0,m.Cl)((0,m.Cl)({},b),e),f.page)},H=function(){function a(a){this.user=a}return a.prototype.track=function(a,b,c,d,e){return this.normalize((0,m.Cl)((0,m.Cl)({},this.baseEvent()),{event:a,type:"track",properties:b,options:(0,m.Cl)({},c),integrations:(0,m.Cl)({},d)}),e)},a.prototype.page=function(a,b,c,d,e,f){var g,h={type:"page",properties:(0,m.Cl)({},c),options:(0,m.Cl)({},d),integrations:(0,m.Cl)({},e)};return null!==a&&(h.category=a,h.properties=null!=(g=h.properties)?g:{},h.properties.category=a),null!==b&&(h.name=b),this.normalize((0,m.Cl)((0,m.Cl)({},this.baseEvent()),h),f)},a.prototype.screen=function(a,b,c,d,e,f){var g={type:"screen",properties:(0,m.Cl)({},c),options:(0,m.Cl)({},d),integrations:(0,m.Cl)({},e)};return null!==a&&(g.category=a),null!==b&&(g.name=b),this.normalize((0,m.Cl)((0,m.Cl)({},this.baseEvent()),g),f)},a.prototype.identify=function(a,b,c,d,e){return this.normalize((0,m.Cl)((0,m.Cl)({},this.baseEvent()),{type:"identify",userId:a,traits:b,options:(0,m.Cl)({},c),integrations:(0,m.Cl)({},d)}),e)},a.prototype.group=function(a,b,c,d,e){return this.normalize((0,m.Cl)((0,m.Cl)({},this.baseEvent()),{type:"group",traits:b,options:(0,m.Cl)({},c),integrations:(0,m.Cl)({},d),groupId:a}),e)},a.prototype.alias=function(a,b,c,d,e){var f={userId:a,type:"alias",options:(0,m.Cl)({},c),integrations:(0,m.Cl)({},d)};return(null!==b&&(f.previousId=b),void 0===a)?this.normalize((0,m.Cl)((0,m.Cl)({},f),this.baseEvent())):this.normalize((0,m.Cl)((0,m.Cl)({},this.baseEvent()),f),e)},a.prototype.baseEvent=function(){var a={integrations:{},options:{}},b=this.user;return b.id()&&(a.userId=b.id()),b.anonymousId()&&(a.anonymousId=b.anonymousId()),a},a.prototype.context=function(a){var b,c,d,e=["integrations","anonymousId","timestamp","userId"],f=null!=(b=a.options)?b:{};delete f.integrations;var g=Object.keys(f),h=null!=(d=null==(c=a.options)?void 0:c.context)?d:{},i={};return g.forEach(function(a){"context"!==a&&(e.includes(a)?(0,x.J)(i,a,f[a]):(0,x.J)(h,a,f[a]))}),[h,i]},a.prototype.normalize=function(a,b){(null==(c=a.options)?void 0:c.anonymousId)&&this.user.anonymousId(a.options.anonymousId);var c,d,e,f=Object.keys(null!=(d=a.integrations)?d:{}).reduce(function(b,c){var d,e;return(0,m.Cl)((0,m.Cl)({},b),((d={})[c]=!!(null==(e=a.integrations)?void 0:e[c]),d))},{}),g=(0,m.Cl)((0,m.Cl)({},f),null==(e=a.options)?void 0:e.integrations),h=this.context(a),i=h[0],j=h[1];a.options;var k=(0,m.Tt)(a,["options"]),l=(0,m.Cl)((0,m.Cl)((0,m.Cl)((0,m.Cl)({timestamp:new Date},k),{context:i,integrations:g}),j),{messageId:z().hash(JSON.stringify(a)+(0,w.v4)())});G(l,b);var n=this.user.getAndUpdateSession();return null!=n&&(l.context=(0,m.Cl)((0,m.Cl)({},l.context),n)),l},a}(),I=c(666590),J=c(845411),K=c(230313),L=function(){var a,b,c=0;return{done:function(){return a},run:function(d){var e=d();return"object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then&&(1==++c&&(a=new Promise(function(a){return b=a})),e.finally(function(){return 0==--c&&b()})),e}}},M=c(477294),N=function(a){function b(b){return a.call(this,"string"==typeof b?new I.x(4,b):b)||this}return(0,m.C6)(b,a),b.prototype.flush=function(){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(b){return(0,s.a)()?[2,[]]:[2,a.prototype.flush.call(this)]})})},b}(function(a){function b(b){var c=a.call(this)||this;return c.criticalTasks=L(),c.plugins=[],c.failedInitializations=[],c.flushing=!1,c.queue=b,c.queue.on(J.g,function(){c.scheduleFlush(0)}),c}return(0,m.C6)(b,a),b.prototype.register=function(a,b,c){return(0,m.sH)(this,void 0,void 0,function(){var d=this;return(0,m.YH)(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(b.load(a,c)).then(function(){d.plugins.push(b)}).catch(function(c){if("destination"===b.type){d.failedInitializations.push(b.name),console.warn(b.name,c),a.log("warn","Failed to load destination",{plugin:b.name,error:c});return}throw c})];case 1:return e.sent(),[2]}})})},b.prototype.deregister=function(a,b,c){return(0,m.sH)(this,void 0,void 0,function(){var d;return(0,m.YH)(this,function(e){switch(e.label){case 0:if(e.trys.push([0,3,,4]),!b.unload)return[3,2];return[4,Promise.resolve(b.unload(a,c))];case 1:e.sent(),e.label=2;case 2:return this.plugins=this.plugins.filter(function(a){return a.name!==b.name}),[3,4];case 3:return d=e.sent(),a.log("warn","Failed to unload destination",{plugin:b.name,error:d}),[3,4];case 4:return[2]}})})},b.prototype.dispatch=function(a){return(0,m.sH)(this,void 0,void 0,function(){var b;return(0,m.YH)(this,function(c){return a.log("debug","Dispatching"),a.stats.increment("message_dispatched"),this.queue.push(a),b=this.subscribeToDelivery(a),this.scheduleFlush(0),[2,b]})})},b.prototype.subscribeToDelivery=function(a){return(0,m.sH)(this,void 0,void 0,function(){var b=this;return(0,m.YH)(this,function(c){return[2,new Promise(function(c){var d=function(e,f){e.isSame(a)&&(b.off("flush",d),c(e))};b.on("flush",d)})]})})},b.prototype.dispatchSingle=function(a){return(0,m.sH)(this,void 0,void 0,function(){var b=this;return(0,m.YH)(this,function(c){return a.log("debug","Dispatching"),a.stats.increment("message_dispatched"),this.queue.updateAttempts(a),a.attempts=1,[2,this.deliver(a).catch(function(c){return b.enqueuRetry(c,a)?b.subscribeToDelivery(a):(a.setFailedDelivery({reason:c}),a)})]})})},b.prototype.isEmpty=function(){return 0===this.queue.length},b.prototype.scheduleFlush=function(a){var b=this;void 0===a&&(a=500),this.flushing||(this.flushing=!0,setTimeout(function(){b.flush().then(function(){setTimeout(function(){b.flushing=!1,b.queue.length&&b.scheduleFlush(0)},0)})},a))},b.prototype.deliver=function(a){return(0,m.sH)(this,void 0,void 0,function(){var b,c,d,e;return(0,m.YH)(this,function(f){switch(f.label){case 0:return[4,this.criticalTasks.done()];case 1:f.sent(),b=Date.now(),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,this.flushOne(a)];case 3:return a=f.sent(),c=Date.now()-b,this.emit("delivery_success",a),a.stats.gauge("delivered",c),a.log("debug","Delivered",a.event),[2,a];case 4:throw e=d=f.sent(),a.log("error","Failed to deliver",e),this.emit("delivery_failure",a,e),a.stats.increment("delivery_failed"),d;case 5:return[2]}})})},b.prototype.enqueuRetry=function(a,b){return!!(!(a instanceof K.d)||a.retry)&&this.queue.pushWithBackoff(b)},b.prototype.flush=function(){return(0,m.sH)(this,void 0,void 0,function(){var a,b;return(0,m.YH)(this,function(c){switch(c.label){case 0:if(0===this.queue.length||!(a=this.queue.pop()))return[2,[]];a.attempts=this.queue.getAttempts(a),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,this.deliver(a)];case 2:return a=c.sent(),this.emit("flush",a,!0),[3,4];case 3:return b=c.sent(),this.enqueuRetry(b,a)||(a.setFailedDelivery({reason:b}),this.emit("flush",a,!1)),[2,[]];case 4:return[2,[a]]}})})},b.prototype.isReady=function(){return!0},b.prototype.availableExtensions=function(a){var b,c,d=(b="type",c={},this.plugins.filter(function(b){if("destination"!==b.type&&"Hightouch.io"!==b.name)return!0;var c,d,e,f=void 0;return null==(c=b.alternativeNames)||c.forEach(function(b){void 0!==a[b]&&(f=a[b])}),null!=(e=null!=(d=a[b.name])?d:f)?e:!1!==("Hightouch.io"===b.name||a.All)}).forEach(function(a){var d,e=void 0;if("string"==typeof b){var f=a[b];e="string"!=typeof f?JSON.stringify(f):f}else b instanceof Function&&(e=b(a));void 0!==e&&(c[e]=(0,m.fX)((0,m.fX)([],null!=(d=c[e])?d:[],!0),[a],!1))}),c),e=d.before,f=d.enrichment,g=d.destination,h=d.after;return{before:void 0===e?[]:e,enrichment:void 0===f?[]:f,destinations:void 0===g?[]:g,after:void 0===h?[]:h}},b.prototype.flushOne=function(a){var b,c;return(0,m.sH)(this,void 0,void 0,function(){var d,e,f,g,h,i,j,k,l,n,o,p,q;return(0,m.YH)(this,function(m){switch(m.label){case 0:if(!this.isReady())throw Error("Not ready");a.attempts>1&&this.emit("delivery_retry",a),e=(d=this.availableExtensions(null!=(b=a.event.integrations)?b:{})).before,f=d.enrichment,g=0,h=e,m.label=1;case 1:if(!(g<h.length))return[3,4];return i=h[g],[4,(0,M.D)(a,i)];case 2:(j=m.sent())instanceof K.j&&(a=j),this.emit("message_enriched",a,i),m.label=3;case 3:return g++,[3,1];case 4:k=0,l=f,m.label=5;case 5:if(!(k<l.length))return[3,8];return n=l[k],[4,(0,M.C)(a,n)];case 6:(j=m.sent())instanceof K.j&&(a=j),this.emit("message_enriched",a,n),m.label=7;case 7:return k++,[3,5];case 8:return p=(o=this.availableExtensions(null!=(c=a.event.integrations)?c:{})).destinations,q=o.after,[4,new Promise(function(b,c){setTimeout(function(){Promise.all(p.map(function(b){return(0,M.C)(a,b)})).then(b).catch(c)},0)})];case 9:return m.sent(),a.stats.increment("message_delivered"),this.emit("message_delivered",a),[4,Promise.all(q.map(function(b){return(0,M.C)(a,b)}))];case 10:return m.sent(),[2,a]}})})},b}(v.v));function O(a){for(var b=a.constructor.prototype,c=0,d=Object.getOwnPropertyNames(b);c<d.length;c++){var e=d[c];if("constructor"!==e){var f=Object.getOwnPropertyDescriptor(a.constructor.prototype,e);f&&"function"==typeof f.value&&(a[e]=a[e].bind(a))}}return a}var P={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},Q=function(a,b,c,d){console.warn("".concat(a.constructor.name,": Can't ").concat(b,' key "').concat(c,'" | Err: ').concat(d))},R=function(){function a(a){this.stores=a}return a.prototype.get=function(a){for(var b=null,c=0,d=this.stores;c<d.length;c++){var e=d[c];try{if(null!=(b=e.get(a)))return b}catch(b){Q(e,"get",a,b)}}return null},a.prototype.set=function(a,b){this.stores.forEach(function(c){try{c.set(a,b)}catch(b){Q(c,"set",a,b)}})},a.prototype.clear=function(a){this.stores.forEach(function(b){try{b.remove(a)}catch(c){Q(b,"remove",a,c)}})},a.prototype.getAndSync=function(a){var b=this.get(a),c="number"==typeof b?b.toString():b;return this.set(a,c),c},a}(),S=function(){function a(){this.cache={}}return a.prototype.get=function(a){var b;return null!=(b=this.cache[a])?b:null},a.prototype.set=function(a,b){this.cache[a]=b},a.prototype.remove=function(a){delete this.cache[a]},a}();function T(a){return a&&a.stores&&Array.isArray(a.stores)&&a.stores.every(function(a){return Object.values(P).includes(a)})}function U(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}var V=function a(b,c){function d(a,d,e){if("undefined"!=typeof document){"number"==typeof(e=U({},c,e)).expires&&(e.expires=new Date(Date.now()+864e5*e.expires)),e.expires&&(e.expires=e.expires.toUTCString()),a=encodeURIComponent(a).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var f="";for(var g in e)e[g]&&(f+="; "+g,!0!==e[g]&&(f+="="+e[g].split(";")[0]));return document.cookie=a+"="+b.write(d,a)+f}}return Object.create({set:d,get:function(a){if("undefined"!=typeof document&&(!arguments.length||a)){for(var c=document.cookie?document.cookie.split("; "):[],d={},e=0;e<c.length;e++){var f=c[e].split("="),g=f.slice(1).join("=");try{var h=decodeURIComponent(f[0]);if(d[h]=b.read(g,h),a===h)break}catch(a){}}return a?d[a]:d}},remove:function(a,b){d(a,"",U({},b,{expires:-1}))},withAttributes:function(b){return a(this.converter,U({},this.attributes,b))},withConverter:function(b){return a(U({},this.converter,b),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(b)}})}({read:function(a){return'"'===a[0]&&(a=a.slice(1,-1)),a.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(a){return encodeURIComponent(a).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function W(a){var b=function(a){try{return new URL(a)}catch(a){return}}(a);if(b)for(var c=function(a){var b=a.hostname.split("."),c=b[b.length-1],d=[];if(4===b.length&&parseInt(c,10)>0||b.length<=1)return d;for(var e=b.length-2;e>=0;--e)d.push(b.slice(e).join("."));return d}(b),d=0;d<c.length;++d){var e=Math.round(1e4*Math.random()).toString(),f=c[d],g={domain:"."+f,path:"/",sameSite:"Lax"};try{if(V.set(e,"1",g),V.get(e))return V.remove(e,g),f}catch(a){return}}}var X=function(){function a(b){void 0===b&&(b=a.defaults),this.options=(0,m.Cl)((0,m.Cl)({},a.defaults),b)}return Object.defineProperty(a,"defaults",{get:function(){return{maxage:365,domain:W(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),a.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},a.prototype.get=function(a){var b;try{var c=V.get(a);if(null==c)return null;try{return null!=(b=JSON.parse(c))?b:null}catch(a){return null!=c?c:null}}catch(a){return null}},a.prototype.set=function(a,b){"string"==typeof b?V.set(a,b,this.opts()):null===b?V.remove(a,this.opts()):V.set(a,JSON.stringify(b),this.opts())},a.prototype.remove=function(a){return V.remove(a,this.opts())},a}(),Y=function(){function a(){}return a.prototype.localStorageWarning=function(a,b){console.warn("Unable to access ".concat(a,", localStorage may be ").concat(b))},a.prototype.get=function(a){var b;try{var c=localStorage.getItem(a);if(null===c)return null;try{return null!=(b=JSON.parse(c))?b:null}catch(a){return null!=c?c:null}}catch(b){return this.localStorageWarning(a,"unavailable"),null}},a.prototype.set=function(a,b){try{localStorage.setItem(a,JSON.stringify(b))}catch(b){this.localStorageWarning(a,"full")}},a.prototype.remove=function(a){try{return localStorage.removeItem(a)}catch(b){this.localStorageWarning(a,"unavailable")}},a}();function Z(a){return a.map(function(a){var b,c;switch("object"==typeof a&&void 0!==a.name?(b=a.name,c=a.settings):b=a,b){case P.Cookie:return new X(c);case P.LocalStorage:return new Y;case P.Memory:return new S;default:throw Error("Unknown Store Type: ".concat(a))}})}function $(a,b){return a.map(function(a){return b&&a===P.Cookie?{name:a,settings:b}:a})}var _=(null==(d="undefined"!=typeof globalThis?globalThis:void 0)?void 0:d.crypto)||(null==(e="undefined"!=typeof global?global:void 0)?void 0:e.crypto)||(null==(f="undefined"!=typeof window?window:void 0)?void 0:f.crypto)||(null==(g="undefined"!=typeof self?self:void 0)?void 0:g.crypto)||(null==(i=null==(h="undefined"!=typeof frames?frames:void 0)?void 0:h[0])?void 0:i.crypto);j=_?function(a){for(var b=[],c=0;c<a;c+=4)b.push(_.getRandomValues(new Uint32Array(1))[0]);return new ab(b,a)}:function(a){for(var b=[],c=0,d=void 0;c<a;c+=4){var e=function(a){var b=a,c=0x3ade68b1;return function(){var a=((c=36969*(65535&c)+(c>>16)|0)<<16)+(b=18e3*(65535&b)+(b>>16)|0)|0;return a/=0x100000000,(a+=.5)*(Math.random()>.5?1:-1)}}(0x100000000*(d||Math.random()));d=0x3ade67b7*e(),b.push(0x100000000*e()|0)}return new ab(b,a)};for(var aa=function(){function a(){}return a.create=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return new(this.bind.apply(this,(0,m.fX)([void 0],a,!1)))},a.prototype.mixIn=function(a){return Object.assign(this,a)},a.prototype.clone=function(){var a=new this.constructor;return Object.assign(a,this),a},a}(),ab=function(a){function b(b,c){void 0===b&&(b=[]),void 0===c&&(c=4*b.length);var d=a.call(this)||this,e=b;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var f=e.byteLength,g=[],h=0;h<f;h+=1)g[h>>>2]|=e[h]<<24-h%4*8;d.words=g,d.sigBytes=f}else d.words=b,d.sigBytes=c;return d}return(0,m.C6)(b,a),b.prototype.toString=function(a){return void 0===a&&(a=ac),a.stringify(this)},b.prototype.concat=function(a){var b=this.words,c=a.words,d=this.sigBytes,e=a.sigBytes;if(this.clamp(),d%4)for(var f=0;f<e;f+=1){var g=c[f>>>2]>>>24-f%4*8&255;b[d+f>>>2]|=g<<24-(d+f)%4*8}else for(var f=0;f<e;f+=4)b[d+f>>>2]=c[f>>>2];return this.sigBytes+=e,this},b.prototype.clamp=function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=0xffffffff<<32-b%4*8,a.length=Math.ceil(b/4)},b.prototype.clone=function(){var b=a.prototype.clone.call(this);return b.words=this.words.slice(0),b},b.random=j,b}(aa),ac={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;e<c;e+=1){var f=b[e>>>2]>>>24-e%4*8&255;d.push((f>>>4).toString(16)),d.push((15&f).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-d%8*4;return new ab(c,b/2)}},ad={stringify:function(a){for(var b=a.words,c=a.sigBytes,d=[],e=0;e<c;e+=1){var f=b[e>>>2]>>>24-e%4*8&255;d.push(String.fromCharCode(f))}return d.join("")},parse:function(a){for(var b=a.length,c=[],d=0;d<b;d+=1)c[d>>>2]|=(255&a.charCodeAt(d))<<24-d%4*8;return new ab(c,b)}},ae={stringify:function(a){try{return decodeURIComponent(escape(ad.stringify(a)))}catch(a){throw Error("Malformed UTF-8 data")}},parse:function(a){return ad.parse(unescape(encodeURIComponent(a)))}},af=function(a){function b(){var b=a.call(this)||this;return b._minBufferSize=0,b}return(0,m.C6)(b,a),b.prototype.reset=function(){this._data=new ab,this._nDataBytes=0},b.prototype._append=function(a){var b=a;"string"==typeof b&&(b=ae.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},b.prototype._process=function(a){var b,c=this._data,d=this.blockSize,e=c.words,f=c.sigBytes,g=f/(4*d),h=(g=a?Math.ceil(g):Math.max((0|g)-this._minBufferSize,0))*d,i=Math.min(4*h,f);if(h){for(var j=0;j<h;j+=d)this._doProcessBlock(e,j);b=e.splice(0,h),c.sigBytes-=i}return new ab(b,i)},b.prototype.clone=function(){var b=a.prototype.clone.call(this);return b._data=this._data.clone(),b},b}(aa),ag=function(a){function b(b){var c=a.call(this)||this;return c.blockSize=16,c.cfg=Object.assign(new aa,b),c.reset(),c}return(0,m.C6)(b,a),b._createHelper=function(a){return function(b,c){return new a(c).finalize(b)}},b._createHmacHelper=function(a){return function(b,c){return new ah(a,c).finalize(b)}},b.prototype.reset=function(){a.prototype.reset.call(this),this._doReset()},b.prototype.update=function(a){return this._append(a),this._process(),this},b.prototype.finalize=function(a){return a&&this._append(a),this._doFinalize()},b}(af),ah=function(a){function b(b,c){var d=a.call(this)||this,e=new b;d._hasher=e;var f=c;"string"==typeof f&&(f=ae.parse(f));var g=e.blockSize,h=4*g;f.sigBytes>h&&(f=e.finalize(c)),f.clamp();var i=f.clone();d._oKey=i;var j=f.clone();d._iKey=j;for(var k=i.words,l=j.words,m=0;m<g;m+=1)k[m]^=0x5c5c5c5c,l[m]^=0x36363636;return i.sigBytes=h,j.sigBytes=h,d.reset(),d}return(0,m.C6)(b,a),b.prototype.reset=function(){var a=this._hasher;a.reset(),a.update(this._iKey)},b.prototype.update=function(a){return this._hasher.update(a),this},b.prototype.finalize=function(a){var b=this._hasher,c=b.finalize(a);return b.reset(),b.finalize(this._oKey.clone().concat(c))},b}(aa),ai=function(a,b,c){for(var d=[],e=0,f=0;f<b;f+=1)if(f%4){var g=c[a.charCodeAt(f-1)]<<f%4*2|c[a.charCodeAt(f)]>>>6-f%4*2;d[e>>>2]|=g<<24-e%4*8,e+=1}return ab.create(d,e)},aj={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp();for(var e=[],f=0;f<c;f+=3)for(var g=(b[f>>>2]>>>24-f%4*8&255)<<16|(b[f+1>>>2]>>>24-(f+1)%4*8&255)<<8|b[f+2>>>2]>>>24-(f+2)%4*8&255,h=0;h<4&&f+.75*h<c;h+=1)e.push(d.charAt(g>>>6*(3-h)&63));var i=d.charAt(64);if(i)for(;e.length%4;)e.push(i);return e.join("")},parse:function(a){var b=a.length,c=this._map,d=this._reverseMap;if(!d){this._reverseMap=[],d=this._reverseMap;for(var e=0;e<c.length;e+=1)d[c.charCodeAt(e)]=e}var f=c.charAt(64);if(f){var g=a.indexOf(f);-1!==g&&(b=g)}return ai(a,b,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},ak=[],al=0;al<64;al+=1)ak[al]=0x100000000*Math.abs(Math.sin(al+1))|0;var am=function(a,b,c,d,e,f,g){var h=a+(b&c|~b&d)+e+g;return(h<<f|h>>>32-f)+b},an=function(a,b,c,d,e,f,g){var h=a+(b&d|c&~d)+e+g;return(h<<f|h>>>32-f)+b},ao=function(a,b,c,d,e,f,g){var h=a+(b^c^d)+e+g;return(h<<f|h>>>32-f)+b},ap=function(a,b,c,d,e,f,g){var h=a+(c^(b|~d))+e+g;return(h<<f|h>>>32-f)+b},aq=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,m.C6)(b,a),b.prototype._doReset=function(){this._hash=new ab([0x67452301,0xefcdab89,0x98badcfe,0x10325476])},b.prototype._doProcessBlock=function(a,b){for(var c=0;c<16;c+=1){var d=b+c,e=a[d];a[d]=(e<<8|e>>>24)&0xff00ff|(e<<24|e>>>8)&0xff00ff00}var f=this._hash.words,g=a[b+0],h=a[b+1],i=a[b+2],j=a[b+3],k=a[b+4],l=a[b+5],m=a[b+6],n=a[b+7],o=a[b+8],p=a[b+9],q=a[b+10],r=a[b+11],s=a[b+12],t=a[b+13],u=a[b+14],v=a[b+15],w=f[0],x=f[1],y=f[2],z=f[3];w=am(w,x,y,z,g,7,ak[0]),z=am(z,w,x,y,h,12,ak[1]),y=am(y,z,w,x,i,17,ak[2]),x=am(x,y,z,w,j,22,ak[3]),w=am(w,x,y,z,k,7,ak[4]),z=am(z,w,x,y,l,12,ak[5]),y=am(y,z,w,x,m,17,ak[6]),x=am(x,y,z,w,n,22,ak[7]),w=am(w,x,y,z,o,7,ak[8]),z=am(z,w,x,y,p,12,ak[9]),y=am(y,z,w,x,q,17,ak[10]),x=am(x,y,z,w,r,22,ak[11]),w=am(w,x,y,z,s,7,ak[12]),z=am(z,w,x,y,t,12,ak[13]),y=am(y,z,w,x,u,17,ak[14]),x=am(x,y,z,w,v,22,ak[15]),w=an(w,x,y,z,h,5,ak[16]),z=an(z,w,x,y,m,9,ak[17]),y=an(y,z,w,x,r,14,ak[18]),x=an(x,y,z,w,g,20,ak[19]),w=an(w,x,y,z,l,5,ak[20]),z=an(z,w,x,y,q,9,ak[21]),y=an(y,z,w,x,v,14,ak[22]),x=an(x,y,z,w,k,20,ak[23]),w=an(w,x,y,z,p,5,ak[24]),z=an(z,w,x,y,u,9,ak[25]),y=an(y,z,w,x,j,14,ak[26]),x=an(x,y,z,w,o,20,ak[27]),w=an(w,x,y,z,t,5,ak[28]),z=an(z,w,x,y,i,9,ak[29]),y=an(y,z,w,x,n,14,ak[30]),x=an(x,y,z,w,s,20,ak[31]),w=ao(w,x,y,z,l,4,ak[32]),z=ao(z,w,x,y,o,11,ak[33]),y=ao(y,z,w,x,r,16,ak[34]),x=ao(x,y,z,w,u,23,ak[35]),w=ao(w,x,y,z,h,4,ak[36]),z=ao(z,w,x,y,k,11,ak[37]),y=ao(y,z,w,x,n,16,ak[38]),x=ao(x,y,z,w,q,23,ak[39]),w=ao(w,x,y,z,t,4,ak[40]),z=ao(z,w,x,y,g,11,ak[41]),y=ao(y,z,w,x,j,16,ak[42]),x=ao(x,y,z,w,m,23,ak[43]),w=ao(w,x,y,z,p,4,ak[44]),z=ao(z,w,x,y,s,11,ak[45]),y=ao(y,z,w,x,v,16,ak[46]),x=ao(x,y,z,w,i,23,ak[47]),w=ap(w,x,y,z,g,6,ak[48]),z=ap(z,w,x,y,n,10,ak[49]),y=ap(y,z,w,x,u,15,ak[50]),x=ap(x,y,z,w,l,21,ak[51]),w=ap(w,x,y,z,s,6,ak[52]),z=ap(z,w,x,y,j,10,ak[53]),y=ap(y,z,w,x,q,15,ak[54]),x=ap(x,y,z,w,h,21,ak[55]),w=ap(w,x,y,z,o,6,ak[56]),z=ap(z,w,x,y,v,10,ak[57]),y=ap(y,z,w,x,m,15,ak[58]),x=ap(x,y,z,w,t,21,ak[59]),w=ap(w,x,y,z,k,6,ak[60]),z=ap(z,w,x,y,r,10,ak[61]),y=ap(y,z,w,x,i,15,ak[62]),x=ap(x,y,z,w,p,21,ak[63]),f[0]=f[0]+w|0,f[1]=f[1]+x|0,f[2]=f[2]+y|0,f[3]=f[3]+z|0},b.prototype._doFinalize=function(){var a=this._data,b=a.words,c=8*this._nDataBytes,d=8*a.sigBytes;b[d>>>5]|=128<<24-d%32;var e=Math.floor(c/0x100000000);b[(d+64>>>9<<4)+15]=(e<<8|e>>>24)&0xff00ff|(e<<24|e>>>8)&0xff00ff00,b[(d+64>>>9<<4)+14]=(c<<8|c>>>24)&0xff00ff|(c<<24|c>>>8)&0xff00ff00,a.sigBytes=(b.length+1)*4,this._process();for(var f=this._hash,g=f.words,h=0;h<4;h+=1){var i=g[h];g[h]=(i<<8|i>>>24)&0xff00ff|(i<<24|i>>>8)&0xff00ff00}return f},b.prototype.clone=function(){var b=a.prototype.clone.call(this);return b._hash=this._hash.clone(),b},b}(ag);ag._createHelper(aq),ag._createHmacHelper(aq);var ar=function(a){function b(b){var c=a.call(this)||this;return c.cfg=Object.assign(new aa,{keySize:4,hasher:aq,iterations:1},b),c}return(0,m.C6)(b,a),b.prototype.compute=function(a,b){for(var c,d=this.cfg,e=d.hasher.create(),f=ab.create(),g=f.words,h=d.keySize,i=d.iterations;g.length<h;){c&&e.update(c),c=e.update(a).finalize(b),e.reset();for(var j=1;j<i;j+=1)c=e.finalize(c),e.reset();f.concat(c)}return f.sigBytes=4*h,f},b}(aa),as=function(a){function b(b,c,d){var e=a.call(this)||this;return e.cfg=Object.assign(new aa,d),e._xformMode=b,e._key=c,e.reset(),e}return(0,m.C6)(b,a),b.createEncryptor=function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},b.createDecryptor=function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},b._createHelper=function(a){var b=function(a){return"string"==typeof a?az:ay};return{encrypt:function(c,d,e){return b(d).encrypt(a,c,d,e)},decrypt:function(c,d,e){return b(d).decrypt(a,c,d,e)}}},b.prototype.reset=function(){a.prototype.reset.call(this),this._doReset()},b.prototype.process=function(a){return this._append(a),this._process()},b.prototype.finalize=function(a){return a&&this._append(a),this._doFinalize()},b}(af);function at(a,b,c){var d,e=this._iv;e?(d=e,this._iv=void 0):d=this._prevBlock;for(var f=0;f<c;f+=1)a[b+f]^=d[f]}as._ENC_XFORM_MODE=1,as._DEC_XFORM_MODE=2,as.keySize=4,as.ivSize=4,function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.apply(this,b)||this;return d.blockSize=1,d}(0,m.C6)(b,a),b.prototype._doFinalize=function(){return this._process(!0)}}(as);var au=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,m.C6)(b,a),b}(function(a){function b(b,c){var d=a.call(this)||this;return d._cipher=b,d._iv=c,d}return(0,m.C6)(b,a),b.createEncryptor=function(a,b){return this.Encryptor.create(a,b)},b.createDecryptor=function(a,b){return this.Decryptor.create(a,b)},b}(aa));au.Encryptor=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,m.C6)(b,a),b.prototype.processBlock=function(a,b){var c=this._cipher,d=c.blockSize;at.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)},b}(au),au.Decryptor=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,m.C6)(b,a),b.prototype.processBlock=function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),at.call(this,a,b,d),this._prevBlock=e},b}(au);var av={pad:function(a,b){for(var c=4*b,d=c-a.sigBytes%c,e=d<<24|d<<16|d<<8|d,f=[],g=0;g<d;g+=4)f.push(e);var h=ab.create(f,d);a.concat(h)},unpad:function(a){var b=255&a.words[a.sigBytes-1>>>2];a.sigBytes-=b}},aw=function(a){function b(b,c,d){var e=a.call(this,b,c,Object.assign({mode:au,padding:av},d))||this;return e.blockSize=4,e}return(0,m.C6)(b,a),b.prototype.reset=function(){a.prototype.reset.call(this);var b,c=this.cfg,d=c.iv,e=c.mode;this._xformMode===this.constructor._ENC_XFORM_MODE?b=e.createEncryptor:(b=e.createDecryptor,this._minBufferSize=1),this._mode=b.call(e,this,d&&d.words),this._mode.__creator=b},b.prototype._doProcessBlock=function(a,b){this._mode.processBlock(a,b)},b.prototype._doFinalize=function(){var a,b=this.cfg.padding;return this._xformMode===this.constructor._ENC_XFORM_MODE?(b.pad(this._data,this.blockSize),a=this._process(!0)):(a=this._process(!0),b.unpad(a)),a},b}(as),ax=function(a){function b(b){var c=a.call(this)||this;return c.mixIn(b),c}return(0,m.C6)(b,a),b.prototype.toString=function(a){return(a||this.formatter).stringify(this)},b}(aa),ay=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,m.C6)(b,a),b.encrypt=function(a,b,c,d){var e=Object.assign(new aa,this.cfg,d),f=a.createEncryptor(c,e),g=f.finalize(b),h=f.cfg;return ax.create({ciphertext:g,key:c,iv:h.iv,algorithm:a,mode:h.mode,padding:h.padding,blockSize:f.blockSize,formatter:e.format})},b.decrypt=function(a,b,c,d){var e=b,f=Object.assign(new aa,this.cfg,d);return e=this._parse(e,f.format),a.createDecryptor(c,f).finalize(e.ciphertext)},b._parse=function(a,b){return"string"==typeof a?b.parse(a,this):a},b}(aa);ay.cfg=Object.assign(new aa,{format:{stringify:function(a){var b=a.ciphertext,c=a.salt;return(c?ab.create([0x53616c74,0x65645f5f]).concat(c).concat(b):b).toString(aj)},parse:function(a){var b,c=aj.parse(a),d=c.words;return 0x53616c74===d[0]&&0x65645f5f===d[1]&&(b=ab.create(d.slice(2,4)),d.splice(0,4),c.sigBytes-=16),ax.create({ciphertext:c,salt:b})}}});var az=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,m.C6)(b,a),b.encrypt=function(a,b,c,d){var e=Object.assign(new aa,this.cfg,d),f=e.kdf.execute(c,a.keySize,a.ivSize,e.salt,e.hasher);e.iv=f.iv;var g=ay.encrypt.call(this,a,b,f.key,e);return g.mixIn(f),g},b.decrypt=function(a,b,c,d){var e=b,f=Object.assign(new aa,this.cfg,d);e=this._parse(e,f.format);var g=f.kdf.execute(c,a.keySize,a.ivSize,e.salt,f.hasher);return f.iv=g.iv,ay.decrypt.call(this,a,e,g.key,f)},b}(ay);az.cfg=Object.assign(ay.cfg,{kdf:{execute:function(a,b,c,d,e){var f,g=d;g||(g=ab.random(8)),f=e?ar.create({keySize:b+c,hasher:e}).compute(a,g):ar.create({keySize:b+c}).compute(a,g);var h=ab.create(f.words.slice(b),4*c);return f.sigBytes=4*b,ax.create({key:f,iv:h,salt:g})}}});for(var aA=[],aB=[],aC=[],aD=[],aE=[],aF=[],aG=[],aH=[],aI=[],aJ=[],aK=[],aL=0;aL<256;aL+=1)aL<128?aK[aL]=aL<<1:aK[aL]=aL<<1^283;for(var aM=0,aN=0,aL=0;aL<256;aL+=1){var aO=aN^aN<<1^aN<<2^aN<<3^aN<<4;aO=aO>>>8^255&aO^99,aA[aM]=aO,aB[aO]=aM;var aP=aK[aM],aQ=aK[aP],aR=aK[aQ],aS=257*aK[aO]^0x1010100*aO;aC[aM]=aS<<24|aS>>>8,aD[aM]=aS<<16|aS>>>16,aE[aM]=aS<<8|aS>>>24,aF[aM]=aS,aS=0x1010101*aR^65537*aQ^257*aP^0x1010100*aM,aG[aO]=aS<<24|aS>>>8,aH[aO]=aS<<16|aS>>>16,aI[aO]=aS<<8|aS>>>24,aJ[aO]=aS,aM?(aM=aP^aK[aK[aK[aR^aP]]],aN^=aK[aK[aN]]):aM=aN=1}var aT=[0,1,2,4,8,16,32,64,128,27,54],aU=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,m.C6)(b,a),b.prototype._doReset=function(){if(!this._nRounds||this._keyPriorReset!==this._key){this._keyPriorReset=this._key;var a,b=this._keyPriorReset,c=b.words,d=b.sigBytes/4;this._nRounds=d+6;var e=(this._nRounds+1)*4;this._keySchedule=[];for(var f=this._keySchedule,g=0;g<e;g+=1)g<d?f[g]=c[g]:(a=f[g-1],g%d?d>6&&g%d==4&&(a=aA[a>>>24]<<24|aA[a>>>16&255]<<16|aA[a>>>8&255]<<8|aA[255&a]):a=(aA[(a=a<<8|a>>>24)>>>24]<<24|aA[a>>>16&255]<<16|aA[a>>>8&255]<<8|aA[255&a])^aT[g/d|0]<<24,f[g]=f[g-d]^a);this._invKeySchedule=[];for(var h=this._invKeySchedule,i=0;i<e;i+=1){var g=e-i;a=i%4?f[g]:f[g-4],i<4||g<=4?h[i]=a:h[i]=aG[aA[a>>>24]]^aH[aA[a>>>16&255]]^aI[aA[a>>>8&255]]^aJ[aA[255&a]]}}},b.prototype.encryptBlock=function(a,b){this._doCryptBlock(a,b,this._keySchedule,aC,aD,aE,aF,aA)},b.prototype.decryptBlock=function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,aG,aH,aI,aJ,aB),c=a[b+1],a[b+1]=a[b+3],a[b+3]=c},b.prototype._doCryptBlock=function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;o<i;o+=1){var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n];n+=1;var q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n];n+=1;var r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n];n+=1;var s=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n];n+=1,j=p,k=q,l=r,m=s}var t=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n];n+=1;var u=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n];n+=1;var v=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n];n+=1;var w=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n];n+=1,a[b]=t,a[b+1]=u,a[b+2]=v,a[b+3]=w},b}(aw);aU.keySize=8;var aV=aw._createHelper(aU),aW=function(a){var b;return new Uint8Array((null!=(b=null==window?void 0:window.atob(a))?b:"").split("").map(function(a){return a.charCodeAt(0)}))};function aX(a){try{return a?JSON.parse(a):null}catch(b){return a||null}}var aY="HtEvEncrypt:",aZ="RudderEncrypt:",a$="RS_ENC_v3_",a_=function(a){var b=Date.now(),c=a||18e5;return c<1e4&&console.warn("Session timeouts of less than 10 seconds are not recommended"),{id:b,expiresAt:b+c,timeout:c,sessionStart:!0,autoTrack:!0}},a0=function(a){return{id:!a||a.toString().startsWith("-")||a.toString().length<10?Date.now():a,sessionStart:!0,manualTrack:!0}},a1={persist:!0,cookie:{key:"htjs_user_id",oldKey:"ajs_user"},localStorage:{key:"htjs_user_traits"},sessions:{autoTrack:!0}},a2=function(){function a(a,b){void 0===a&&(a=a1);var c,d,e,f,g,h=this;this.options={},this.id=function(a){if(h.options.disable)return null;var b,c,d,e,f=h.identityStore.getAndSync(h.idKey);if(void 0!==a){var g=null===a,i=a!==f&&null!==f&&null!==a,j=a!==f&&null===f&&null!==a;h.identityStore.set(h.idKey,a),g&&(null==(c=null==(b=h.options)?void 0:b.httpCookieService)||c.dispatchClear()),i&&h.anonymousId(null),(i||j)&&(null==(e=null==(d=h.options)?void 0:d.httpCookieService)||e.dispatchCreate())}var k=h.identityStore.getAndSync(h.idKey);if(k)return k;var l=h.legacyUserStore.get(a1.cookie.oldKey);return l?"object"==typeof l?l.id:l:null},this.anonymousId=function(a){if(h.options.disable)return null;if(void 0===a){var b,c,d,e,f,g,i,j,k,l,m=h.identityStore.getAndSync(h.anonKey),n=!1;if(!m&&(n=!!(m=function(a){try{if(!a||"string"!=typeof a||""===a.trim())return null;if(a.substring(0,aY.length)===aY)return aX(aV.decrypt(a.substring(aY.length),"HTEV").toString(ae))}catch(a){console.error(a)}return a}(null!=(b=h.identityStore.getAndSync("htev_anonymous_id"))?b:"")),m&&h.identityStore.set(h.anonKey,m)),!m&&(n=!!(m=h.identityStore.getAndSync("ajs_anonymous_id")),m&&h.identityStore.set(h.anonKey,m)),!m&&(n=!!(m=function(a){try{if(!a||"string"!=typeof a||""===a.trim())return null;if(a.substring(0,aZ.length)===aZ)return aX(aV.decrypt(a.substring(aZ.length),"Rudder").toString(ae));if(a.substring(0,a$.length)===a$){var b,c=aX((b=a.substring(a$.length),new TextDecoder().decode(aW(b))));if(!c||"string"!=typeof c||""===c.trim())return null;return c}}catch(a){console.error(a)}return a}(null!=(c=h.identityStore.getAndSync("rl_anonymous_id"))?c:"")),m&&h.identityStore.set(h.anonKey,m)),m||(m=null!=(e=null==(d=h.legacySIO())?void 0:d[0])?e:null),n&&(null==(g=null==(f=h.options)?void 0:f.httpCookieService)||g.dispatchCreate()),m)return m}if(null===a){h.identityStore.set(h.anonKey,null);var o=h.identityStore.getAndSync(h.anonKey);return null==(j=null==(i=h.options)?void 0:i.httpCookieService)||j.dispatchClear(),o}h.identityStore.set(h.anonKey,null!=a?a:(0,w.v4)());var p=h.identityStore.getAndSync(h.anonKey);return null==(l=null==(k=h.options)?void 0:k.httpCookieService)||l.dispatchCreate(),p},this.traits=function(a){var b;if(!h.options.disable)return null===a&&(a={}),a&&h.traitsStore.set(h.traitsKey,null!=a?a:{}),null!=(b=h.traitsStore.get(h.traitsKey))?b:{}},this.options=(0,m.Cl)((0,m.Cl)({},a1),a),this.cookieOptions=b,this.idKey=null!=(d=null==(c=a.cookie)?void 0:c.key)?d:a1.cookie.key,this.traitsKey=null!=(f=null==(e=a.localStorage)?void 0:e.key)?f:a1.localStorage.key,this.anonKey="htjs_anonymous_id",this.seshKey="htjs_sesh",this.identityStore=this.createStorage(this.options,b),this.sessionStore=this.createStorage(this.options,b),this.legacyUserStore=this.createStorage(this.options,b,function(a){return a===P.Cookie}),this.traitsStore=this.createStorage(this.options,b,function(a){return a!==P.Cookie});var i=this.legacyUserStore.get(a1.cookie.oldKey);i&&"object"==typeof i&&(i.id&&this.id(i.id),i.traits&&this.traits(i.traits)),this.options.httpCookieService&&(this.identityStore.getAndSync(this.anonKey),this.identityStore.getAndSync(this.idKey),null==(g=this.options.httpCookieService)||g.dispatchCreate()),O(this)}return a.prototype.legacySIO=function(){var a=this.legacyUserStore.get("_sio");if(!a)return null;var b=a.split("----");return[b[0],b[1]]},a.prototype.identify=function(a,b){if(!this.options.disable){b=null!=b?b:{};var c=this.id();(null===c||c===a)&&(b=(0,m.Cl)((0,m.Cl)({},this.traits()),b)),a&&this.id(a),this.traits(b)}},a.prototype.startManualSession=function(a){if(!this.options.disable){this.sessionStore.clear(this.seshKey);var b=a0(a);this.sessionStore.set(this.seshKey,b)}},a.prototype.endManualSession=function(){this.sessionStore.clear(this.seshKey)},a.prototype.getAndUpdateSessionInfo=function(){if(this.options.disable)return null;var a,b,c,d,e,f,g,h,i=this.sessionStore.getAndSync(this.seshKey);return null==i?(null==(d=null==(c=this.options)?void 0:c.sessions)?void 0:d.autoTrack)?(i=a_(null==(f=null==(e=this.options)?void 0:e.sessions)?void 0:f.timeout),this.sessionStore.set(this.seshKey,i),i):null:(null==i?void 0:i.autoTrack)&&(a=i.expiresAt,Date.now()>a)?(i=a_(null==(h=null==(g=this.options)?void 0:g.sessions)?void 0:h.timeout),this.sessionStore.set(this.seshKey,i),i):((b=i).sessionStart=!1,b.autoTrack&&(b.expiresAt=Date.now()+b.timeout),i=b,this.sessionStore.set(this.seshKey,i),i)},a.prototype.getAndUpdateSession=function(){var a=this.getAndUpdateSessionInfo(),b={};return(null==a?void 0:a.id)&&(b.sessionId=a.id),(null==a?void 0:a.sessionStart)&&(b.sessionStart=a.sessionStart),b},a.prototype.sessionId=function(){var a,b=this.sessionStore.getAndSync(this.seshKey);return null!=(a=null==b?void 0:b.id)?a:null},a.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},a.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.sessionStore.clear(this.seshKey),this.traitsStore.clear(this.traitsKey)},a.prototype.load=function(){return new a(this.options,this.cookieOptions)},a.prototype.save=function(){return!0},a.prototype.createStorage=function(a,b,c){var d=[P.LocalStorage,P.Cookie,P.Memory];return a.disable?new R([]):a.persist?(void 0!==a.storage&&null!==a.storage&&T(a.storage)&&(d=a.storage.stores),a.localStorageFallbackDisabled&&(d=d.filter(function(a){return a!==P.LocalStorage})),c&&(d=d.filter(c)),new R(Z($(d,b)))):new R([new S])},a.defaults=a1,a}(),a3={persist:!0,cookie:{key:"htjs_group_id"},localStorage:{key:"htjs_group_properties"}},a4=function(a){function b(b,c){void 0===b&&(b=a3);var d=a.call(this,(0,m.Cl)((0,m.Cl)({},a3),b),c)||this;return d.anonymousId=function(a){},O(d),d}return(0,m.C6)(b,a),b}(a2),a5=c(385118),a6=c(86378),a7=c(375201),a8=function(a,b,c){c.getCalls(a).forEach(function(a){bg(b,a).catch(console.error)})},a9=a8.bind(void 0,"on"),ba=a8.bind(void 0,"setAnonymousId"),bb=function(a,b){b.toArray().forEach(function(b){setTimeout(function(){bg(a,b).catch(console.error)},0)})},bc=function(a){if(bd(a))return E(a.pop())},bd=function(a){var b=a[a.length-1];if(!(0,n.Qd)(b)||"bpc"!==b.__t)return!1;for(var c in b)if(!B.includes(c))return!1;return!0},be=function(a,b,c,d){void 0===c&&(c=function(){}),void 0===d&&(d=console.error),this.method=a,this.resolve=c,this.reject=d,this.called=!1,this.args=b},bf=function(){function a(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this._callMap={},this.push.apply(this,a)}return Object.defineProperty(a.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(a){this._callMap=a},enumerable:!1,configurable:!0}),a.prototype.getCalls=function(a){var b;return null!=(b=this.calls[a])?b:[]},a.prototype.push=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b.forEach(function(b){["track","screen","alias","group","page","identify"].includes(b.method)&&!bd(b.args)&&(b.args=(0,m.fX)((0,m.fX)([],b.args,!0),[F()],!1)),a.calls[b.method]?a.calls[b.method].push(b):a.calls[b.method]=[b]})},a.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},a.prototype.toArray=function(){var a;return(a=[]).concat.apply(a,Object.values(this.calls))},a.prototype._pushSnippetWindowBuffer=function(){var a=(0,a7.kJ)();if(Array.isArray(a)){var b=a.splice(0,a.length).map(function(a){return new be(a[0],a.slice(1))});this.push.apply(this,b)}},a}();function bg(a,b){return(0,m.sH)(this,void 0,void 0,function(){var c,d;return(0,m.YH)(this,function(e){switch(e.label){case 0:var f;if(e.trys.push([0,3,,4]),b.called)return[2,void 0];if(b.called=!0,!("object"==typeof(f=c=a[b.method].apply(a,b.args))&&null!==f&&"then"in f&&"function"==typeof f.then))return[3,2];return[4,c];case 1:e.sent(),e.label=2;case 2:return b.resolve(c),[3,4];case 3:return d=e.sent(),b.reject(d),[3,4];case 4:return[2]}})})}var bh=function(){function a(a){var b=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=a5.r,this._preInitBuffer=new bf,this._promise=a(this._preInitBuffer),this._promise.then(function(a){var c=a[0],d=a[1];b.instance=c,b.ctx=d}).catch(function(){})}return a.prototype.then=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(a=this._promise).then.apply(a,b)},a.prototype.catch=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(a=this._promise).catch.apply(a,b)},a.prototype.finally=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];return(a=this._promise).finally.apply(a,b)},a.prototype._createMethod=function(a){var b=this;return function(){for(var c,d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];return b.instance?Promise.resolve((c=b.instance)[a].apply(c,d)):new Promise(function(c,e){b._preInitBuffer.push(new be(a,d,c,e))})}},a.prototype._createChainableMethod=function(a){var b=this;return function(){for(var c,d=[],e=0;e<arguments.length;e++)d[e]=arguments[e];return b.instance?(c=b.instance)[a].apply(c,d):b._preInitBuffer.push(new be(a,d)),b}},a}(),bi="This is being deprecated and will be not be available in future releases of Analytics JS",bj=(0,a6.m)(),bk=null==bj?void 0:bj.analytics;function bl(){console.warn(bi)}var bm=function(a){function b(b,c,d,e,f){var g,h,i,j,k,l,n,o=this;(o=a.call(this)||this)._debug=!1,o.initialized=!1,o.user=function(){return o._user},o.init=o.initialize.bind(o),o.log=bl,o.addIntegrationMiddleware=bl,o.listeners=bl,o.addEventListener=bl,o.removeAllListeners=bl,o.removeListener=bl,o.removeEventListener=bl,o.hasListeners=bl,o.add=bl,o.addIntegration=bl;var p=null==c?void 0:c.cookie,q=null!=(k=null==c?void 0:c.disableClientPersistence)&&k;o.settings=b,o.settings.timeout=null!=(l=o.settings.timeout)?l:300,o.queue=null!=d?d:(g="".concat(b.writeKey,":event-queue"),void 0===(h=null==c?void 0:c.retryQueue)&&(h=!1),void 0===(i=q)&&(i=!1),j=h?4:1,new N(i?new J.M(j,[]):new I.x(j,g)));var r=null==c?void 0:c.storage;return o._universalStorage=o.createStore(q,r,p),o._user=null!=e?e:new a2((0,m.Cl)({persist:!q,storage:null==c?void 0:c.storage,httpCookieService:null==c?void 0:c.httpCookieService},null==c?void 0:c.user),p).load(),o._group=null!=f?f:new a4((0,m.Cl)({persist:!q,storage:null==c?void 0:c.storage},null==c?void 0:c.group),p).load(),o.eventFactory=new H(o._user),o.integrations=null!=(n=null==c?void 0:c.integrations)?n:{},o.options=null!=c?c:{},O(o),o}return(0,m.C6)(b,a),b.prototype.createStore=function(a,b,c){return new R(a?[new S]:b&&T(b)?Z($(b.stores,c)):Z([P.LocalStorage,{name:P.Cookie,settings:c},P.Memory]))},Object.defineProperty(b.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),b.prototype.track=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i=this;return(0,m.YH)(this,function(j){return b=bc(a),d=(c=o.apply(void 0,a))[0],e=c[1],f=c[2],g=c[3],h=this.eventFactory.track(d,e,f,this.integrations,b),[2,this._dispatch(h,g).then(function(a){return i.emit("track",d,a.event.properties,a.event.options),a})]})})},b.prototype.page=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i,j=this;return(0,m.YH)(this,function(k){return b=bc(a),d=(c=p.apply(void 0,a))[0],e=c[1],f=c[2],g=c[3],h=c[4],i=this.eventFactory.page(d,e,f,g,this.integrations,b),[2,this._dispatch(i,h).then(function(a){return j.emit("page",d,e,a.event.properties,a.event.options),a})]})})},b.prototype.identify=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i=this;return(0,m.YH)(this,function(j){return b=bc(a),d=(c=q(this._user).apply(void 0,a))[0],e=c[1],f=c[2],g=c[3],this._user.identify(d,e),h=this.eventFactory.identify(this._user.id(),this._user.traits(),f,this.integrations,b),[2,this._dispatch(h,g).then(function(a){return i.emit("identify",a.event.userId,a.event.traits,a.event.options),a})]})})},b.prototype.group=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=bc(b);if(0===b.length)return this._group;var e=q(this._group).apply(void 0,b),f=e[0],g=e[1],h=e[2],i=e[3];this._group.identify(f,g);var j=this._group.id(),k=this._group.traits(),l=this.eventFactory.group(j,k,h,this.integrations,d);return this._dispatch(l,i).then(function(b){return a.emit("group",b.event.groupId,b.event.traits,b.event.options),b})},b.prototype.alias=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i=this;return(0,m.YH)(this,function(j){return b=bc(a),d=(c=r.apply(void 0,a))[0],e=c[1],f=c[2],g=c[3],h=this.eventFactory.alias(d,e,f,this.integrations,b),[2,this._dispatch(h,g).then(function(a){return i.emit("alias",d,e,a.event.options),a})]})})},b.prototype.screen=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b,c,d,e,f,g,h,i,j=this;return(0,m.YH)(this,function(k){return b=bc(a),d=(c=p.apply(void 0,a))[0],e=c[1],f=c[2],g=c[3],h=c[4],i=this.eventFactory.screen(d,e,f,g,this.integrations,b),[2,this._dispatch(i,h).then(function(a){return j.emit("screen",d,e,a.event.properties,a.event.options),a})]})})},b.prototype.trackClick=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b;return(0,m.YH)(this,function(d){switch(d.label){case 0:return[4,c.e(248).then(c.bind(c,172625))];case 1:return[2,(b=d.sent().link).call.apply(b,(0,m.fX)([this],a,!1))]}})})},b.prototype.trackLink=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b;return(0,m.YH)(this,function(d){switch(d.label){case 0:return[4,c.e(248).then(c.bind(c,172625))];case 1:return[2,(b=d.sent().link).call.apply(b,(0,m.fX)([this],a,!1))]}})})},b.prototype.trackSubmit=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b;return(0,m.YH)(this,function(d){switch(d.label){case 0:return[4,c.e(248).then(c.bind(c,172625))];case 1:return[2,(b=d.sent().form).call.apply(b,(0,m.fX)([this],a,!1))]}})})},b.prototype.trackForm=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b;return(0,m.YH)(this,function(d){switch(d.label){case 0:return[4,c.e(248).then(c.bind(c,172625))];case 1:return[2,(b=d.sent().form).call.apply(b,(0,m.fX)([this],a,!1))]}})})},b.prototype.register=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b,c=this;return(0,m.YH)(this,function(d){switch(d.label){case 0:return b=t.o.system(),[4,Promise.all(a.map(function(a){return c.queue.register(b,a,c)}))];case 1:return d.sent(),[2,b]}})})},b.prototype.deregister=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return(0,m.sH)(this,void 0,void 0,function(){var b,c=this;return(0,m.YH)(this,function(d){switch(d.label){case 0:return b=t.o.system(),[4,Promise.all(a.map(function(a){var d=c.queue.plugins.find(function(b){return b.name===a});if(d)return c.queue.deregister(b,d,c);b.log("warn","plugin ".concat(a," not found"))}))];case 1:return d.sent(),[2,b]}})})},b.prototype.debug=function(a){return!1===a&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=a,this},b.prototype.startSession=function(a){this._user.startManualSession(a)},b.prototype.endSession=function(){this._user.endManualSession()},b.prototype.getSessionId=function(){var a;return null!=(a=this._user.sessionId())?a:null},b.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},b.prototype.timeout=function(a){this.settings.timeout=a},b.prototype._dispatch=function(a,b){return(0,m.sH)(this,void 0,void 0,function(){var c;return(0,m.YH)(this,function(d){return(c=new t.o(a),(0,s.a)()&&!this.options.retryQueue)?[2,c]:[2,function(a,b,c,d){return(0,m.sH)(this,void 0,void 0,function(){var e,f;return(0,m.YH)(this,function(g){switch(g.label){case 0:if(c.emit("dispatch_start",a),e=Date.now(),!b.isEmpty())return[3,2];return[4,b.dispatchSingle(a)];case 1:return f=g.sent(),[3,4];case 2:return[4,b.dispatch(a)];case 3:f=g.sent(),g.label=4;case 4:var h,i;if(!(null==d?void 0:d.callback))return[3,6];return[4,(0,u.w_)(f,d.callback,(h=e,Math.max((null!=(i=d.timeout)?i:300)-(Date.now()-h),0)))];case 5:f=g.sent(),g.label=6;case 6:return(null==d?void 0:d.debug)&&f.flush(),[2,f]}})})}(c,this.queue,this,{callback:b,debug:this._debug,timeout:this.settings.timeout})]})})},b.prototype.addSourceMiddleware=function(a){return(0,m.sH)(this,void 0,void 0,function(){var b=this;return(0,m.YH)(this,function(d){switch(d.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,m.sH)(b,void 0,void 0,function(){var b,d,e;return(0,m.YH)(this,function(f){switch(f.label){case 0:return[4,c.e(2751).then(c.bind(c,17188))];case 1:return b=f.sent().sourceMiddlewarePlugin,d={},this.queue.plugins.forEach(function(a){if("destination"===a.type)return d[a.name]=!0}),e=b(a,d),[4,this.register(e)];case 2:return f.sent(),[2]}})})})];case 1:return d.sent(),[2,this]}})})},b.prototype.addDestinationMiddleware=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];return this.queue.plugins.filter(function(b){return b.name.toLowerCase()===a.toLowerCase()}).forEach(function(a){a.addMiddleware.apply(a,b)}),Promise.resolve(this)},b.prototype.setAnonymousId=function(a){return this._user.anonymousId(a)},b.prototype.queryString=function(a){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(b){switch(b.label){case 0:if(!1===this.options.useQueryString)return[2,[]];return[4,c.e(7538).then(c.bind(c,495563))];case 1:return[2,(0,b.sent().queryString)(this,a)]}})})},b.prototype.use=function(a){return a(this),this},b.prototype.ready=function(a){return void 0===a&&(a=function(a){return a}),(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(b){return[2,Promise.all(this.queue.plugins.map(function(a){return a.ready?a.ready():Promise.resolve()})).then(function(b){return a(b),b})]})})},b.prototype.noConflict=function(){return console.warn(bi),(0,a7.Ud)(null!=bk?bk:this),this},b.prototype.normalize=function(a){return console.warn(bi),this.eventFactory.normalize(a)},Object.defineProperty(b.prototype,"failedInitializations",{get:function(){return console.warn(bi),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"VERSION",{get:function(){return a5.r},enumerable:!1,configurable:!0}),b.prototype.initialize=function(a,b){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(a){return console.warn(bi),[2,Promise.resolve(this)]})})},b.prototype.pageview=function(a){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(b){switch(b.label){case 0:return console.warn(bi),[4,this.page({path:a})];case 1:return b.sent(),[2,this]}})})},Object.defineProperty(b.prototype,"plugins",{get:function(){var a;return console.warn(bi),null!=(a=this._plugins)?a:{}},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"Integrations",{get:function(){return console.warn(bi),this.queue.plugins.filter(function(a){return"destination"===a.type}).reduce(function(a,b){var c="".concat(b.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),d=window[c];if(!d)return a;var e=d.Integration;return e?a[b.name]=e:a[b.name]=d,a},{})},enumerable:!1,configurable:!0}),b.prototype.push=function(a){var b=a.shift();(!b||this[b])&&this[b].apply(this,a)},b}(v.v);function bn(){return"undefined"!=typeof process&&process.env?process.env:{}}var bo=c(354197),bp=c(812484),bq=function(){function a(b){var c,d,e,f=a.urlHelper(b);this.renewUrl=f.renewUrl,this.clearUrl=f.clearUrl,this.backoff=null!=(c=b.backoff)?c:300,this.retries=null!=(d=b.retries)?d:3,this.flushInterval=null!=(e=b.flushInterval)?e:1e3,this.queue=[]}return a.urlHelper=function(a){var b=window.location.origin;return{renewUrl:new URL(a.renewUrl,b).href,clearUrl:new URL(a.clearUrl,b).href}},a.load=function(b){return(0,m.sH)(this,void 0,void 0,function(){var c;return(0,m.YH)(this,function(d){switch(d.label){case 0:return[4,br((c=new a(b)).sendHTTPCookies(c.renewUrl),c.retries,c.backoff).catch(console.error)];case 1:return d.sent(),c.startQueueConsumer(),[2,c]}})})},a.prototype.dispatchCreate=function(){this.queue.push(this.sendHTTPCookies(this.renewUrl))},a.prototype.dispatchClear=function(){this.queue.push(this.sendHTTPCookies(this.clearUrl))},a.prototype.startQueueConsumer=function(){if(this.flushIntervalId)return void console.error("HTTPCookie queue consumer is already running.");var a=this.consumeQueue.bind(this);this.flushIntervalId=setInterval(function(){return a().catch(console.error)},this.flushInterval)},a.prototype.stopQueueConsumer=function(){if(!this.flushIntervalId)return void console.error("HTTPCookie queue consumer is already stopped.");clearInterval(this.flushIntervalId),this.flushIntervalId=void 0},a.prototype.sendHTTPCookies=function(a){return function(){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(b){switch(b.label){case 0:return[4,(0,bp.h)(a,{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify({sentAt:new Date().toISOString()})})];case 1:return[2,b.sent()]}})})}},a.prototype.consumeQueue=function(){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(a){switch(a.label){case 0:if(!(this.queue.length>0))return[3,2];return[4,br(this.queue.shift(),this.retries,this.backoff).catch(console.error)];case 1:return a.sent(),[3,0];case 2:return[2]}})})},a}();function br(a,b,c){return(0,m.sH)(this,void 0,void 0,function(){var d;return(0,m.YH)(this,function(e){switch(e.label){case 0:if(!(b>=0))return[3,6];e.label=1;case 1:return e.trys.push([1,3,,5]),[4,a().then(function(a){if(a.ok)return a;throw Error("Status: ".concat(a.status," ").concat(a.statusText))})];case 2:return[2,e.sent()];case 3:if(d=e.sent(),(b-=1)<=0)throw d;return[4,function(a){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(b){return[2,new Promise(function(b){return setTimeout(b,a)})]})})}(c)];case 4:return e.sent(),[3,5];case 5:return[3,0];case 6:throw Error("HtEvents: Problem with DeferredRequest")}})})}var bs=c(634209),bt=function(){var a,b,c=new Promise(function(c,d){a=c,b=d});return{resolve:a,reject:b,promise:c}},bu=c(425117),bv=c(598297),bw=function(a){try{var b=new URLSearchParams;return Object.entries(a).forEach(function(a){var c=a[0],d=a[1];Array.isArray(d)?d.forEach(function(a){return b.append(c,a)}):b.append(c,d)}),b.toString()}catch(a){return""}},bx=new function(){var a=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(b,c){return(0,m.sH)(a,void 0,void 0,function(){var a;return(0,m.YH)(this,function(b){switch(b.label){case 0:this.instance=c,b.label=1;case 1:return b.trys.push([1,3,,4]),a=this,[4,function(a){return(0,m.sH)(this,void 0,void 0,function(){var b;return(0,m.YH)(this,function(c){return(b=navigator.userAgentData)?a?[2,b.getHighEntropyValues(a).catch(function(){return b.toJSON()})]:[2,b.toJSON()]:[2,void 0]})})}(this.instance.options.highEntropyValuesClientHints)];case 2:return a.userAgentData=b.sent(),[3,4];case 3:return b.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(b){var c,d,e,f,g,h,i=b.event.context,j=i.page.search||"",l="object"==typeof j?bw(j):j;i.userAgent=navigator.userAgent,i.userAgentData=a.userAgentData;var n=navigator.userLanguage||navigator.language;void 0===i.locale&&void 0!==n&&(i.locale=n),null!=i.library||(i.library={name:"events-sdk-js",version:"".concat("web"===(0,bu.X)()?"web":"npm","-").concat(a5.r)}),l&&!i.campaign&&((c=l).startsWith("?")&&(c=c.substring(1)),i.campaign=(c=c.replace(/\?/g,"&")).split("&").reduce(function(a,b){var c=b.split("="),d=c[0],e=c[1];if(d.includes("utm_")&&d.length>4){var f=d.slice(4);"campaign"===f&&(f="name"),a[f]=(0,bv.p)(void 0===e?"":e)}return a},{}));var o=function(){var a=V.get("_ga");if(a&&a.startsWith("amp"))return a}();o&&(i.amp={id:o}),f=(e=new R(null!=(h=a.instance.options.disableClientPersistence)&&h?[]:[new X(function(){if(k)return k;var a=W(window.location.href);return k={expires:31536e6,secure:!1,path:"/"},a&&(k.domain=a),k}())])).get("s:context.referrer"),(g=null!=(d=function(a){var b={btid:"dataxu",urid:"millennial-media"};a.startsWith("?")&&(a=a.substring(1));for(var c=(a=a.replace(/\?/g,"&")).split("&"),d=0;d<c.length;d++){var e=c[d].split("="),f=e[0],g=e[1];if(b[f])return{id:g,type:b[f]}}}(l))?d:f)&&(i&&(i.referrer=(0,m.Cl)((0,m.Cl)({},i.referrer),g)),e.set("s:context.referrer",g));try{i.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(a){}return b},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},by=c(839576),bz=c(17188),bA=function(){function a(a,b){this.version="1.0.0",this.alternativeNames=[],this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=b,this.name=a,this.type=b.type,this.alternativeNames.push(b.name)}return a.prototype.addMiddleware=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];"destination"===this.type&&(a=this.middleware).push.apply(a,b)},a.prototype.transform=function(a){return(0,m.sH)(this,void 0,void 0,function(){var b;return(0,m.YH)(this,function(c){switch(c.label){case 0:return[4,(0,bz.applyDestinationMiddleware)(this.name,a.event,this.middleware)];case 1:return null===(b=c.sent())&&a.cancel(new K.d({retry:!1,reason:"dropped by destination middleware"})),[2,new t.o(b)]}})})},a.prototype._createMethod=function(a){var b=this;return function(c){return(0,m.sH)(b,void 0,void 0,function(){var b;return(0,m.YH)(this,function(d){switch(d.label){case 0:if(!this.action[a])return[2,c];if(b=c,"destination"!==this.type)return[3,2];return[4,this.transform(c)];case 1:b=d.sent(),d.label=2;case 2:return[4,this.action[a](b)];case 3:return d.sent(),[2,c]}})})}},a.prototype.isLoaded=function(){return this.action.isLoaded()},a.prototype.ready=function(){return this.action.ready?this.action.ready():Promise.resolve()},a.prototype.load=function(a,b){return this.action.load(a,b)},a.prototype.unload=function(a,b){var c,d;return null==(d=(c=this.action).unload)?void 0:d.call(c,a,b)},a}(),bB=c(527818),bC=function(a){var b=!1;window.addEventListener("pagehide",function(){b||a(b=!0)}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){if(b)return;b=!0}else b=!1;a(b)})};function bD(a){return(encodeURI(JSON.stringify(a)).split(/%..|./).length-1)/1024}var bE=c(803116);function bF(a,b,c,d){var e=this;a||setTimeout(function(){return(0,m.sH)(e,void 0,void 0,function(){var a,e;return(0,m.YH)(this,function(f){switch(f.label){case 0:return a=!0,[4,function(a,b){return(0,m.sH)(this,void 0,void 0,function(){var c,d=this;return(0,m.YH)(this,function(e){switch(e.label){case 0:if(c=[],(0,s.a)())return[2,b];return[4,(0,bE._)(function(){return b.length>0&&!(0,s.a)()},function(){return(0,m.sH)(d,void 0,void 0,function(){var d;return(0,m.YH)(this,function(e){switch(e.label){case 0:if(!(d=b.pop()))return[2];return[4,(0,M.C)(d,a)];case 1:return e.sent()instanceof t.o||c.push(d),[2]}})})})];case 1:return e.sent(),c.map(function(a){return b.pushWithBackoff(a)}),[2,b]}})})}(c,b)];case 1:return e=f.sent(),a=!1,b.todo>0&&d(a,e,c,d),[2]}})})},5e3*Math.random())}var bG=c(905868),bH=function(a){function b(b,c){var d=a.call(this,"".concat(b," ").concat(c))||this;return d.field=b,d}return(0,m.C6)(b,a),b}(Error),bI="is not a string",bJ="is nil";function bK(a){var b,c=a.event;if(!(0,n.t2)(c))throw new bH("Event",bJ);if("object"!=typeof c)throw new bH("Event","is not an object");if(!(0,n.Kg)(c.type))throw new bH(".type",bI);"track"===c.type&&function(a){if(!(0,n.Kg)(a.event))throw new bH(".event",bI)}(c);var d=null!=(b=c.properties)?b:c.traits;if("alias"!==c.type&&!(0,n.Qd)(d))throw new bH(".properties","is not an object");return!function(a){var b,c,d,e=".userId/anonymousId/previousId/groupId",f=null!=(d=null!=(c=null!=(b=a.userId)?b:a.anonymousId)?c:a.groupId)?d:a.previousId;if((0,n.t2)(f)){if(!(0,n.Kg)(f))throw new bH(e,bI)}else throw new bH(e,bJ)}(c),a}var bL={name:"Event Validation",type:"before",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:bK,identify:bK,page:bK,alias:bK,group:bK,screen:bK},bM=(0,a6.m)(),bN=null!=(l=bM.__HIGHTOUCH_INSPECTOR__)?l:bM.__HIGHTOUCH_INSPECTOR__={},bO=function(a){var b;return null==(b=bN.attach)?void 0:b.call(bN,a)};function bP(a,b){var c=null!=b?b:(0,bo.I2)();return(0,bp.h)("".concat(c,"/v1/projects/").concat(a,"/settings")).then(function(a){return a.ok?a.json():a.text().then(function(a){throw Error(a)})}).catch(function(a){throw console.error(a.message),a})}var bQ={apiKey:"WRITE_KEY",apiHost:"us-east-1.hightouch-events.com",protocol:"https",unbundledIntegrations:[],addBundledMetadata:!1,maybeBundledConfigIds:{},deliveryStrategy:{strategy:"standard"}},bR={integrations:{},plan:{track:{__default:{enabled:!0,integrations:{}}},identify:{__default:{enabled:!0}},group:{__default:{enabled:!0}}},enabledMiddleware:{},metrics:{sampleRate:0},legacyVideoPluginsEnabled:!1,remotePlugins:[]},bS=function(a){function b(){var b=this,d=bt(),e=d.promise,f=d.resolve;return(b=a.call(this,function(a){return e.then(function(b){return function(a,b,d){var e,f,g,h,i,j;return void 0===b&&(b={}),(0,m.sH)(this,void 0,void 0,function(){var k,l,n,o,p,q,r,t,u,v,w;return(0,m.YH)(this,function(x){switch(x.label){case 0:if(b.globalAnalyticsKey&&(0,a7.rY)(b.globalAnalyticsKey),a.cdnURL&&(0,bo.qQ)(a.cdnURL),a.cdnSettings?k=a.cdnSettings:(bR.integrations["Hightouch.io"]=(0,m.Cl)((0,m.Cl)((0,m.Cl)((0,m.Cl)((0,m.Cl)({},bQ),a.writeKey?{apiKey:a.writeKey}:{}),b.apiHost?{apiHost:b.apiHost}:{}),b.protocol?{protocol:b.protocol}:{}),!0==b.batching?{deliveryStrategy:{strategy:"batching",config:{timeout:1e3,size:10}}}:{}),k=bR),b.updateCDNSettings&&(k=b.updateCDNSettings(k)),l=null==(f=null==(e=k.integrations["Hightouch.io"])?void 0:e.retryQueue)||f,!(!b.disableClientPersistence&&b.httpCookieServiceOptions))return[3,2];return n=b,[4,bq.load(b.httpCookieServiceOptions).catch(function(a){return console.error(a)})];case 1:n.httpCookieService=x.sent(),x.label=2;case 2:var y;return bO(p=new bm(a,o=(0,m.Cl)({retryQueue:l},b))),q=null!=(g=a.plugins)?g:[],r=null!=(h=a.classicIntegrations)?h:[],ba(y=p,d),a9(y,d),[4,function(a,b,d,e,f,g,h){var i,j,k,l;return void 0===g&&(g=[]),(0,m.sH)(this,void 0,void 0,function(){var n,o,p,q,r,t,u,v,w,x,y,z,A,B,C=this;return(0,m.YH)(this,function(D){var E,F,G;switch(D.label){case 0:if(n=null==g?void 0:g.filter(function(a){return"object"==typeof a}),o=null==g?void 0:g.filter(function(a){return"function"==typeof a&&"string"==typeof a.pluginName}),"test"===bn().NODE_ENV||!((null!=(G=null==(F=null==(E=b.middlewareSettings)?void 0:E.routingRules)?void 0:F.length)?G:0)>0))return[3,2];return[4,Promise.all([c.e(4184),c.e(9010)]).then(c.bind(c,444697)).then(function(a){return a.tsubMiddleware(b.middlewareSettings.routingRules)})];case 1:return q=D.sent(),[3,3];case 2:q=void 0,D.label=3;case 3:if(p=q,("test"===bn().NODE_ENV||!(Object.keys(b.integrations).length>1))&&!(h.length>0))return[3,5];return[4,Promise.all([c.e(3400),c.e(9832),c.e(5050)]).then(c.bind(c,351319)).then(function(c){return c.ajsDestinations(a,b,d.integrations,e,p,h)})];case 4:return t=D.sent(),[3,6];case 5:t=[],D.label=6;case 6:if(r=t,!b.legacyVideoPluginsEnabled)return[3,8];return[4,c.e(9694).then(c.bind(c,901404)).then(function(a){return a.loadLegacyVideoPlugins(d)})];case 7:D.sent(),D.label=8;case 8:if(!(null==(i=e.plan)?void 0:i.track))return[3,10];return[4,c.e(3104).then(c.bind(c,237104)).then(function(a){var c;return a.schemaFilter(null==(c=e.plan)?void 0:c.track,b)})];case 9:return v=D.sent(),[3,11];case 10:v=void 0,D.label=11;case 11:return u=v,w=(0,bs.J)(b,f),[4,(function(a,b,c,d,e,f){var g,h,i;return(0,m.sH)(this,void 0,void 0,function(){var j,k,l=this;return(0,m.YH)(this,function(n){switch(n.label){case 0:return j=[],k=null!=(h=null==(g=a.middlewareSettings)?void 0:g.routingRules)?h:[],[4,Promise.all((null!=(i=a.remotePlugins)?i:[]).map(function(a){return(0,m.sH)(l,void 0,void 0,function(){var g,h,i,l,n;return(0,m.YH)(this,function(o){switch(o.label){case 0:var p,q;if(p=b[a.creationName],q=b[a.name],!1===b.All&&!p&&!q||!1===p||!1===q||0)return[2];o.label=1;case 1:if(o.trys.push([1,6,,7]),h=null==f?void 0:f.find(function(b){return b.pluginName===a.name}))return[3,3];return[4,function(a,b){return(0,m.sH)(this,void 0,void 0,function(){var c,d,e,f,g;return(0,m.YH)(this,function(h){switch(h.label){case 0:if(c=RegExp("https://cdn.hightouch-events.(com|build)"),d=(0,bo.I2)(),!b)return[3,6];f=(e=a.url.split("/"))[e.length-2],g=a.url.replace(f,btoa(f).replace(/=/g,"")),h.label=1;case 1:return h.trys.push([1,3,,5]),[4,(0,by.k)(g.replace(c,d))];case 2:case 4:return h.sent(),[3,5];case 3:return h.sent(),[4,(0,by.k)(a.url.replace(c,d))];case 5:return[3,8];case 6:return[4,(0,by.k)(a.url.replace(c,d))];case 7:h.sent(),h.label=8;case 8:if("function"==typeof window[a.libraryName])return[2,window[a.libraryName]];return[2]}})})}(a,d)];case 2:h=o.sent(),o.label=3;case 3:if(!(g=h))return[3,5];return[4,g((0,m.Cl)((0,m.Cl)({},a.settings),c[a.name]))];case 4:!function(a){if(!Array.isArray(a))throw Error("Not a valid list of plugins");var b=["load","isLoaded","name","version","type"];a.forEach(function(a){b.forEach(function(b){var c;if(void 0===a[b])throw Error("Plugin: ".concat(null!=(c=a.name)?c:"unknown"," missing required function ").concat(b))})})}(l=Array.isArray(i=o.sent())?i:[i]),n=k.filter(function(b){return b.destinationName===a.creationName}),l.forEach(function(b){var c=new bA(a.creationName,b);n.length&&e&&"destination"===b.type&&c.addMiddleware(e),j.push(c)}),o.label=5;case 5:return[3,7];case 6:return console.warn("Failed to load Remote Plugin",o.sent()),[3,7];case 7:return[2]}})})}))];case 1:return n.sent(),[2,j.filter(Boolean)]}})})})(b,d.integrations,w,f.obfuscate,p,o).catch(function(){return[]})];case 12:if(x=D.sent(),y=(0,m.fX)((0,m.fX)((0,m.fX)([bL,bx],n,!0),r,!0),x,!0),u&&y.push(u),(null==(j=e.integrations)?void 0:j.All)===!1&&!e.integrations["Hightouch.io"]||e.integrations&&!1===e.integrations["Hightouch.io"])return[3,14];return A=(z=y).push,[4,function(a,b,c){window.addEventListener("pagehide",function(){i.push.apply(i,Array.from(j)),j.clear()});var d,e,f,g,h=null!=(e=null==b?void 0:b.apiKey)?e:"",i=a.options.disableClientPersistence?new J.M(a.queue.queue.maxAttempts,[]):new I.x(a.queue.queue.maxAttempts,"".concat(h,":dest-Hightouch.io")),j=new Set,k=null!=(f=null==b?void 0:b.apiHost)?f:bG.a,l=null!=(g=null==b?void 0:b.protocol)?g:"https",n="".concat(l,"://").concat(k),o=null==b?void 0:b.deliveryStrategy,p=(null==o?void 0:o.strategy)==="batching"?function(a,b,c){void 0===c&&(c="https");var d,e,f,g=[],h=!1,i=null!=(d=null==b?void 0:b.size)?d:10,j=null!=(e=null==b?void 0:b.timeout)?e:5e3;function k(b){if(0!==b.length){var d,e=null==(d=b[0])?void 0:d.writeKey,f=b.map(function(a){return a.sentAt,(0,m.Tt)(a,["sentAt"])});return(0,bp.h)("".concat(c,"://").concat(a,"/v1/batch"),{keepalive:h,headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify({writeKey:e,batch:f,sentAt:new Date().toISOString()})})}}function l(){return(0,m.sH)(this,void 0,void 0,function(){var a;return(0,m.YH)(this,function(b){return g.length?(a=g,g=[],[2,k(a)]):[2]})})}return bC(function(a){if((h=a)&&g.length){var b,c;Promise.all((b=[],c=0,g.forEach(function(a){bD(b[c])>=64&&c++,b[c]?b[c].push(a):b[c]=[a]}),b).map(k)).catch(console.error)}}),{dispatch:function(a,b){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(a){return g.push(b),[2,g.length>=i||bD(g)>=450||h?l():void(!f&&(f=setTimeout(function(){f=void 0,l().catch(console.error)},j)))]})})}}}(k,o.config,l):(d=null==o?void 0:o.config,{dispatch:function(a,b){return(0,bp.h)(a,{keepalive:null==d?void 0:d.keepalive,headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify(b)})}});function q(d){return(0,m.sH)(this,void 0,void 0,function(){var e,f;return(0,m.YH)(this,function(g){var h,k,l,o,q,t;return(0,s.a)()?(i.push(d),bF(!1,i,r,bF),[2,d]):(j.add(d),e=d.event.type,f=(0,bB.W)(d.event).json(),"track"===d.event.type&&delete f.traits,"alias"===d.event.type&&(h=f,t=a.user(),h.previousId=null!=(o=null!=(l=null!=(k=h.previousId)?k:h.from)?l:t.id())?o:t.anonymousId(),h.userId=null!=(q=h.userId)?q:h.to,delete h.from,delete h.to,f=h),[2,p.dispatch("".concat(n,"/v1/").concat(e),function(a,b,c,d){var e,f=a.user();delete b.options,b.writeKey=null==c?void 0:c.apiKey,b.userId=b.userId||f.id(),b.anonymousId=b.anonymousId||f.anonymousId(),b.sentAt=new Date;var g=a.queue.failedInitializations||[];g.length>0&&(b._metadata={failedInitializations:g});var h=[],i=[];for(var j in d){var k=d[j];"Hightouch.io"===j&&h.push(j),"bundled"===k.bundlingStatus&&h.push(j),"unbundled"===k.bundlingStatus&&i.push(j)}for(var l=0,n=(null==c?void 0:c.unbundledIntegrations)||[];l<n.length;l++){var o=n[l];i.includes(o)||i.push(o)}var p=null!=(e=null==c?void 0:c.maybeBundledConfigIds)?e:{},q=[];return h.sort().forEach(function(a){var b;(null!=(b=p[a])?b:[]).forEach(function(a){q.push(a)})}),(null==c?void 0:c.addBundledMetadata)!==!1&&(b._metadata=(0,m.Cl)((0,m.Cl)({},b._metadata),{bundled:h.sort(),unbundled:i.sort(),bundledIds:q})),b}(a,f,b,c)).then(function(){return d}).catch(function(){return i.pushWithBackoff(d),bF(!1,i,r,bF),d}).finally(function(){j.delete(d)})])})})}var r={name:"Hightouch.io",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:q,identify:q,page:q,alias:q,group:q,screen:q};return i.todo&&bF(!1,i,r,bF),r}(d,w["Hightouch.io"],b.integrations)];case 13:A.apply(z,[D.sent()]),D.label=14;case 14:return[4,Promise.allSettled(Object.entries(null!=(k=f.destinations)?k:{}).map(function(a){var b=a[0],d=a[1];return(0,m.sH)(C,void 0,void 0,function(){var a;return(0,m.YH)(this,function(e){switch(e.label){case 0:return[4,function(a,b){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(d){switch(a){case"gtag":return[2,c.e(1666).then(c.bind(c,674102)).then(function(a){return a.default(b)})];case"Google Tag Manager":return[2,c.e(2391).then(c.bind(c,19929)).then(function(a){return a.default(b)})];default:return[2,void 0]}})})}(b,d)];case 1:return(a=e.sent())?y.push(a):console.warn("failed to load destination plugin: ".concat(b)),[2]}})})}))];case 15:return D.sent(),[4,d.register.apply(d,y)];case 16:if(B=D.sent(),!Object.entries(null!=(l=b.enabledMiddleware)?l:{}).some(function(a){return a[1]}))return[3,18];return[4,c.e(521).then(c.bind(c,589173)).then(function(a){var c=a.remoteMiddlewares;return(0,m.sH)(C,void 0,void 0,function(){return(0,m.YH)(this,function(a){switch(a.label){case 0:return[4,c(B,b,f.obfuscate)];case 1:return[2,Promise.all(a.sent().map(function(a){return d.addSourceMiddleware(a)}))]}})})})];case 17:D.sent(),D.label=18;case 18:return[2,B]}})})}(a.writeKey,k,p,o,b,q,r)];case 3:if(t=x.sent(),u=null!=(i=window.location.search)?i:"",v=null!=(j=window.location.hash)?j:"",!(w=u.length?u:v.replace(/(?=#).*(?=\?)/,"")).includes("ajs_"))return[3,5];return[4,p.queryString(w).catch(console.error)];case 4:x.sent(),x.label=5;case 5:return p.initialized=!0,p.emit("initialize",a,b),b.initialPageview&&p.page().catch(console.error),[4,function(a,b){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(c){switch(c.label){case 0:return[4,(0,m.sH)(void 0,void 0,void 0,function(){var c,d;return(0,m.YH)(this,function(e){switch(e.label){case 0:c=0,d=b.getCalls("addSourceMiddleware"),e.label=1;case 1:if(!(c<d.length))return[3,4];return[4,bg(a,d[c]).catch(console.error)];case 2:e.sent(),e.label=3;case 3:return c++,[3,1];case 4:return[2]}})})];case 1:return c.sent(),bb(a,b),b.clear(),[2]}})})}(p,d)];case 6:return x.sent(),[2,[p,t]]}})})}(b[0],b[1],a)})})||this)._resolveLoadStart=function(a,b){return f([a,b])},b}return(0,m.C6)(b,a),b.prototype.load=function(a,b){return void 0===b&&(b={}),this._resolveLoadStart(a,b),this},b.load=function(a,c){return void 0===c&&(c={}),new b().load(a,c)},b.standalone=function(a,c){return b.load({writeKey:a},c).then(function(a){return a[0]})},b}(bh),bT=c(112906),bU=function(){function a(){}return a.load=function(a){return(0,m.sH)(this,void 0,void 0,function(){var b,c,d,e,f;return(0,m.YH)(this,function(g){switch(g.label){case 0:return b={persist:!1},c=new N(new J.M(3,[])),d=new bm(a,{user:b,group:b},c),e={writeKey:a.writeKey,name:"events-sdk-js-node",type:"after",version:"latest"},[4,d.register(bL,function(a){var b=this,c=function(c){return(0,m.sH)(b,void 0,void 0,function(){return(0,m.YH)(this,function(b){switch(b.label){case 0:return c.updateEvent("context.library.name","events-sdk-js-node"),c.updateEvent("context.library.version",a5.r),c.updateEvent("_metadata.nodeVersion",process.versions.node),[4,function(a,b){return(0,m.sH)(this,void 0,void 0,function(){return(0,m.YH)(this,function(c){switch(c.label){case 0:return[4,(0,bT.default)("https://us-east-1.hightouch-events.com/v1/".concat(a.type),{method:"POST",headers:{"Content-Type":"application/json","User-Agent":"events-sdk-js-node/latest",Authorization:"Basic ".concat(Buffer.from(b).toString("base64"))},body:JSON.stringify(a)})];case 1:if(!c.sent().ok)throw Error("Message Rejected");return[2,a]}})})}(c.event,a.writeKey)];case 1:return b.sent(),[2,c]}})})};return{name:a.name,type:a.type,version:a.version,load:function(a){return Promise.resolve(a)},isLoaded:function(){return!0},track:c,identify:c,page:c,alias:c,group:c,screen:c}}(e))];case 1:return f=g.sent(),d.emit("initialize",a,null!=b?b:{}),[2,[d,f]]}})})},a}(),bV=c(87109)}};