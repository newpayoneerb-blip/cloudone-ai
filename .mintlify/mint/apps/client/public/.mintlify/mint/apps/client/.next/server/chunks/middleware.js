"use strict";exports.id=2751,exports.ids=[2751],exports.modules={17188:(a,b,c)=>{c.r(b),c.d(b,{applyDestinationMiddleware:()=>g,sourceMiddlewarePlugin:()=>h});var d=c(508524),e=c(230313),f=c(527818);function g(a,b,c){return(0,d.sH)(this,void 0,void 0,function(){var e,g,h,i,j;return(0,d.YH)(this,function(k){switch(k.label){case 0:e=(0,f.W)(b,{clone:!0,traverse:!1}).rawEvent(),g=0,h=c,k.label=1;case 1:if(!(g<h.length))return[3,4];return i=h[g],[4,function(b,c){return(0,d.sH)(this,void 0,void 0,function(){var e,g,h;return(0,d.YH)(this,function(i){switch(i.label){case 0:return e=!1,g=null,[4,c({payload:(0,f.W)(b,{clone:!0,traverse:!1}),integration:a,next:function(a){e=!0,null===a&&(g=null),a&&(g=a.obj)}})];case 1:return i.sent(),e||null===g||(g.integrations=(0,d.Cl)((0,d.Cl)({},b.integrations),((h={})[a]=!1,h))),[2,g]}})})}(e,i)];case 2:if(null===(j=k.sent()))return[2,null];e=j,k.label=3;case 3:return g++,[3,1];case 4:return[2,e]}})})}function h(a,b){function c(c){return(0,d.sH)(this,void 0,void 0,function(){var g;return(0,d.YH)(this,function(d){switch(d.label){case 0:return g=!1,[4,a({payload:(0,f.W)(c.event,{clone:!0,traverse:!1}),integrations:null!=b?b:{},next:function(a){g=!0,a&&(c.event=a.obj)}})];case 1:if(d.sent(),!g)throw new e.d({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,c]}})})}return{name:"Source Middleware ".concat(a.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(a){return Promise.resolve(a)},track:c,page:c,identify:c,alias:c,group:c}}},230313:(a,b,c)=>{c.d(b,{d:()=>i,j:()=>j});var d=c(107090),e=c(212418),f=c(508524),g=function(){function a(){this._logs=[]}return a.prototype.log=function(a,b,c){var d=new Date;this._logs.push({level:a,message:b,time:d,extras:c})},Object.defineProperty(a.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),a.prototype.flush=function(){if(this.logs.length>1){var a=this._logs.reduce(function(a,b){var c,d,e,g=(0,f.Cl)((0,f.Cl)({},b),{json:JSON.stringify(b.extras,null," "),extras:b.extras});delete g.time;var h=null!=(e=null==(d=b.time)?void 0:d.toISOString())?e:"";return a[h]&&(h="".concat(h,"-").concat(Math.random())),(0,f.Cl)((0,f.Cl)({},a),((c={})[h]=g,c))},{});console.table?console.table(a):console.log(a)}else this.logs.forEach(function(a){var b=a.level,c=a.message,d=a.extras;"info"===b||"debug"===b?console.log(c,null!=d?d:""):console[b](c,null!=d?d:"")});this._logs=[]},a}(),h=c(301960),i=function(a){var b,c,d;this.retry=null==(b=a.retry)||b,this.type=null!=(c=a.type)?c:"plugin Error",this.reason=null!=(d=a.reason)?d:""},j=function(){function a(a,b,c,e){void 0===b&&(b=(0,d.v4)()),void 0===c&&(c=new h.r),void 0===e&&(e=new g),this.attempts=0,this.event=a,this._id=b,this.logger=e,this.stats=c}return a.system=function(){},a.prototype.isSame=function(a){return a.id===this.id},a.prototype.cancel=function(a){if(a)throw a;throw new i({reason:"Context Cancel"})},a.prototype.log=function(a,b,c){this.logger.log(a,b,c)},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),a.prototype.updateEvent=function(a,b){var c;if("integrations"===a.split(".")[0]){var d=a.split(".")[1];if((null==(c=this.event.integrations)?void 0:c[d])===!1)return this.event}return(0,e.J)(this.event,a,b),this.event},a.prototype.failedDelivery=function(){return this._failedDelivery},a.prototype.setFailedDelivery=function(a){this._failedDelivery=a},a.prototype.logs=function(){return this.logger.logs},a.prototype.flush=function(){this.logger.flush(),this.stats.flush()},a.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},a}()},301960:(a,b,c)=>{c.d(b,{p:()=>e,r:()=>f});var d=c(508524),e=function(){function a(){this.metrics=[]}return a.prototype.increment=function(a,b,c){void 0===b&&(b=1),this.metrics.push({metric:a,value:b,tags:null!=c?c:[],type:"counter",timestamp:Date.now()})},a.prototype.gauge=function(a,b,c){this.metrics.push({metric:a,value:b,tags:null!=c?c:[],type:"gauge",timestamp:Date.now()})},a.prototype.flush=function(){var a=this.metrics.map(function(a){return(0,d.Cl)((0,d.Cl)({},a),{tags:a.tags.join(",")})});console.table?console.table(a):console.log(a),this.metrics=[]},a.prototype.serialize=function(){return this.metrics.map(function(a){return{m:a.metric,v:a.value,t:a.tags,k:({gauge:"g",counter:"c"})[a.type],e:a.timestamp}})},a}(),f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,d.C6)(b,a),b.prototype.gauge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.increment=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.flush=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.serialize=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return[]},b}(e)},471863:(a,b,c)=>{c.d(b,{p:()=>e,r:()=>f});var d=c(508524),e=function(){function a(){this.metrics=[]}return a.prototype.increment=function(a,b,c){void 0===b&&(b=1),this.metrics.push({metric:a,value:b,tags:null!=c?c:[],type:"counter",timestamp:Date.now()})},a.prototype.gauge=function(a,b,c){this.metrics.push({metric:a,value:b,tags:null!=c?c:[],type:"gauge",timestamp:Date.now()})},a.prototype.flush=function(){var a=this.metrics.map(function(a){return(0,d.Cl)((0,d.Cl)({},a),{tags:a.tags.join(",")})});console.table?console.table(a):console.log(a),this.metrics=[]},a.prototype.serialize=function(){return this.metrics.map(function(a){return{m:a.metric,v:a.value,t:a.tags,k:({gauge:"g",counter:"c"})[a.type],e:a.timestamp}})},a}(),f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return(0,d.C6)(b,a),b.prototype.gauge=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.increment=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.flush=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b]},b.prototype.serialize=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return[]},b}(e)},527818:(a,b,c)=>{c.d(b,{W:()=>e});var d=c(917897);function e(a,b){var c=new d.Facade(a,b);return"track"===a.type&&(c=new d.Track(a,b)),"identify"===a.type&&(c=new d.Identify(a,b)),"page"===a.type&&(c=new d.Page(a,b)),"alias"===a.type&&(c=new d.Alias(a,b)),"group"===a.type&&(c=new d.Group(a,b)),"screen"===a.type&&(c=new d.Screen(a,b)),Object.defineProperty(c,"obj",{value:a,writable:!0}),c}},874376:(a,b,c)=>{c.r(b),c.d(b,{applyDestinationMiddleware:()=>g,sourceMiddlewarePlugin:()=>h});var d=c(508524),e=c(973272),f=c(969174);function g(a,b,c){return(0,d.sH)(this,void 0,void 0,function(){var e,g,h,i,j;return(0,d.YH)(this,function(k){switch(k.label){case 0:e=(0,f.W)(b,{clone:!0,traverse:!1}).rawEvent(),g=0,h=c,k.label=1;case 1:if(!(g<h.length))return[3,4];return i=h[g],[4,function(b,c){return(0,d.sH)(this,void 0,void 0,function(){var e,g,h;return(0,d.YH)(this,function(i){switch(i.label){case 0:return e=!1,g=null,[4,c({payload:(0,f.W)(b,{clone:!0,traverse:!1}),integration:a,next:function(a){e=!0,null===a&&(g=null),a&&(g=a.obj)}})];case 1:return i.sent(),e||null===g||(g.integrations=(0,d.Cl)((0,d.Cl)({},b.integrations),((h={})[a]=!1,h))),[2,g]}})})}(e,i)];case 2:if(null===(j=k.sent()))return[2,null];e=j,k.label=3;case 3:return g++,[3,1];case 4:return[2,e]}})})}function h(a,b){function c(c){return(0,d.sH)(this,void 0,void 0,function(){var g;return(0,d.YH)(this,function(d){switch(d.label){case 0:return g=!1,[4,a({payload:(0,f.W)(c.event,{clone:!0,traverse:!1}),integrations:null!=b?b:{},next:function(a){g=!0,a&&(c.event=a.obj)}})];case 1:if(d.sent(),!g)throw new e.d({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,c]}})})}return{name:"Source Middleware ".concat(a.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(a){return Promise.resolve(a)},track:c,page:c,screen:c,identify:c,alias:c,group:c}}},969174:(a,b,c)=>{c.d(b,{W:()=>e});var d=c(917897);function e(a,b){var c=new d.Facade(a,b);return"track"===a.type&&(c=new d.Track(a,b)),"identify"===a.type&&(c=new d.Identify(a,b)),"page"===a.type&&(c=new d.Page(a,b)),"alias"===a.type&&(c=new d.Alias(a,b)),"group"===a.type&&(c=new d.Group(a,b)),"screen"===a.type&&(c=new d.Screen(a,b)),Object.defineProperty(c,"obj",{value:a,writable:!0}),c}},973272:(a,b,c)=>{c.d(b,{d:()=>i,j:()=>j});var d=c(107090),e=c(212418),f=c(508524),g=function(){function a(){this._logs=[]}return a.prototype.log=function(a,b,c){var d=new Date;this._logs.push({level:a,message:b,time:d,extras:c})},Object.defineProperty(a.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),a.prototype.flush=function(){if(this.logs.length>1){var a=this._logs.reduce(function(a,b){var c,d,e,g=(0,f.Cl)((0,f.Cl)({},b),{json:JSON.stringify(b.extras,null," "),extras:b.extras});delete g.time;var h=null!=(e=null==(d=b.time)?void 0:d.toISOString())?e:"";return a[h]&&(h="".concat(h,"-").concat(Math.random())),(0,f.Cl)((0,f.Cl)({},a),((c={})[h]=g,c))},{});console.table?console.table(a):console.log(a)}else this.logs.forEach(function(a){var b=a.level,c=a.message,d=a.extras;"info"===b||"debug"===b?console.log(c,null!=d?d:""):console[b](c,null!=d?d:"")});this._logs=[]},a}(),h=c(471863),i=function(a){var b,c,d;this.retry=null==(b=a.retry)||b,this.type=null!=(c=a.type)?c:"plugin Error",this.reason=null!=(d=a.reason)?d:""},j=function(){function a(a,b,c,e){void 0===b&&(b=(0,d.v4)()),void 0===c&&(c=new h.r),void 0===e&&(e=new g),this.attempts=0,this.event=a,this._id=b,this.logger=e,this.stats=c}return a.system=function(){},a.prototype.isSame=function(a){return a.id===this.id},a.prototype.cancel=function(a){if(a)throw a;throw new i({reason:"Context Cancel"})},a.prototype.log=function(a,b,c){this.logger.log(a,b,c)},Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),a.prototype.updateEvent=function(a,b){var c;if("integrations"===a.split(".")[0]){var d=a.split(".")[1];if((null==(c=this.event.integrations)?void 0:c[d])===!1)return this.event}return(0,e.J)(this.event,a,b),this.event},a.prototype.failedDelivery=function(){return this._failedDelivery},a.prototype.setFailedDelivery=function(a){this._failedDelivery=a},a.prototype.logs=function(){return this.logger.logs},a.prototype.flush=function(){this.logger.flush(),this.stats.flush()},a.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},a}()}};