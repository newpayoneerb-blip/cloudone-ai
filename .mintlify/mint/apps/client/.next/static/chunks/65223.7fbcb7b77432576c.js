"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[65223],{25461:(t,e,n)=>{n.d(e,{p:()=>r});function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}}},65223:(t,e,n)=>{n.r(e),n.d(e,{Analytics:()=>tA,AnalyticsBrowser:()=>tW,AnalyticsNode:()=>tX,Context:()=>d.o,ContextCancelation:()=>d.d,EventFactory:()=>M,Group:()=>Z,UniversalStorage:()=>D,User:()=>V,getGlobalAnalytics:()=>te.kJ,isDestinationPluginWithAddMiddleware:()=>A,resolveAliasArguments:()=>l,resolveArguments:()=>a,resolvePageArguments:()=>u,resolveUserArguments:()=>c,segmentio:()=>tS});var r,i,o=n(95520),s=n(27086);function a(t,e,n,r){var i,o=[t,e,n,r],a=(0,s.Qd)(t)?t.event:t;if(!a||!(0,s.Kg)(a))throw Error("Event missing");var u=(0,s.Qd)(t)?null!=(i=t.properties)?i:{}:(0,s.Qd)(e)?e:{},c={};return(0,s.Tn)(n)||(c=null!=n?n:{}),(0,s.Qd)(t)&&!(0,s.Tn)(e)&&(c=null!=e?e:{}),[a,u,c,o.find(s.Tn)]}function u(t,e,n,r,i){var o,a,u=null,c=null,l=[t,e,n,r,i],h=l.filter(s.Kg);1===h.length?(c=(0,s.Kg)(l[1])?l[1]:h[0],u=null):2===h.length&&("string"==typeof l[0]&&(u=l[0]),"string"==typeof l[1]&&(c=l[1]));var d=l.find(s.Tn),f=l.filter(s.Qd);return 1===f.length?(0,s.Qd)(l[2])?(a={},o=l[2]):(0,s.Qd)(l[3])?(o={},a=l[3]):(o=f[0],a={}):2===f.length&&(o=f[0],a=f[1]),[u,c,null!=o?o:o={},null!=a?a:a={},d]}var c=function(t){return function(){for(var e,n,r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},u=["callback","options","traits","id"],c=0;c<i.length;c++){var l=i[c],h=u.pop();if("id"===h){if((0,s.Kg)(l)||(0,s.Et)(l)){a.id=l.toString();continue}if(null==l)continue;h=u.pop()}if(("traits"===h||"options"===h)&&(null==l||(0,s.Qd)(l))&&(a[h]=l),(0,s.Tn)(l)){a.callback=l;break}}return[null!=(e=a.id)?e:t.id(),null!=(n=a.traits)?n:{},null!=(r=a.options)?r:{},a.callback]}};function l(t,e,n,r){(0,s.Et)(t)&&(t=t.toString()),(0,s.Et)(e)&&(e=e.toString());var i=[t,e,n,r],o=i.filter(s.Kg),a=o[0],u=void 0===a?t:a,c=o[1],l=i.filter(s.Qd)[0];return[u,void 0===c?null:c,void 0===l?{}:l,i.find(s.Tn)]}var h=n(46961),d=n(87166),f=n(93411),p=n(81616),v=n(10716),g=function(t,e,n,r,i,o){return{__t:"bpc",c:e,p:r,u:t,s:n,t:i,r:o}},y=Object.keys(g("","","","","","")),m=function(t){var e=t.indexOf("#");return -1===e?t:t.slice(0,e)},b=function(t){try{return new URL(t).pathname}catch(e){return"/"===t[0]?t:"/"+t}},w=function(t){var e=t.c,n=t.p,r=t.s,i=t.u,o=t.r,s=t.t,a=e?b(e):n,u=e?e.indexOf("?")>-1?e:e+r:m(i);return{path:a,referrer:o,search:r,title:s,url:u}},_=function(){var t=document.querySelector("link[rel='canonical']");return g(location.href,t&&t.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},C=function(t,e){void 0===e&&(e=w(_()));var n,r,i,s=t.context;"page"===t.type&&(i=t.properties&&(n=t.properties,r=Object.keys(e),Object.assign.apply(Object,(0,o.fX)([{}],r.map(function(t){var e;if(n&&Object.prototype.hasOwnProperty.call(n,t))return(e={})[t]=n[t],e}),!1))),t.properties=(0,o.Cl)((0,o.Cl)((0,o.Cl)({},e),t.properties),t.name?{name:t.name}:{})),s.page=(0,o.Cl)((0,o.Cl)((0,o.Cl)({},e),i),s.page)},S=n(94968),k=function(t){function e(e,n){var r=t.call(this,"".concat(e," ").concat(n))||this;return r.field=e,r}return(0,o.C6)(e,t),e}(Error),H="is not a string",E="is not an object",I=function(t){var e,n;this.settings=t,this.createMessageId=t.createMessageId,this.onEventMethodCall=null!=(e=t.onEventMethodCall)?e:function(){},this.onFinishedEvent=null!=(n=t.onFinishedEvent)?n:function(){}},M=function(t){function e(e){var n=t.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat((0,v.v4)())},onEventMethodCall:function(t){var e=t.options;n.maybeUpdateAnonId(e)},onFinishedEvent:function(t){return n.addIdentity(t),t}})||this;return n.user=e,n}return(0,o.C6)(e,t),e.prototype.maybeUpdateAnonId=function(t){(null==t?void 0:t.anonymousId)&&this.user.anonymousId(t.anonymousId)},e.prototype.addIdentity=function(t){this.user.id()&&(t.userId=this.user.id()),this.user.anonymousId()&&(t.anonymousId=this.user.anonymousId())},e.prototype.track=function(e,n,r,i,o){var s=t.prototype.track.call(this,e,n,r,i);return C(s,o),s},e.prototype.page=function(e,n,r,i,o,s){var a=t.prototype.page.call(this,e,n,r,i,o);return C(a,s),a},e.prototype.screen=function(e,n,r,i,o,s){var a=t.prototype.screen.call(this,e,n,r,i,o);return C(a,s),a},e.prototype.identify=function(e,n,r,i,o){var s=t.prototype.identify.call(this,e,n,r,i);return C(s,o),s},e.prototype.group=function(e,n,r,i,o){var s=t.prototype.group.call(this,e,n,r,i);return C(s,o),s},e.prototype.alias=function(e,n,r,i,o){var s=t.prototype.alias.call(this,e,n,r,i);return C(s,o),s},e}(function(){function t(t){this.settings=new I(t)}return t.prototype.track=function(t,e,n,r){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize((0,o.Cl)((0,o.Cl)({},this.baseEvent()),{event:t,type:"track",properties:null!=e?e:{},options:(0,o.Cl)({},n),integrations:(0,o.Cl)({},r)}))},t.prototype.page=function(t,e,n,r,i){this.settings.onEventMethodCall({type:"page",options:r});var s,a={type:"page",properties:(0,o.Cl)({},n),options:(0,o.Cl)({},r),integrations:(0,o.Cl)({},i)};return null!==t&&(a.category=t,a.properties=null!=(s=a.properties)?s:{},a.properties.category=t),null!==e&&(a.name=e),this.normalize((0,o.Cl)((0,o.Cl)({},this.baseEvent()),a))},t.prototype.screen=function(t,e,n,r,i){this.settings.onEventMethodCall({type:"screen",options:r});var s={type:"screen",properties:(0,o.Cl)({},n),options:(0,o.Cl)({},r),integrations:(0,o.Cl)({},i)};return null!==t&&(s.category=t),null!==e&&(s.name=e),this.normalize((0,o.Cl)((0,o.Cl)({},this.baseEvent()),s))},t.prototype.identify=function(t,e,n,r){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize((0,o.Cl)((0,o.Cl)({},this.baseEvent()),{type:"identify",userId:t,traits:null!=e?e:{},options:(0,o.Cl)({},n),integrations:r}))},t.prototype.group=function(t,e,n,r){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize((0,o.Cl)((0,o.Cl)({},this.baseEvent()),{type:"group",traits:null!=e?e:{},options:(0,o.Cl)({},n),integrations:(0,o.Cl)({},r),groupId:t}))},t.prototype.alias=function(t,e,n,r){this.settings.onEventMethodCall({type:"alias",options:n});var i={userId:t,type:"alias",options:(0,o.Cl)({},n),integrations:(0,o.Cl)({},r)};return(null!==e&&(i.previousId=e),void 0===t)?this.normalize((0,o.Cl)((0,o.Cl)({},i),this.baseEvent())):this.normalize((0,o.Cl)((0,o.Cl)({},this.baseEvent()),i))},t.prototype.baseEvent=function(){return{integrations:{},options:{}}},t.prototype.context=function(t){var e,n=["userId","anonymousId","timestamp","messageId"];delete t.integrations;var r=Object.keys(t),i=null!=(e=t.context)?e:{},o={};return r.forEach(function(e){"context"!==e&&(n.includes(e)?(0,S.J)(o,e,t[e]):(0,S.J)(i,e,t[e]))}),[i,o]},t.prototype.normalize=function(t){var e,n,r,i=Object.keys(null!=(n=t.integrations)?n:{}).reduce(function(e,n){var r,i;return(0,o.Cl)((0,o.Cl)({},e),((r={})[n]=!!(null==(i=t.integrations)?void 0:i[n]),r))},{});e=t.options||{},t.options=Object.keys(e).filter(function(t){return function(t,e){return void 0!==e}(t,e[t])}).reduce(function(t,n){return t[n]=e[n],t},{});var a=(0,o.Cl)((0,o.Cl)({},i),null==(r=t.options)?void 0:r.integrations),u=t.options?this.context(t.options):[],c=u[0],l=u[1],h=t.options,d=(0,o.Tt)(t,["options"]),f=(0,o.Cl)((0,o.Cl)((0,o.Cl)((0,o.Cl)({timestamp:new Date},d),{context:c,integrations:a}),l),{messageId:h.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(f),!function(t){if(!(0,s.t2)(t))throw new k("Event","is nil");if("object"!=typeof t)throw new k("Event",E);if(!(0,s.Kg)(t.type))throw new k(".type",H);if(!(0,s.Kg)(t.messageId))throw new k(".messageId",H);if("track"===t.type){if(!(0,s.Kg)(t.event))throw new k(".event",H);if(!(0,s.Qd)(t.properties))throw new k(".properties",E)}["group","identify"].includes(t.type)&&function(t){if(!(0,s.Qd)(t.traits))throw new k(".traits",E)}(t)}(f),f},t}()),A=function(t){return"addMiddleware"in t&&"destination"===t.type},P=n(52006),j=n(4663),O=n(20550),Y=function(){var t,e,n=0;return{done:function(){return t},run:function(r){var i=r();return"object"==typeof i&&null!==i&&"then"in i&&"function"==typeof i.then&&(1==++n&&(t=new Promise(function(t){return e=t})),i.finally(function(){return 0==--n&&e()})),i}}},x=n(22687),N=function(t){function e(e){return t.call(this,"string"==typeof e?new P.x(4,e):e)||this}return(0,o.C6)(e,t),e.prototype.flush=function(){return(0,o.sH)(this,void 0,void 0,function(){return(0,o.YH)(this,function(e){return(0,h.a)()?[2,[]]:[2,t.prototype.flush.call(this)]})})},e}(function(t){function e(e){var n=t.call(this)||this;return n.criticalTasks=Y(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=e,n.queue.on(j.g,function(){n.scheduleFlush(0)}),n}return(0,o.C6)(e,t),e.prototype.register=function(t,e,n){return(0,o.sH)(this,void 0,void 0,function(){var r,i,s=this;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(this.plugins.push(e),r=function(n){s.failedInitializations.push(e.name),s.emit("initialization_failure",e),console.warn(e.name,n),t.log("warn","Failed to load destination",{plugin:e.name,error:n}),s.plugins=s.plugins.filter(function(t){return t!==e})},"destination"!==e.type||"Segment.io"===e.name)return[3,1];return e.load(t,n).catch(r),[3,4];case 1:return o.trys.push([1,3,,4]),[4,e.load(t,n)];case 2:return o.sent(),[3,4];case 3:return i=o.sent(),r(i),[3,4];case 4:return[2]}})})},e.prototype.deregister=function(t,e,n){return(0,o.sH)(this,void 0,void 0,function(){var r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(i.trys.push([0,3,,4]),!e.unload)return[3,2];return[4,Promise.resolve(e.unload(t,n))];case 1:i.sent(),i.label=2;case 2:return this.plugins=this.plugins.filter(function(t){return t.name!==e.name}),[3,4];case 3:return r=i.sent(),t.log("warn","Failed to unload destination",{plugin:e.name,error:r}),[3,4];case 4:return[2]}})})},e.prototype.dispatch=function(t){return(0,o.sH)(this,void 0,void 0,function(){var e;return(0,o.YH)(this,function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.push(t),e=this.subscribeToDelivery(t),this.scheduleFlush(0),[2,e]})})},e.prototype.subscribeToDelivery=function(t){return(0,o.sH)(this,void 0,void 0,function(){var e=this;return(0,o.YH)(this,function(n){return[2,new Promise(function(n){var r=function(i,o){i.isSame(t)&&(e.off("flush",r),n(i))};e.on("flush",r)})]})})},e.prototype.dispatchSingle=function(t){return(0,o.sH)(this,void 0,void 0,function(){var e=this;return(0,o.YH)(this,function(n){return t.log("debug","Dispatching"),t.stats.increment("message_dispatched"),this.queue.updateAttempts(t),t.attempts=1,[2,this.deliver(t).catch(function(n){return e.enqueuRetry(n,t)?e.subscribeToDelivery(t):(t.setFailedDelivery({reason:n}),t)})]})})},e.prototype.isEmpty=function(){return 0===this.queue.length},e.prototype.scheduleFlush=function(t){var e=this;void 0===t&&(t=500),this.flushing||(this.flushing=!0,setTimeout(function(){e.flush().then(function(){setTimeout(function(){e.flushing=!1,e.queue.length&&e.scheduleFlush(0)},0)})},t))},e.prototype.deliver=function(t){return(0,o.sH)(this,void 0,void 0,function(){var e,n,r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,this.criticalTasks.done()];case 1:o.sent(),e=Date.now(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,this.flushOne(t)];case 3:return t=o.sent(),n=Date.now()-e,this.emit("delivery_success",t),t.stats.gauge("delivered",n),t.log("debug","Delivered",t.event),[2,t];case 4:throw i=r=o.sent(),t.log("error","Failed to deliver",i),this.emit("delivery_failure",t,i),t.stats.increment("delivery_failed"),r;case 5:return[2]}})})},e.prototype.enqueuRetry=function(t,e){return!!(!(t instanceof O.d)||t.retry)&&this.queue.pushWithBackoff(e)},e.prototype.flush=function(){return(0,o.sH)(this,void 0,void 0,function(){var t,e;return(0,o.YH)(this,function(n){switch(n.label){case 0:if(0===this.queue.length||!(t=this.queue.pop()))return[2,[]];t.attempts=this.queue.getAttempts(t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.deliver(t)];case 2:return t=n.sent(),this.emit("flush",t,!0),[3,4];case 3:return e=n.sent(),this.enqueuRetry(e,t)||(t.setFailedDelivery({reason:e}),this.emit("flush",t,!1)),[2,[]];case 4:return[2,[t]]}})})},e.prototype.isReady=function(){return!0},e.prototype.availableExtensions=function(t){var e,n,r=(e="type",n={},this.plugins.filter(function(e){if("destination"!==e.type&&"Segment.io"!==e.name)return!0;var n,r,i,o=void 0;return null==(n=e.alternativeNames)||n.forEach(function(e){void 0!==t[e]&&(o=t[e])}),null!=(i=null!=(r=t[e.name])?r:o)?i:!1!==("Segment.io"===e.name||t.All)}).forEach(function(t){var r,i=void 0;if("string"==typeof e){var s=t[e];i="string"!=typeof s?JSON.stringify(s):s}else e instanceof Function&&(i=e(t));void 0!==i&&(n[i]=(0,o.fX)((0,o.fX)([],null!=(r=n[i])?r:[],!0),[t],!1))}),n),i=r.before,s=r.enrichment,a=r.destination,u=r.after;return{before:void 0===i?[]:i,enrichment:void 0===s?[]:s,destinations:void 0===a?[]:a,after:void 0===u?[]:u}},e.prototype.flushOne=function(t){var e,n;return(0,o.sH)(this,void 0,void 0,function(){var r,i,s,a,u,c,l,h,d,f,p,v,g;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(!this.isReady())throw Error("Not ready");t.attempts>1&&this.emit("delivery_retry",t),i=(r=this.availableExtensions(null!=(e=t.event.integrations)?e:{})).before,s=r.enrichment,a=0,u=i,o.label=1;case 1:if(!(a<u.length))return[3,4];return c=u[a],[4,(0,x.D)(t,c)];case 2:(l=o.sent())instanceof O.j&&(t=l),this.emit("message_enriched",t,c),o.label=3;case 3:return a++,[3,1];case 4:h=0,d=s,o.label=5;case 5:if(!(h<d.length))return[3,8];return f=d[h],[4,(0,x.C)(t,f)];case 6:(l=o.sent())instanceof O.j&&(t=l),this.emit("message_enriched",t,f),o.label=7;case 7:return h++,[3,5];case 8:return v=(p=this.availableExtensions(null!=(n=t.event.integrations)?n:{})).destinations,g=p.after,[4,new Promise(function(e,n){setTimeout(function(){Promise.all(v.map(function(e){return(0,x.C)(t,e)})).then(e).catch(n)},0)})];case 9:return o.sent(),t.stats.increment("message_delivered"),this.emit("message_delivered",t),[4,Promise.all(g.map(function(e){return(0,x.C)(t,e)}))];case 10:return o.sent(),[2,t]}})})},e}(p.v));function R(t){for(var e=t.constructor.prototype,n=0,r=Object.getOwnPropertyNames(e);n<r.length;n++){var i=r[n];if("constructor"!==i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);o&&"function"==typeof o.value&&(t[i]=t[i].bind(t))}}return t}var K={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"},L=function(t,e,n,r){console.warn("".concat(t.constructor.name,": Can't ").concat(e,' key "').concat(n,'" | Err: ').concat(r))},D=function(){function t(t){this.stores=t}return t.prototype.get=function(t){for(var e=null,n=0,r=this.stores;n<r.length;n++){var i=r[n];try{if(null!=(e=i.get(t)))return e}catch(e){L(i,"get",t,e)}}return null},t.prototype.set=function(t,e){this.stores.forEach(function(n){try{n.set(t,e)}catch(e){L(n,"set",t,e)}})},t.prototype.clear=function(t){this.stores.forEach(function(e){try{e.remove(t)}catch(n){L(e,"remove",t,n)}})},t.prototype.getAndSync=function(t){var e=this.get(t),n="number"==typeof e?e.toString():e;return this.set(t,n),n},t}(),q=function(){function t(){this.cache={}}return t.prototype.get=function(t){var e;return null!=(e=this.cache[t])?e:null},t.prototype.set=function(t,e){this.cache[t]=e},t.prototype.remove=function(t){delete this.cache[t]},t}();function T(t){return t&&t.stores&&Array.isArray(t.stores)&&t.stores.every(function(t){return Object.values(K).includes(t)})}function F(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}var U=function t(e,n){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=F({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var s in i)i[s]&&(o+="; "+s,!0!==i[s]&&(o+="="+i[s].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+o}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},i=0;i<n.length;i++){var o=n[i].split("="),s=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(r[a]=e.read(s,a),t===a)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){r(t,"",F({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,F({},this.attributes,e))},withConverter:function(e){return t(F({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});function z(t){var e=function(t){try{return new URL(t)}catch(t){return}}(t);if(e)for(var n=function(t){var e=t.hostname.split("."),n=e[e.length-1],r=[];if(4===e.length&&parseInt(n,10)>0||e.length<=1)return r;for(var i=e.length-2;i>=0;--i)r.push(e.slice(i).join("."));return r}(e),r=0;r<n.length;++r){var i="__tld__",o=n[r],s={domain:"."+o};try{if(U.set(i,"1",s),U.get(i))return U.remove(i,s),o}catch(t){return}}}var B=function(){function t(e){void 0===e&&(e=t.defaults),this.options=(0,o.Cl)((0,o.Cl)({},t.defaults),e)}return Object.defineProperty(t,"defaults",{get:function(){return{maxage:365,domain:z(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),t.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},t.prototype.get=function(t){var e;try{var n=U.get(t);if(null==n)return null;try{return null!=(e=JSON.parse(n))?e:null}catch(t){return null!=n?n:null}}catch(t){return null}},t.prototype.set=function(t,e){"string"==typeof e?U.set(t,e,this.opts()):null===e?U.remove(t,this.opts()):U.set(t,JSON.stringify(e),this.opts())},t.prototype.remove=function(t){return U.remove(t,this.opts())},t}(),Q=function(){function t(){}return t.prototype.localStorageWarning=function(t,e){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(e))},t.prototype.get=function(t){var e;try{var n=localStorage.getItem(t);if(null===n)return null;try{return null!=(e=JSON.parse(n))?e:null}catch(t){return null!=n?n:null}}catch(e){return this.localStorageWarning(t,"unavailable"),null}},t.prototype.set=function(t,e){try{localStorage.setItem(t,JSON.stringify(e))}catch(e){this.localStorageWarning(t,"full")}},t.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch(e){this.localStorageWarning(t,"unavailable")}},t}();function J(t){return t.map(function(t){var e,n;switch("object"==typeof t&&void 0!==t.name?(e=t.name,n=t.settings):e=t,e){case K.Cookie:return new B(n);case K.LocalStorage:return new Q;case K.Memory:return new q;default:throw Error("Unknown Store Type: ".concat(t))}})}function W(t,e){return t.map(function(t){return e&&t===K.Cookie?{name:t,settings:e}:t})}var X={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},V=function(){function t(t,e){void 0===t&&(t=X);var n,r,i,s,a=this;this.options={},this.id=function(t){if(a.options.disable)return null;var e=a.identityStore.getAndSync(a.idKey);void 0!==t&&(a.identityStore.set(a.idKey,t),t!==e&&null!==e&&null!==t&&a.anonymousId(null));var n=a.identityStore.getAndSync(a.idKey);if(n)return n;var r=a.legacyUserStore.get(X.cookie.oldKey);return r?"object"==typeof r?r.id:r:null},this.anonymousId=function(t){var e,n;if(a.options.disable)return null;if(void 0===t){var r=null!=(e=a.identityStore.getAndSync(a.anonKey))?e:null==(n=a.legacySIO())?void 0:n[0];if(r)return r}return null===t?a.identityStore.set(a.anonKey,null):a.identityStore.set(a.anonKey,null!=t?t:(0,v.v4)()),a.identityStore.getAndSync(a.anonKey)},this.traits=function(t){var e;if(!a.options.disable)return null===t&&(t={}),t&&a.traitsStore.set(a.traitsKey,null!=t?t:{}),null!=(e=a.traitsStore.get(a.traitsKey))?e:{}},this.options=(0,o.Cl)((0,o.Cl)({},X),t),this.cookieOptions=e,this.idKey=null!=(r=null==(n=t.cookie)?void 0:n.key)?r:X.cookie.key,this.traitsKey=null!=(s=null==(i=t.localStorage)?void 0:i.key)?s:X.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,e),this.legacyUserStore=this.createStorage(this.options,e,function(t){return t===K.Cookie}),this.traitsStore=this.createStorage(this.options,e,function(t){return t!==K.Cookie});var u=this.legacyUserStore.get(X.cookie.oldKey);u&&"object"==typeof u&&(u.id&&this.id(u.id),u.traits&&this.traits(u.traits)),R(this)}return t.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var e=t.split("----");return[e[0],e[1]]},t.prototype.identify=function(t,e){if(!this.options.disable){e=null!=e?e:{};var n=this.id();(null===n||n===t)&&(e=(0,o.Cl)((0,o.Cl)({},this.traits()),e)),t&&this.id(t),this.traits(e)}},t.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},t.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},t.prototype.load=function(){return new t(this.options,this.cookieOptions)},t.prototype.save=function(){return!0},t.prototype.createStorage=function(t,e,n){var r=[K.LocalStorage,K.Cookie,K.Memory];return t.disable?new D([]):t.persist?(void 0!==t.storage&&null!==t.storage&&T(t.storage)&&(r=t.storage.stores),t.localStorageFallbackDisabled&&(r=r.filter(function(t){return t!==K.LocalStorage})),n&&(r=r.filter(n)),new D(J(W(r,e)))):new D([new q])},t.defaults=X,t}(),G={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},Z=function(t){function e(e,n){void 0===e&&(e=G);var r=t.call(this,(0,o.Cl)((0,o.Cl)({},G),e),n)||this;return r.anonymousId=function(t){},R(r),r}return(0,o.C6)(e,t),e}(V),$=n(9984),tt=n(84070),te=n(78219),tn=n(41249),tr=function(t,e,n){n.getAndRemove(t).forEach(function(t){th(e,t).catch(console.error)})},ti=tr.bind(void 0,"on"),to=tr.bind(void 0,"setAnonymousId"),ts=function(t,e){Object.keys(e.calls).forEach(function(n){e.getAndRemove(n).forEach(function(e){setTimeout(function(){th(t,e).catch(console.error)},0)})})},ta=function(t){if(tu(t))return w(t.pop())},tu=function(t){var e=t[t.length-1];if("object"!==Object.prototype.toString.call(e).slice(8,-1).toLowerCase()||"bpc"!==e.__t)return!1;for(var n in e)if(!y.includes(n))return!1;return!0},tc=function(t,e,n,r){void 0===n&&(n=function(){}),void 0===r&&(r=console.error),this.method=t,this.resolve=n,this.reject=r,this.called=!1,this.args=e},tl=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._callMap={},this.add.apply(this,t)}return Object.defineProperty(t.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(t){this._callMap=t},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e;return null!=(e=this.calls[t])?e:[]},t.prototype.getAndRemove=function(t){var e=this.get(t);return this.calls[t]=[],e},t.prototype.add=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.forEach(function(e){["track","screen","alias","group","page","identify"].includes(e.method)&&!tu(e.args)&&(e.args=(0,o.fX)((0,o.fX)([],e.args,!0),[_()],!1)),t.calls[e.method]?t.calls[e.method].push(e):t.calls[e.method]=[e]})},t.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},t.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this.calls))},t.prototype._pushSnippetWindowBuffer=function(){if("npm"!==(0,tn.X)()){var t=(0,te.kJ)();if(Array.isArray(t)){var e=t.splice(0,t.length).map(function(t){return new tc(t[0],t.slice(1))});this.add.apply(this,e)}}},t}();function th(t,e){return(0,o.sH)(this,void 0,void 0,function(){var n,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:var o;if(i.trys.push([0,3,,4]),e.called)return[2,void 0];if(e.called=!0,!("object"==typeof(o=n=t[e.method].apply(t,e.args))&&null!==o&&"then"in o&&"function"==typeof o.then))return[3,2];return[4,n];case 1:i.sent(),i.label=2;case 2:return e.resolve(n),[3,4];case 3:return r=i.sent(),e.reject(r),[3,4];case 4:return[2]}})})}var td=function(){function t(t){var e=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=$.r,this._preInitBuffer=new tl,this._promise=t(this._preInitBuffer),this._promise.then(function(t){var n=t[0],r=t[1];e.instance=n,e.ctx=r}).catch(function(){})}return t.prototype.then=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).then.apply(t,e)},t.prototype.catch=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).catch.apply(t,e)},t.prototype.finally=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this._promise).finally.apply(t,e)},t.prototype._createMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?Promise.resolve((n=e.instance)[t].apply(n,r)):new Promise(function(n,i){e._preInitBuffer.add(new tc(t,r,n,i))})}},t.prototype._createChainableMethod=function(t){var e=this;return function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.instance?(n=e.instance)[t].apply(n,r):e._preInitBuffer.add(new tc(t,r)),e}},t}(),tf=n(79848),tp=n(37718),tv=function(t){var e=!1;window.addEventListener("pagehide",function(){e||t(e=!0)}),document.addEventListener("visibilitychange",function(){if("hidden"==document.visibilityState){if(e)return;e=!0}else e=!1;t(e)})},tg=function(t){function e(e,n){var r=t.call(this,e)||this;return r.retryTimeout=n,r.name="RateLimitError",r}return(0,o.C6)(e,t),e}(Error),ty=function(t){return(0,o.Cl)({"Content-Type":"text/plain"},"function"==typeof t?t():t)};function tm(t){return(encodeURI(JSON.stringify(t)).split(/%..|./).length-1)/1024}var tb=n(79462);function tw(t,e,n,r){var i=this;t||setTimeout(function(){return(0,o.sH)(i,void 0,void 0,function(){var t,i;return(0,o.YH)(this,function(s){switch(s.label){case 0:return t=!0,[4,function(t,e){return(0,o.sH)(this,void 0,void 0,function(){var n,r=this;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(n=[],(0,h.a)())return[2,e];return[4,(0,tb._)(function(){return e.length>0&&!(0,h.a)()},function(){return(0,o.sH)(r,void 0,void 0,function(){var r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(!(r=e.pop()))return[2];return[4,(0,x.C)(r,t)];case 1:return i.sent()instanceof d.o||n.push(r),[2]}})})})];case 1:return i.sent(),n.map(function(t){return e.pushWithBackoff(t)}),[2,e]}})})}(n,e)];case 1:return i=s.sent(),t=!1,e.todo>0&&r(t,i,n,r),[2]}})})},5e3*Math.random())}var t_=n(9540),tC=function(t){return"Segment.io"===t.name};function tS(t,e,n){window.addEventListener("pagehide",function(){c.push.apply(c,Array.from(l)),l.clear()});var r,i,s,a,u=null!=(i=null==e?void 0:e.apiKey)?i:"",c=t.options.disableClientPersistence?new j.M(t.queue.queue.maxAttempts,[]):new P.x(t.queue.queue.maxAttempts,"".concat(u,":dest-Segment.io")),l=new Set,f=null!=(s=null==e?void 0:e.apiHost)?s:t_.a,p=null!=(a=null==e?void 0:e.protocol)?a:"https",v="".concat(p,"://").concat(f),g=null==e?void 0:e.deliveryStrategy,y=g&&"strategy"in g&&"batching"===g.strategy?function(t,e){var n,r,i,s=[],a=!1,u=null!=(n=null==e?void 0:e.size)?n:10,c=null!=(r=null==e?void 0:e.timeout)?r:5e3,l=0;function h(n){if(0!==n.length){var r,i=null==(r=n[0])?void 0:r.writeKey,s=n.map(function(t){return t.sentAt,(0,o.Tt)(t,["sentAt"])});return(0,tp.h)("https://".concat(t,"/b"),{credentials:null==e?void 0:e.credentials,keepalive:(null==e?void 0:e.keepalive)||a,headers:ty(null==e?void 0:e.headers),method:"post",body:JSON.stringify({writeKey:i,batch:s,sentAt:new Date().toISOString()}),priority:null==e?void 0:e.priority}).then(function(t){var e;if(t.status>=500)throw Error("Bad response from server: ".concat(t.status));if(429===t.status){var n=null==(e=t.headers)?void 0:e.get("x-ratelimit-reset"),r="string"==typeof n?1e3*parseInt(n):c;throw new tg("Rate limit exceeded: ".concat(t.status),r)}})}}function f(t){var n;return void 0===t&&(t=1),(0,o.sH)(this,void 0,void 0,function(){var r;return(0,o.YH)(this,function(i){return s.length?(r=s,s=[],[2,null==(n=h(r))?void 0:n.catch(function(n){var i;d.o.system().log("error","Error sending batch",n),t<=(null!=(i=null==e?void 0:e.maxRetries)?i:10)&&("RateLimitError"===n.name&&(l=n.retryTimeout),s.push.apply(s,r),s.map(function(e){"_metadata"in e&&(e._metadata=(0,o.Cl)((0,o.Cl)({},e._metadata),{retryCount:t}))}),p(t+1))})]):[2]})})}function p(t){void 0===t&&(t=1),i||(i=setTimeout(function(){i=void 0,f(t).catch(console.error)},l||c),l=0)}return tv(function(t){if((a=t)&&s.length){var e,n;Promise.all((e=[],n=0,s.forEach(function(t){tm(e[n])>=64&&n++,e[n]?e[n].push(t):e[n]=[t]}),e).map(h)).catch(console.error)}}),{dispatch:function(t,n){return(0,o.sH)(this,void 0,void 0,function(){return(0,o.YH)(this,function(t){return s.push(n),[2,s.length>=u||tm(s)>=450||(null==e?void 0:e.keepalive)&&tm(s)>=54||a?f():p()]})})}}}(f,g.config):(r=null==g?void 0:g.config,{dispatch:function(t,e){return(0,tp.h)(t,{credentials:null==r?void 0:r.credentials,keepalive:null==r?void 0:r.keepalive,headers:ty(null==r?void 0:r.headers),method:"post",body:JSON.stringify(e),priority:null==r?void 0:r.priority}).then(function(t){var e;if(t.status>=500)throw Error("Bad response from server: ".concat(t.status));if(429===t.status){var n=null==(e=t.headers)?void 0:e.get("x-ratelimit-reset"),r=n?1e3*parseInt(n):5e3;throw new tg("Rate limit exceeded: ".concat(t.status),r)}})}});function m(r){return(0,o.sH)(this,void 0,void 0,function(){var i,s;return(0,o.YH)(this,function(a){var u,d,f,p,g,m;return(0,h.a)()?(c.push(r),tw(!1,c,b,tw),[2,r]):(l.add(r),i=r.event.type.charAt(0),s=(0,tf.W)(r.event).json(),"track"===r.event.type&&delete s.traits,"alias"===r.event.type&&(u=s,m=t.user(),u.previousId=null!=(p=null!=(f=null!=(d=u.previousId)?d:u.from)?f:m.id())?p:m.anonymousId(),u.userId=null!=(g=u.userId)?g:u.to,delete u.from,delete u.to,s=u),c.getAttempts(r)>=c.maxAttempts)?(l.delete(r),[2,r]):[2,y.dispatch("".concat(v,"/").concat(i),function(t,e,n,r,i){var s,a=t.user();delete e.options,e.writeKey=null==n?void 0:n.apiKey,e.userId=e.userId||a.id(),e.anonymousId=e.anonymousId||a.anonymousId(),e.sentAt=new Date;var u=t.queue.failedInitializations||[];u.length>0&&(e._metadata={failedInitializations:u}),null!=i&&(i.attempts>1&&(e._metadata=(0,o.Cl)((0,o.Cl)({},e._metadata),{retryCount:i.attempts})),i.attempts++);var c=[],l=[];for(var h in r){var d=r[h];"Segment.io"===h&&c.push(h),"bundled"===d.bundlingStatus&&c.push(h),"unbundled"===d.bundlingStatus&&l.push(h)}for(var f=0,p=(null==n?void 0:n.unbundledIntegrations)||[];f<p.length;f++){var v=p[f];l.includes(v)||l.push(v)}var g=null!=(s=null==n?void 0:n.maybeBundledConfigIds)?s:{},y=[];return c.sort().forEach(function(t){var e;(null!=(e=g[t])?e:[]).forEach(function(t){y.push(t)})}),(null==n?void 0:n.addBundledMetadata)!==!1&&(e._metadata=(0,o.Cl)((0,o.Cl)({},e._metadata),{bundled:c.sort(),unbundled:l.sort(),bundledIds:y})),e}(t,s,e,n,r)).then(function(){return r}).catch(function(t){if(r.log("error","Error sending event",t),"RateLimitError"===t.name){var e=t.retryTimeout;c.pushWithBackoff(r,e)}else c.pushWithBackoff(r);return tw(!1,c,b,tw),r}).finally(function(){l.delete(r)})]})})}var b={metadata:{writeKey:u,apiHost:f,protocol:p},name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:m,identify:m,page:m,alias:m,group:m,screen:m};return c.todo&&tw(!1,c,b,tw),b}var tk="This is being deprecated and will be not be available in future releases of Analytics JS",tH=(0,tt.m)(),tE=null==tH?void 0:tH.analytics,tI=function(){function t(t,e){var n;this.timeout=300,this._getSegmentPluginMetadata=function(){var t;return null==(t=e.plugins.find(tC))?void 0:t.metadata},this.writeKey=t.writeKey,this.cdnSettings=null!=(n=t.cdnSettings)?n:{integrations:{"Segment.io":{apiKey:""}}},this.cdnURL=t.cdnURL}return Object.defineProperty(t.prototype,"apiHost",{get:function(){var t,e;return null==(e=null==(t=this._getSegmentPluginMetadata)?void 0:t.call(this))?void 0:e.apiHost},enumerable:!1,configurable:!0}),t}();function tM(){console.warn(tk)}var tA=function(t){function e(e,n,r,i,s){var a,u,c,l,h,d,f=this;(f=t.call(this)||this)._debug=!1,f.initialized=!1,f.user=function(){return f._user},f.init=f.initialize.bind(f),f.log=tM,f.addIntegrationMiddleware=tM,f.listeners=tM,f.addEventListener=tM,f.removeAllListeners=tM,f.removeListener=tM,f.removeEventListener=tM,f.hasListeners=tM,f.add=tM,f.addIntegration=tM;var p=null==n?void 0:n.cookie,v=null!=(h=null==n?void 0:n.disableClientPersistence)&&h;f.queue=null!=r?r:(a="".concat(e.writeKey,":event-queue"),void 0===(u=null==n?void 0:n.retryQueue)&&(u=!1),void 0===(c=v)&&(c=!1),l=u?10:1,new N(c?new j.M(l,[]):new P.x(l,a))),f.settings=new tI(e,f.queue);var g=null==n?void 0:n.storage;return f._universalStorage=f.createStore(v,g,p),f._user=null!=i?i:new V((0,o.Cl)({persist:!v,storage:null==n?void 0:n.storage},null==n?void 0:n.user),p).load(),f._group=null!=s?s:new Z((0,o.Cl)({persist:!v,storage:null==n?void 0:n.storage},null==n?void 0:n.group),p).load(),f.eventFactory=new M(f._user),f.integrations=null!=(d=null==n?void 0:n.integrations)?d:{},f.options=null!=n?n:{},R(f),f}return(0,o.C6)(e,t),e.prototype.createStore=function(t,e,n){return new D(t?[new q]:e&&T(e)?J(W(e.stores,n)):J([K.LocalStorage,{name:K.Cookie,settings:n},K.Memory]))},Object.defineProperty(e.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),e.prototype.track=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e,n,r,i,s,u,c,l=this;return(0,o.YH)(this,function(o){return e=ta(t),r=(n=a.apply(void 0,t))[0],i=n[1],s=n[2],u=n[3],c=this.eventFactory.track(r,i,s,this.integrations,e),[2,this._dispatch(c,u).then(function(t){return l.emit("track",r,t.event.properties,t.event.options),t})]})})},e.prototype.page=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e,n,r,i,s,a,c,l,h=this;return(0,o.YH)(this,function(o){return e=ta(t),r=(n=u.apply(void 0,t))[0],i=n[1],s=n[2],a=n[3],c=n[4],l=this.eventFactory.page(r,i,s,a,this.integrations,e),[2,this._dispatch(l,c).then(function(t){return h.emit("page",r,i,t.event.properties,t.event.options),t})]})})},e.prototype.identify=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e,n,r,i,s,a,u,l=this;return(0,o.YH)(this,function(o){return e=ta(t),r=(n=c(this._user).apply(void 0,t))[0],i=n[1],s=n[2],a=n[3],this._user.identify(r,i),u=this.eventFactory.identify(this._user.id(),this._user.traits(),s,this.integrations,e),[2,this._dispatch(u,a).then(function(t){return l.emit("identify",t.event.userId,t.event.traits,t.event.options),t})]})})},e.prototype.group=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ta(e);if(0===e.length)return this._group;var i=c(this._group).apply(void 0,e),o=i[0],s=i[1],a=i[2],u=i[3];this._group.identify(o,s);var l=this._group.id(),h=this._group.traits(),d=this.eventFactory.group(l,h,a,this.integrations,r);return this._dispatch(d,u).then(function(e){return t.emit("group",e.event.groupId,e.event.traits,e.event.options),e})},e.prototype.alias=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e,n,r,i,s,a,u,c=this;return(0,o.YH)(this,function(o){return e=ta(t),r=(n=l.apply(void 0,t))[0],i=n[1],s=n[2],a=n[3],u=this.eventFactory.alias(r,i,s,this.integrations,e),[2,this._dispatch(u,a).then(function(t){return c.emit("alias",r,i,t.event.options),t})]})})},e.prototype.screen=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e,n,r,i,s,a,c,l,h=this;return(0,o.YH)(this,function(o){return e=ta(t),r=(n=u.apply(void 0,t))[0],i=n[1],s=n[2],a=n[3],c=n[4],l=this.eventFactory.screen(r,i,s,a,this.integrations,e),[2,this._dispatch(l,c).then(function(t){return h.emit("screen",r,i,t.event.properties,t.event.options),t})]})})},e.prototype.trackClick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,n.e(80248).then(n.bind(n,95951))];case 1:return[2,(e=r.sent().link).call.apply(e,(0,o.fX)([this],t,!1))]}})})},e.prototype.trackLink=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,n.e(80248).then(n.bind(n,95951))];case 1:return[2,(e=r.sent().link).call.apply(e,(0,o.fX)([this],t,!1))]}})})},e.prototype.trackSubmit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,n.e(80248).then(n.bind(n,95951))];case 1:return[2,(e=r.sent().form).call.apply(e,(0,o.fX)([this],t,!1))]}})})},e.prototype.trackForm=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,n.e(80248).then(n.bind(n,95951))];case 1:return[2,(e=r.sent().form).call.apply(e,(0,o.fX)([this],t,!1))]}})})},e.prototype.register=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e,n=this;return(0,o.YH)(this,function(r){switch(r.label){case 0:return e=d.o.system(),[4,Promise.all(t.map(function(t){return n.queue.register(e,t,n)}))];case 1:return r.sent(),[2,e]}})})},e.prototype.deregister=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,o.sH)(this,void 0,void 0,function(){var e,n=this;return(0,o.YH)(this,function(r){switch(r.label){case 0:return e=d.o.system(),[4,Promise.all(t.map(function(t){var r=n.queue.plugins.find(function(e){return e.name===t});if(r)return n.queue.deregister(e,r,n);e.log("warn","plugin ".concat(t," not found"))}))];case 1:return r.sent(),[2,e]}})})},e.prototype.debug=function(t){return!1===t&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=t,this},e.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},e.prototype.timeout=function(t){this.settings.timeout=t},e.prototype._dispatch=function(t,e){return(0,o.sH)(this,void 0,void 0,function(){var n;return(0,o.YH)(this,function(r){return((n=new d.o(t)).stats.increment("analytics_js.invoke",1,[t.type]),(0,h.a)()&&!this.options.retryQueue)?[2,n]:[2,function(t,e,n,r){return(0,o.sH)(this,void 0,void 0,function(){var i,s;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(n.emit("dispatch_start",t),i=Date.now(),!e.isEmpty())return[3,2];return[4,e.dispatchSingle(t)];case 1:return s=o.sent(),[3,4];case 2:return[4,e.dispatch(t)];case 3:s=o.sent(),o.label=4;case 4:var a,u;if(!(null==r?void 0:r.callback))return[3,6];return[4,(0,f.w_)(s,r.callback,(a=i,Math.max((null!=(u=r.timeout)?u:300)-(Date.now()-a),0)))];case 5:s=o.sent(),o.label=6;case 6:return(null==r?void 0:r.debug)&&s.flush(),[2,s]}})})}(n,this.queue,this,{callback:e,debug:this._debug,timeout:this.settings.timeout})]})})},e.prototype.addSourceMiddleware=function(t){return(0,o.sH)(this,void 0,void 0,function(){var e=this;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,this.queue.criticalTasks.run(function(){return(0,o.sH)(e,void 0,void 0,function(){var e,r,i;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,n.e(42751).then(n.bind(n,68604))];case 1:return e=o.sent().sourceMiddlewarePlugin,r={},this.queue.plugins.forEach(function(t){if("destination"===t.type)return r[t.name]=!0}),i=e(t,r),[4,this.register(i)];case 2:return o.sent(),[2]}})})})];case 1:return r.sent(),[2,this]}})})},e.prototype.addDestinationMiddleware=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.queue.plugins.filter(A).forEach(function(n){("*"===t||n.name.toLowerCase()===t.toLowerCase())&&n.addMiddleware.apply(n,e)}),Promise.resolve(this)},e.prototype.setAnonymousId=function(t){return this._user.anonymousId(t)},e.prototype.queryString=function(t){return(0,o.sH)(this,void 0,void 0,function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:if(!1===this.options.useQueryString)return[2,[]];return[4,n.e(97538).then(n.bind(n,50725))];case 1:return[2,(0,e.sent().queryString)(this,t)]}})})},e.prototype.use=function(t){return t(this),this},e.prototype.ready=function(t){return void 0===t&&(t=function(t){return t}),(0,o.sH)(this,void 0,void 0,function(){return(0,o.YH)(this,function(e){return[2,Promise.all(this.queue.plugins.map(function(t){return t.ready?t.ready():Promise.resolve()})).then(function(e){return t(e),e})]})})},e.prototype.noConflict=function(){return console.warn(tk),(0,te.Ud)(null!=tE?tE:this),this},e.prototype.normalize=function(t){return console.warn(tk),this.eventFactory.normalize(t)},Object.defineProperty(e.prototype,"failedInitializations",{get:function(){return console.warn(tk),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"VERSION",{get:function(){return $.r},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t,e){return(0,o.sH)(this,void 0,void 0,function(){return(0,o.YH)(this,function(t){return console.warn(tk),[2,Promise.resolve(this)]})})},e.prototype.pageview=function(t){return(0,o.sH)(this,void 0,void 0,function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return console.warn(tk),[4,this.page({path:t})];case 1:return e.sent(),[2,this]}})})},Object.defineProperty(e.prototype,"plugins",{get:function(){var t;return console.warn(tk),null!=(t=this._plugins)?t:{}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Integrations",{get:function(){return console.warn(tk),this.queue.plugins.filter(function(t){return"destination"===t.type}).reduce(function(t,e){var n="".concat(e.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),r=window[n];if(!r)return t;var i=r.Integration;return i?t[e.name]=i:t[e.name]=r,t},{})},enumerable:!1,configurable:!0}),e.prototype.push=function(t){var e=t.shift();(!e||this[e])&&this[e].apply(this,t)},e}(p.v),tP=function(t){function e(){var e=t.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return e.initialized=!0,e}return(0,o.C6)(e,t),e}(tA),tj=n(40459);function tO(){return void 0!==tj&&tj.env?tj.env:{}}var tY=n(45599),tx=n(11345),tN=n(21407),tR=n(25461),tK=function(t){try{var e=new URLSearchParams;return Object.entries(t).forEach(function(t){var n=t[0],r=t[1];Array.isArray(r)?r.forEach(function(t){return e.append(n,t)}):e.append(n,r)}),e.toString()}catch(t){return""}},tL=new function(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(e,n){return(0,o.sH)(t,void 0,void 0,function(){var t;return(0,o.YH)(this,function(e){switch(e.label){case 0:this.instance=n,e.label=1;case 1:return e.trys.push([1,3,,4]),t=this,[4,function(t){return(0,o.sH)(this,void 0,void 0,function(){var e;return(0,o.YH)(this,function(n){return(e=navigator.userAgentData)?t?[2,e.getHighEntropyValues(t).catch(function(){return e.toJSON()})]:[2,e.toJSON()]:[2,void 0]})})}(this.instance.options.highEntropyValuesClientHints)];case 2:return t.userAgentData=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(e){var n,i,s,a,u,c,l=e.event.context,h=l.page.search||"",d="object"==typeof h?tK(h):h;l.userAgent=navigator.userAgent,l.userAgentData=t.userAgentData;var f=navigator.userLanguage||navigator.language;void 0===l.locale&&void 0!==f&&(l.locale=f),null!=l.library||(l.library={name:"analytics.js",version:"".concat("web"===(0,tn.X)()?"next":"npm:next","-").concat($.r)}),d&&!l.campaign&&((n=d).startsWith("?")&&(n=n.substring(1)),l.campaign=(n=n.replace(/\?/g,"&")).split("&").reduce(function(t,e){var n=e.split("="),r=n[0],i=n[1];if(r.includes("utm_")&&r.length>4){var o=r.slice(4);"campaign"===o&&(o="name"),t[o]=(0,tR.p)(void 0===i?"":i)}return t},{}));var p=function(){var t=U.get("_ga");if(t&&t.startsWith("amp"))return t}();p&&(l.amp={id:p}),a=(s=new D(null!=(c=t.instance.options.disableClientPersistence)&&c?[]:[new B(function(){if(r)return r;var t=z(window.location.href);return r={expires:31536e6,secure:!1,path:"/"},t&&(r.domain=t),r}())])).get("s:context.referrer"),(u=null!=(i=function(t){var e={btid:"dataxu",urid:"millennial-media"};t.startsWith("?")&&(t=t.substring(1));for(var n=(t=t.replace(/\?/g,"&")).split("&"),r=0;r<n.length;r++){var i=n[r].split("="),o=i[0],s=i[1];if(e[o])return{id:s,type:e[o]}}}(d))?i:a)&&(l&&(l.referrer=(0,o.Cl)((0,o.Cl)({},l.referrer),u)),s.set("s:context.referrer",u));try{l.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){}return e},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich},tD=n(82714),tq=n(68604),tT=n(45214),tF=function(){function t(t,e){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=(0,tN.u)(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=e,this.name=t,this.type=e.type,this.alternativeNames.push(e.name)}return t.prototype.addMiddleware=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];"destination"===this.type&&(t=this.middleware).push.apply(t,e)},t.prototype.transform=function(t){return(0,o.sH)(this,void 0,void 0,function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,(0,tq.applyDestinationMiddleware)(this.name,t.event,this.middleware)];case 1:return null===(e=n.sent())&&t.cancel(new O.d({retry:!1,reason:"dropped by destination middleware"})),[2,new d.o(e)]}})})},t.prototype._createMethod=function(t){var e=this;return function(n){return(0,o.sH)(e,void 0,void 0,function(){var e,r;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(!this.action[t])return[2,n];if(e=n,"destination"!==this.type)return[3,2];return[4,this.transform(n)];case 1:e=i.sent(),i.label=2;case 2:return i.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!i.sent())throw Error("Something prevented the destination from getting ready");return(0,tT.y)(n,{integrationName:this.action.name,methodName:t,type:"action"}),[4,this.action[t](e)];case 4:return i.sent(),[3,6];case 5:throw r=i.sent(),(0,tT.y)(n,{integrationName:this.action.name,methodName:t,type:"action",didError:!0}),r;case 6:return[2,n]}})})}},t.prototype.isLoaded=function(){return this.action.isLoaded()},t.prototype.ready=function(){return(0,o.sH)(this,void 0,void 0,function(){return(0,o.YH)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})},t.prototype.load=function(t,e){return(0,o.sH)(this,void 0,void 0,function(){var n,r,i,s;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];o.label=1;case 1:return o.trys.push([1,3,,4]),(0,tT.y)(t,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(t,e),i=(r=this.loadPromise).resolve,[4,n];case 2:return i.apply(r,[o.sent()]),[2,n];case 3:throw s=o.sent(),(0,tT.y)(t,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(s),s;case 4:return[2]}})})},t.prototype.unload=function(t,e){var n,r;return null==(r=(n=this.action).unload)?void 0:r.call(n,t,e)},t}(),tU=(0,tt.m)(),tz=null!=(i=tU.__SEGMENT_INSPECTOR__)?i:tU.__SEGMENT_INSPECTOR__={},tB=function(t){var e;return null==(e=tz.attach)?void 0:e.call(tz,t)},tQ=n(43850),tJ=function(){var t,e,n=null!=(t=window.location.hash)?t:"",r=null!=(e=window.location.search)?e:"";return r.length?r:n.replace(/(?=#).*(?=\?)/,"")},tW=function(t){function e(){var e=this,r=(0,tN.u)(),i=r.promise,s=r.resolve;return(e=t.call(this,function(t){return i.then(function(e){return function(t,e,r){var i,s,a,u,c,l,h,f,p;return void 0===e&&(e={}),(0,o.sH)(this,void 0,void 0,function(){var v,g,y,m,b,w,_,C,S,k;return(0,o.YH)(this,function(H){switch(H.label){case 0:if(!0===e.disable)return[2,[new tP,d.o.system()]];if(e.globalAnalyticsKey&&(0,te.rY)(e.globalAnalyticsKey),t.cdnURL&&(0,tY.qQ)(t.cdnURL),e.initialPageview&&r.add(new tc("page",[])),v=tJ(),g=null!=(i=t.cdnURL)?i:(0,tY.I2)(),null==(s=t.cdnSettings))return[3,1];return m=s,[3,3];case 1:var E,I;return[4,(E=t.writeKey,I=g,(0,tp.h)("".concat(I,"/v1/projects/").concat(E,"/settings")).then(function(t){return t.ok?t.json():t.text().then(function(t){throw Error(t)})}).catch(function(t){throw console.error(t.message),t}))];case 2:m=H.sent(),H.label=3;case 3:if(y=m,e.updateCDNSettings&&(y=e.updateCDNSettings(y)),"function"!=typeof e.disable)return[3,5];return[4,e.disable(y)];case 4:if(H.sent())return[2,[new tP,d.o.system()]];H.label=5;case 5:return b=null==(u=null==(a=y.integrations["Segment.io"])?void 0:a.retryQueue)||u,e=(0,o.Cl)({retryQueue:b},e),tB(w=new tA((0,o.Cl)((0,o.Cl)({},t),{cdnSettings:y,cdnURL:g}),e)),_=null!=(c=t.plugins)?c:[],C=null!=(l=t.classicIntegrations)?l:[],S=null==(h=e.integrations)?void 0:h["Segment.io"],tQ.U.initRemoteMetrics((0,o.Cl)((0,o.Cl)({},y.metrics),{host:null!=(f=null==S?void 0:S.apiHost)?f:null==(p=y.metrics)?void 0:p.host,protocol:null==S?void 0:S.protocol})),[4,function(t,e,r,i,s,a,u){var c,l,h;return void 0===s&&(s=[]),(0,o.sH)(this,void 0,void 0,function(){var d,f,p,v,g,y,m,b,w,_,C,S,k,H,E=this;return(0,o.YH)(this,function(I){var M,A,P;switch(I.label){case 0:if(to(r,u),ti(r,u),d=null==s?void 0:s.filter(function(t){return"object"==typeof t}),f=null==s?void 0:s.filter(function(t){return"function"==typeof t&&"string"==typeof t.pluginName}),"test"===tO().NODE_ENV||!((null!=(P=null==(A=null==(M=e.middlewareSettings)?void 0:M.routingRules)?void 0:A.length)?P:0)>0))return[3,2];return[4,Promise.all([n.e(34012),n.e(69010)]).then(n.bind(n,37789)).then(function(t){return t.tsubMiddleware(e.middlewareSettings.routingRules)})];case 1:return v=I.sent(),[3,3];case 2:v=void 0,I.label=3;case 3:if(p=v,("test"===tO().NODE_ENV||!(Object.keys(e.integrations).length>1))&&!(a.length>0))return[3,5];return[4,Promise.all([n.e(24430),n.e(5706),n.e(35050)]).then(n.bind(n,44118)).then(function(n){return n.ajsDestinations(t,e,r.integrations,i,p,a)})];case 4:return y=I.sent(),[3,6];case 5:y=[],I.label=6;case 6:if(g=y,!e.legacyVideoPluginsEnabled)return[3,8];return[4,n.e(19694).then(n.bind(n,67884)).then(function(t){return t.loadLegacyVideoPlugins(r)})];case 7:I.sent(),I.label=8;case 8:if(!(null==(c=i.plan)?void 0:c.track))return[3,10];return[4,n.e(3104).then(n.bind(n,93398)).then(function(t){var n;return t.schemaFilter(null==(n=i.plan)?void 0:n.track,e)})];case 9:return b=I.sent(),[3,11];case 10:b=void 0,I.label=11;case 11:return m=b,w=(0,tx.J)(e,i),[4,(function(t,e,n,r,i,s){var a,u,c;return(0,o.sH)(this,void 0,void 0,function(){var l,h,d=this;return(0,o.YH)(this,function(f){switch(f.label){case 0:return l=[],h=null!=(u=null==(a=t.middlewareSettings)?void 0:a.routingRules)?u:[],[4,Promise.all((null!=(c=t.remotePlugins)?c:[]).map(function(t){return(0,o.sH)(d,void 0,void 0,function(){var a,u,c,d,f,p;return(0,o.YH)(this,function(v){switch(v.label){case 0:var g,y;if(g=e[t.creationName],y=e[t.name],!1===e.All&&!g&&!y||!1===g||!1===y||0)return[2];v.label=1;case 1:if(v.trys.push([1,6,,7]),u=null==s?void 0:s.find(function(e){return e.pluginName===t.name}))return[3,3];return[4,function(t,e){return(0,o.sH)(this,void 0,void 0,function(){var n,r,i,s,a,u;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(o.trys.push([0,9,,10]),n=RegExp("https://cdn.segment.(com|build)"),r=(0,tY.I2)(),!e)return[3,6];s=(i=t.url.split("/"))[i.length-2],a=t.url.replace(s,btoa(s).replace(/=/g,"")),o.label=1;case 1:return o.trys.push([1,3,,5]),[4,(0,tD.k)(a.replace(n,r))];case 2:case 4:return o.sent(),[3,5];case 3:return o.sent(),[4,(0,tD.k)(t.url.replace(n,r))];case 5:return[3,8];case 6:return[4,(0,tD.k)(t.url.replace(n,r))];case 7:o.sent(),o.label=8;case 8:if("function"==typeof window[t.libraryName])return[2,window[t.libraryName]];return[3,10];case 9:throw u=o.sent(),console.error("Failed to create PluginFactory",t),u;case 10:return[2]}})})}(t,null==r?void 0:r.obfuscate)];case 2:u=v.sent(),v.label=3;case 3:if(!(a=u))return[3,5];return c=n[t.name],[4,a((0,o.Cl)((0,o.Cl)({},t.settings),c))];case 4:!function(t){if(!Array.isArray(t))throw Error("Not a valid list of plugins");var e=["load","isLoaded","name","version","type"];t.forEach(function(t){e.forEach(function(e){var n;if(void 0===t[e])throw Error("Plugin: ".concat(null!=(n=t.name)?n:"unknown"," missing required function ").concat(e))})})}(f=Array.isArray(d=v.sent())?d:[d]),p=h.filter(function(e){return e.destinationName===t.creationName}),f.forEach(function(e){var n=new tF(t.creationName,e);p.length&&i&&n.addMiddleware(i),l.push(n)}),v.label=5;case 5:return[3,7];case 6:return console.warn("Failed to load Remote Plugin",v.sent()),[3,7];case 7:return[2]}})})}))];case 1:return f.sent(),[2,l.filter(Boolean)]}})})})(e,r.integrations,w,i,p,f).catch(function(){return[]})];case 12:if(_=I.sent(),C=(0,o.fX)((0,o.fX)([tL],g,!0),_,!0),m&&C.push(m),(null==(l=i.integrations)?void 0:l.All)===!1&&!i.integrations["Segment.io"]||i.integrations&&!1===i.integrations["Segment.io"])return[3,14];return k=(S=C).push,[4,tS(r,w["Segment.io"],e.integrations)];case 13:k.apply(S,[I.sent()]),I.label=14;case 14:return[4,r.register.apply(r,(0,o.fX)((0,o.fX)([],C,!1),d,!1))];case 15:return H=I.sent(),[4,(0,o.sH)(void 0,void 0,void 0,function(){var t,e;return(0,o.YH)(this,function(n){switch(n.label){case 0:t=0,e=u.getAndRemove("register"),n.label=1;case 1:if(!(t<e.length))return[3,4];return[4,th(r,e[t]).catch(console.error)];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})];case 16:if(I.sent(),!Object.entries(null!=(h=e.enabledMiddleware)?h:{}).some(function(t){return t[1]}))return[3,18];return[4,n.e(20521).then(n.bind(n,15615)).then(function(t){var n=t.remoteMiddlewares;return(0,o.sH)(E,void 0,void 0,function(){return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,n(H,e,i.obfuscate)];case 1:return[2,Promise.all(t.sent().map(function(t){return r.addSourceMiddleware(t)}))]}})})})];case 17:I.sent(),I.label=18;case 18:return[4,(0,o.sH)(void 0,void 0,void 0,function(){var t,e;return(0,o.YH)(this,function(n){switch(n.label){case 0:t=0,e=u.getAndRemove("addSourceMiddleware"),n.label=1;case 1:if(!(t<e.length))return[3,4];return[4,th(r,e[t]).catch(console.error)];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}})})];case 19:return I.sent(),[2,H]}})})}(t.writeKey,y,w,e,_,C,r)];case 6:return k=H.sent(),w.initialized=!0,w.emit("initialize",t,e),[4,function(t,e,n){return(0,o.sH)(this,void 0,void 0,function(){return(0,o.YH)(this,function(r){switch(r.label){case 0:var i,s;return[4,(i=t,s=e,(0,o.sH)(void 0,void 0,void 0,function(){return(0,o.YH)(this,function(t){switch(t.label){case 0:if(!s.includes("ajs_"))return[3,2];return[4,i.queryString(s).catch(console.error)];case 1:t.sent(),t.label=2;case 2:return[2]}})}))];case 1:return r.sent(),ts(t,n),[2]}})})}(w,v,r)];case 7:return H.sent(),[2,[w,k]]}})})}(e[0],e[1],t)})})||this)._resolveLoadStart=function(t,e){return s([t,e])},e}return(0,o.C6)(e,t),e.prototype.load=function(t,e){return void 0===e&&(e={}),this._resolveLoadStart(t,e),this},e.load=function(t,n){return void 0===n&&(n={}),new e().load(t,n)},e.standalone=function(t,n){return e.load({writeKey:t},n).then(function(t){return t[0]})},e}(td),tX=function(){function t(){}return t.load=function(){return Promise.reject(Error("AnalyticsNode is not available in browsers."))},t}()},93411:(t,e,n)=>{function r(t,e){return new Promise(function(n,r){var i=setTimeout(function(){r(Error("Promise timed out"))},e);t.then(function(t){return clearTimeout(i),n(t)}).catch(r)})}function i(t,e,n){var i=function(){try{return Promise.resolve(e(t))}catch(t){return Promise.reject(t)}};return new Promise(function(t){return setTimeout(t,n)}).then(function(){return r(i(),1e3)}).catch(function(e){null==t||t.log("warn","Callback Error",{error:e}),null==t||t.stats.increment("callback_error")}).then(function(){return t})}n.d(e,{s2:()=>r,w_:()=>i})}}]);