"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[62586],{62586:(e,t,i)=>{i.r(t),i.d(t,{render:()=>s});var a=i(42613),r=i(41985),d=i(45541),n=(0,a.K)((e,t,{parentById:i})=>{let a=new Set,r=e;if(e===t)return i[e]||"root";for(;r;){if(a.add(r),r===t)return r;r=i[r]}for(r=t;r;){if(a.has(r))return r;r=i[r]}return"root"},"findCommonAncestor"),s=(0,a.K)(async(e,t,{common:i,getConfig:s,insertCluster:l,insertEdge:o,insertEdgeLabel:h,insertMarkers:c,insertNode:y,interpolateToCurve:g,labelHelper:p,log:u,positionEdgeLabel:f},{algorithm:w})=>{let x={},b={},m=(0,a.K)(async(e,t,i,a)=>{let r={width:0,height:0},d=s();if(a.isGroup){let n={...a,children:[]};if(t.children.push(n),x[a.id]=n,await k(e,i,n,a.id),a.label){let{shapeSvg:t,bbox:i}=await p(e,a,void 0,!0);r.width=i.width,r.wrappingWidth=d.flowchart.wrappingWidth,r.height=i.height-2,r.labelNode=t.node(),t.remove()}else r.width=0,r.height=0;n.labelData=r,n.domId=e}else{let i={...a};t.children.push(i),x[a.id]=i;let r=await y(e,a,{config:d,dir:a.dir}),n=r.node().getBBox();i.domId=r,i.width=n.width,i.height=n.height}},"addVertex"),k=(0,a.K)(async function(e,t,i,a){let r=t.filter(e=>e?.parentId===a);return u.info("addVertices APA12",r,a),await Promise.all(r.map(async a=>{await m(e,i,t,a)})),i},"addVertices"),I=(0,a.K)(async(e,t,i,a,r,d)=>{await Promise.all(i.map(async function(i){if(i)if(x[i.id]=i,x[i.id].offset={posX:i.x+e,posY:i.y+t,x:e,y:t,depth:d,width:Math.max(i.width,i.labels&&i.labels[0]?.width||0),height:i.height},i.isGroup){u.debug("id abc88 subgraph = ",i.id,i.x,i.y,i.labelData);let e=r.insert("g").attr("class","subgraph"),t=JSON.parse(JSON.stringify(i));t.x=i.offset.posX+i.width/2,t.y=i.offset.posY+i.height/2,t.width=Math.max(t.width,i.labelData.width),await l(e,t),u.debug("id (UIO)= ",i.id,i.width,i.shape,i.labels)}else u.info("id NODE = ",i.id,i.x,i.y,e,t,i.domId.node(),`translate(${i.x+e+i.width/2}, ${i.y+t+i.height/2})`),i.domId.attr("transform",`translate(${i.x+e+i.width/2}, ${i.y+t+i.height/2})`)})),await Promise.all(i.map(async function(i){i?.isGroup&&await I(e+i.x,t+i.y,i.children,a,r,d+1)}))},"drawNodes"),E=(0,a.K)(e=>{let t={parentById:{},childrenById:{}},i=e.filter(e=>e.isGroup);return u.info("Subgraphs - ",i),i.forEach(i=>{e.filter(e=>e.parentId===i.id).forEach(e=>{t.parentById[e.id]=i.id,void 0===t.childrenById[i.id]&&(t.childrenById[i.id]=[]),t.childrenById[i.id].push(e)})}),i.forEach(function(e){let i={id:e.id};void 0!==t.parentById[e.id]&&(i.parent=t.parentById[e.id])}),t},"addSubGraphs"),O=(0,a.K)(e=>{let t=e.start,i=e.end,a=x[e.start.id],r=x[e.end.id];return a&&r?{source:t,target:i,sourceId:t,targetId:i}:{source:t,target:i}},"getEdgeStartEndPoint"),S=(0,a.K)(function(e,t,i){let a=n(e,t,i);if(void 0===a||"root"===a)return{x:0,y:0};let r=x[a].offset;return{x:r.posX,y:r.posY}},"calcOffset"),P=(0,a.K)(async function(e,t,a){let d,n;u.info("abc78 DAGA edges = ",e);let l=e.edges,o=a.insert("g").attr("class","edgeLabels"),c={},y=e.direction||"DOWN";return await Promise.all(l.map(async function(e){let a=e.id;void 0===c[a]?c[a]=0:c[a]++,u.info("abc78 new entry",a,c[a]);let p=a+"_"+c[a];e.id=p,u.info("abc78 new link id to be used is",a,p,c[a]);let f="LS_"+e.start,w="LE_"+e.end,x={style:"",labelStyle:""};switch(x.minlen=e.length||1,e.text=e.label,"arrow_open"===e.type?x.arrowhead="none":x.arrowhead="normal",x.arrowTypeStart="arrow_open",x.arrowTypeEnd="arrow_open",e.type){case"double_arrow_cross":x.arrowTypeStart="arrow_cross";case"arrow_cross":x.arrowTypeEnd="arrow_cross";break;case"double_arrow_point":x.arrowTypeStart="arrow_point";case"arrow_point":x.arrowTypeEnd="arrow_point";break;case"double_arrow_circle":x.arrowTypeStart="arrow_circle";case"arrow_circle":x.arrowTypeEnd="arrow_circle"}let b="",m="";switch(x.startLabelRight=e.startLabelRight,x.endLabelLeft=e.endLabelLeft,e.stroke){case"normal":b="fill:none;",void 0!==d&&(b=d),void 0!==n&&(m=n),x.thickness="normal",x.pattern="solid";break;case"dotted":x.thickness="normal",x.pattern="dotted",x.style="fill:none;stroke-width:2px;stroke-dasharray:3;";break;case"thick":x.thickness="thick",x.pattern="solid",x.style="stroke-width: 3.5px;fill:none;"}x.style=x.style+=b,x.labelStyle=x.labelStyle+=m;let k=s();void 0!==e.interpolate?x.curve=g(e.interpolate,r.lUB):void 0!==l.defaultInterpolate?x.curve=g(l.defaultInterpolate,r.lUB):x.curve=g(k.curve,r.lUB),void 0===e.text?void 0!==e.style&&(x.arrowheadStyle="fill: #333"):(x.arrowheadStyle="fill: #333",x.labelpos="c"),x.labelType=e.labelType,x.label=(e?.text||"").replace(i.lineBreakRegex,"\n"),void 0===e.style&&(x.style=x.style||"stroke: #333; stroke-width: 1.5px;fill:none;"),x.labelStyle=x.labelStyle.replace("color:","fill:"),x.id=p,x.classes="flowchart-link "+f+" "+w;let I=await h(o,x),{source:E,target:S,sourceId:P,targetId:_}=O(e,y);u.debug("abc78 source and target",E,S),t.edges.push({id:"e"+e.start+e.end,...e,sources:[E],targets:[S],sourceId:P,targetId:_,labelEl:I,labels:[{width:x.width,height:x.height,orgWidth:x.width,orgHeight:x.height,text:x.label,layoutOptions:{"edgeLabels.inline":"true","edgeLabels.placement":"CENTER"}}],edgeData:x})})),t},"addEdges");function _(e){switch(e){case"LR":return"RIGHT";case"RL":return"LEFT";case"TB":default:return"DOWN";case"BT":return"UP"}}function N(e,t){let i=x[e];i&&(i?.layoutOptions===void 0&&(i.layoutOptions={}),i.layoutOptions["elk.hierarchyHandling"]="INCLUDE_CHILDREN",i.id!==t&&N(i.parentId,t))}function M(e,t,i,a){u.debug("UIO intersectLine",e,t,i,a);let r=t.y-e.y,d=e.x-t.x,n=t.x*e.y-e.x*t.y,s=r*i.x+d*i.y+n,l=r*a.x+d*a.y+n;if(0!==s&&0!==l&&B(s,l))return;let o=a.y-i.y,h=i.x-a.x,c=a.x*i.y-i.x*a.y,y=o*e.x+h*e.y+c,g=o*t.x+h*t.y+c;if(1e-6>Math.abs(y)&&1e-6>Math.abs(g)&&B(y,g))return;let p=r*h-o*d;if(0===p)return;let f=Math.abs(p/2),w=d*c-h*n;return{x:w<0?(w-f)/p:(w+f)/p,y:(w=o*n-r*c)<0?(w-f)/p:(w+f)/p}}function B(e,t){return e*t>0}(0,a.K)(_,"dir2ElkDirection"),(0,a.K)(N,"setIncludeChildrenPolicy"),(0,a.K)(M,"intersectLine"),(0,a.K)(B,"sameSign");let L=(0,a.K)((e,t,i)=>{let a=e.x,r=e.y,d=e.width,n=e.height,s=[{x:a,y:r-n/2},{x:a+d/2,y:r},{x:a,y:r+n/2},{x:a-d/2,y:r}];u.debug(`APA16 diamondIntersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(i)}
  node-bounds       : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`,JSON.stringify(s));let l=[],o=1/0,h=1/0;s.forEach(function(e){o=Math.min(o,e.x),h=Math.min(h,e.y)});let c=a-d/2-o,y=r-n/2-h;for(let i=0;i<s.length;i++){let a=s[i],r=s[i<s.length-1?i+1:0],d=M(e,t,{x:c+a.x,y:y+a.y},{x:c+r.x,y:y+r.y});d&&l.push(d)}return l.length?(u.debug("UIO intersections",l),l.length>1&&l.sort(function(e,i){let a=e.x-t.x,r=e.y-t.y,d=Math.sqrt(a*a+r*r),n=i.x-t.x,s=i.y-t.y,l=Math.sqrt(n*n+s*s);return d<l?-1:+(d!==l)}),l[0]):e},"diamondIntersection"),$=(0,a.K)((e,t,i)=>{u.debug(`intersection calc abc89:
  outsidePoint: ${JSON.stringify(t)}
  insidePoint : ${JSON.stringify(i)}
  node        : x:${e.x} y:${e.y} w:${e.width} h:${e.height}`);let a=e.x,r=e.y,d=Math.abs(a-i.x),n=e.width/2,s=i.x<t.x?n-d:n+d,l=e.height/2,o=Math.abs(t.y-i.y),h=Math.abs(t.x-i.x);if(Math.abs(r-t.y)*n>Math.abs(a-t.x)*l){let e=i.y<t.y?t.y-l-r:r-l-t.y;s=h*e/o;let a={x:i.x<t.x?i.x+s:i.x-h+s,y:i.y<t.y?i.y+o-e:i.y-o+e};return 0===s&&(a.x=t.x,a.y=t.y),0===h&&(a.x=t.x),0===o&&(a.y=t.y),u.debug(`abc89 topp/bott calc, Q ${o}, q ${e}, R ${h}, r ${s}`,a),a}{let e=o*(s=i.x<t.x?t.x-n-a:a-n-t.x)/h,r=i.x<t.x?i.x+h-s:i.x-h+s,d=i.y<t.y?i.y+e:i.y-e;return u.debug(`sides calc abc89, Q ${o}, q ${e}, R ${h}, r ${s}`,{_x:r,_y:d}),0===s&&(r=t.x,d=t.y),0===h&&(r=t.x),0===o&&(d=t.y),{x:r,y:d}}},"intersection"),v=(0,a.K)((e,t)=>{let i=e.x,a=e.y,r=Math.abs(t.x-i),d=Math.abs(t.y-a),n=e.width/2,s=e.height/2;return!!(r>=n)||!!(d>=s)},"outsideNode"),D=(0,a.K)((e,t,i)=>{u.debug("APA18 cutPathAtIntersect Points:",e,"node:",t,"isDiamond",i);let a=[],r=e[0],d=!1;return e.forEach(e=>{if(v(t,e)||d)u.debug("abc88 outside",e,r,a),r=e,d||a.push(e);else{let n;if(i){let i=L(t,r,e);Math.sqrt((r.x-i.x)**2+(r.y-i.y)**2)>1&&(n=i)}n||(n=$(t,r,e));let s=!1;a.forEach(e=>{s=s||e.x===n.x&&e.y===n.y}),a.some(e=>e.x===n.x&&e.y===n.y)?u.debug("abc88 no intersect",n,a):a.push(n),d=!0}}),a},"cutPathAtIntersect"),T=new d;c(t.select("g"),e.markers,e.type,e.diagramId);let A={id:"root",layoutOptions:{"elk.hierarchyHandling":"INCLUDE_CHILDREN","elk.layered.crossingMinimization.forceNodeModelOrder":e.config.elk?.forceNodeModelOrder,"elk.layered.considerModelOrder.strategy":e.config.elk?.considerModelOrder,"elk.algorithm":w,"nodePlacement.strategy":e.config.elk?.nodePlacementStrategy,"elk.layered.mergeEdges":e.config.elk?.mergeEdges,"elk.direction":"DOWN","spacing.baseValue":35,"elk.layered.unnecessaryBendpoints":!0,"elk.layered.cycleBreaking.strategy":e.config.elk?.cycleBreakingStrategy},children:[],edges:[]};u.info("Drawing flowchart using v4 renderer",T);let K=e.direction||"DOWN";A.layoutOptions["elk.direction"]=_(K);let R=E(e.nodes),U=t.insert("g").attr("class","subgraphs"),C=t.insert("g").attr("class","nodes");A=await k(C,e.nodes,A);let H=t.insert("g").attr("class","edges edgePaths");A=await P(e,A,t),e.nodes.forEach(t=>{let i=x[t.id];void 0!==R.childrenById[i.id]&&(i.labels=[{text:i.label,width:i?.labelData?.width||50,height:i?.labelData?.height||50},i.width=i.width+2*i.padding,u.debug("UIO node label",i?.labelData?.width,i.padding)],i.layoutOptions={"spacing.baseValue":30,"nodeLabels.placement":"[H_CENTER V_TOP, INSIDE]"},i.dir&&(i.layoutOptions={...i.layoutOptions,"elk.algorithm":w,"elk.direction":_(i.dir),"nodePlacement.strategy":e.config.elk?.nodePlacementStrategy,"elk.layered.mergeEdges":e.config.elk?.mergeEdges,"elk.hierarchyHandling":"SEPARATE_CHILDREN"}),delete i.x,delete i.y,delete i.width,delete i.height)}),A.edges.forEach(e=>{let t=e.sources[0],i=e.targets[0];if(x[t].parentId!==x[i].parentId){let e=n(t,i,R);N(t,e),N(i,e)}});let G=await T.layout(A);await I(0,0,G.children,t,U,0),G.edges?.map(t=>{let i=x[t.sources[0]],a=R[t.sources[0]],r=x[t.targets[0]],d=t.start,n=t.end,s=S(d,n,R);if(u.debug("APA18 offset",s,d," ==> ",n,"edge:",t,"cluster:",a,i),t.sections){let a=t.sections[0].startPoint,d=t.sections[0].endPoint,n=(t.sections[0].bendPoints?t.sections[0].bendPoints:[]).map(e=>({x:e.x+s.x,y:e.y+s.y}));t.points=[{x:a.x+s.x,y:a.y+s.y},...n,{x:d.x+s.x,y:d.y+s.y}];let l=i.width,h=r.width;if(i.isGroup){let e=i.domId.node().getBBox();l=Math.max(i.width,i.labels[0].width+i.padding),u.debug("UIO width",i.id,i.with,"bbox.width=",e.width,"lw=",i.labels[0].width,"node:",i.width,"SW = ",l)}if(r.isGroup){let e=r.domId.node().getBBox();h=Math.max(r.width,r.labels[0].width+r.padding),u.debug("UIO width",i.id,i.with,e.width,"EW = ",h,"HTML:",i.innerHTML)}("diamond"===i.shape||"diam"===i.shape)&&t.points.unshift({x:i.offset.posX+i.width/2,y:i.offset.posY+i.height/2}),("diamond"===r.shape||"diam"===r.shape)&&t.points.push({x:r.offset.posX+r.width/2,y:r.offset.posY+r.height/2}),t.points=D(t.points.reverse(),{x:i.offset.posX+i.width/2,y:i.offset.posY+i.height/2,width:l,height:i.height,padding:i.padding},"diamond"===i.shape||"diam"===i.shape).reverse(),t.points=D(t.points,{x:r.offset.posX+r.width/2,y:r.offset.posY+r.height/2,width:h,height:r.height,padding:r.padding},"diamond"===r.shape||"diam"===r.shape);let c=o(H,t,b,e.type,i,r,e.diagramId);u.info("APA12 edge points after insert",JSON.stringify(t.points)),t.x=t.labels[0].x+s.x+t.labels[0].width/2,t.y=t.labels[0].y+s.y+t.labels[0].height/2,f(t,c)}})},"render")}}]);