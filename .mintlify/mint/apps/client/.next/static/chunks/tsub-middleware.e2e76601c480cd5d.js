(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69010],{10906:t=>{"use strict";self,t.exports=function(){var t={2870:function(t,r,e){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.Store=r.matches=r.transform=void 0;var o=e(4303);Object.defineProperty(r,"transform",{enumerable:!0,get:function(){return n(o).default}});var i=e(2370);Object.defineProperty(r,"matches",{enumerable:!0,get:function(){return n(i).default}});var a=e(1444);Object.defineProperty(r,"Store",{enumerable:!0,get:function(){return n(a).default}})},2370:function(t,r,e){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var o=n(e(7843));function i(t,r){return Array.isArray(t)?t:"object"==typeof t?t.value:(0,o.default)(r,t)}function a(t){return!!Array.isArray(t)&&(("lowercase"===t[0]||"length"===t[0]||"typeof"===t[0])&&2===t.length||("contains"===t[0]||"match"===t[0])&&3===t.length)}function c(t,r){for(var e,n,o={t:"",ok:!1,err:!1};t.length>0;){if(0===r.length)return o;switch(t[0]){case"[":var i=r[0];r=r.slice(1);var a=!0;(t=t.slice(1)).length>0&&"^"===t[0]&&(a=!1,t=t.slice(1));for(var c=!1,f=0;;){if(t.length>0&&"]"===t[0]&&f>0){t=t.slice(1);break}var s,l="";if(s=(e=u(t)).char,t=e.newChunk,e.err||(l=s,"-"===t[0]&&(l=(n=u(t.slice(1))).char,t=n.newChunk,n.err)))return o;s<=i&&i<=l&&(c=!0),f++}if(c!==a)return o;break;case"?":r=r.slice(1),t=t.slice(1);break;case"\\":if(0===(t=t.slice(1)).length)return o.err=!0,o;default:if(t[0]!==r[0])return o;r=r.slice(1),t=t.slice(1)}}return o.t=r,o.ok=!0,o.err=!1,o}function u(t){var r={char:"",newChunk:"",err:!1};return 0===t.length||"-"===t[0]||"]"===t[0]||"\\"===t[0]&&0===(t=t.slice(1)).length?r.err=!0:(r.char=t[0],r.newChunk=t.slice(1),0===r.newChunk.length&&(r.err=!0)),r}r.default=function(t,r){if(!r)throw Error("No matcher supplied!");switch(r.type){case"all":return!0;case"fql":var e=r.ir;if(!e)return!1;try{e=JSON.parse(e)}catch(t){throw Error('Failed to JSON.parse FQL intermediate representation "'.concat(e,'": ').concat(t))}var n=function t(r,e){if(!Array.isArray(r))return!0===i(r,e);var n,o,u,f,s,l,p,h=r[0];switch(h){case"!":return!t(r[1],e);case"or":for(var y=1;y<r.length;y++)if(t(r[y],e))return!0;return!1;case"and":for(y=1;y<r.length;y++)if(!t(r[y],e))return!1;return!0;case"=":case"!=":var v=i(r[1],e),d=i(r[2],e);switch(a(v)&&(v=t(v,e)),a(d)&&(d=t(d,e)),"object"==typeof v&&"object"==typeof d&&(v=JSON.stringify(v),d=JSON.stringify(d)),h){case"=":return v===d;case"!=":return v!==d;default:throw Error("Invalid operator in compareItems: ".concat(h))}case"<=":case"<":case">":case">=":var g=i(r[1],e),b=i(r[2],e);if(a(g)&&(g=t(g,e)),a(b)&&(b=t(b,e)),"number"!=typeof g||"number"!=typeof b)return!1;switch(h){case"<=":return g<=b;case">=":return g>=b;case"<":return g<b;case">":return g>b;default:throw Error("Invalid operator in compareNumbers: ".concat(h))}case"in":return n=i(r[1],e),o=i(r[2],e),void 0!==o.find(function(t){return i(t,e)===n});case"contains":return l=i(r[1],e),p=i(r[2],e),"string"==typeof l&&"string"==typeof p&&-1!==l.indexOf(p);case"match":return f=i(r[1],e),s=i(r[2],e),"string"==typeof f&&"string"==typeof s&&function(t,r){var e,n;t:for(;t.length>0;){if(o=(e=function(t){for(var r={star:!1,chunk:"",pattern:""};t.length>0&&"*"===t[0];)t=t.slice(1),r.star=!0;var e,n=!1;t:for(e=0;e<t.length;e++)switch(t[e]){case"\\":e+1<t.length&&e++;break;case"[":n=!0;break;case"]":n=!1;break;case"*":if(!n)break t}return r.chunk=t.slice(0,e),r.pattern=t.slice(e),r}(t)).star,i=e.chunk,t=e.pattern,o&&""===i)return!0;var o,i,a=c(i,r),u=a.t,f=a.ok,s=a.err;if(s)return!1;if(!f||!(0===u.length||t.length>0)){if(o)for(var l=0;l<r.length;l++){if(u=(n=c(i,r.slice(l+1))).t,f=n.ok,s=n.err,f){if(0===t.length&&u.length>0)continue;r=u;continue t}if(s)break}return!1}r=u}return 0===r.length}(s,f);case"lowercase":var x=i(r[1],e);return"string"!=typeof x?null:x.toLowerCase();case"typeof":return typeof i(r[1],e);case"length":return null===(u=i(r[1],e))?0:Array.isArray(u)||"string"==typeof u?u.length:NaN;default:throw Error("FQL IR could not evaluate for token: ".concat(h))}}(e,t);return"boolean"==typeof n&&n;default:throw Error("Matcher of type ".concat(r.type," unsupported."))}}},1444:function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){function t(t){this.rules=[],this.rules=t||[]}return t.prototype.getRulesByDestinationName=function(t){for(var r=[],e=0,n=this.rules;e<n.length;e++){var o=n[e];o.destinationName!==t&&void 0!==o.destinationName||r.push(o)}return r},t}()},4303:function(t,r,e){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0});var o=n(e(374)),i=n(e(7843)),a=n(e(5500)),c=e(9014),u=e(4966);function f(t,r,e){Object.entries(r).forEach(function(r){var n=r[0],o=r[1],a=function(t){"object"==typeof t&&null!==t&&e(t,o)},c=""===n?t:(0,i.default)(t,n);Array.isArray(c)?c.forEach(a):a(c)})}function s(t,r){for(var e=0;e<8;e++)for(var n=t[e],o=128;o>=1;o/=2)n-o>=0?(n-=o,r.push(1)):r.push(0)}r.default=function(t,r){for(var e=0;e<r.length;e++){var n,l,p=r[e];switch(p.type){case"drop":return null;case"drop_properties":f(t,p.config.drop,function(t,r){r.forEach(function(r){return delete t[r]})});break;case"allow_properties":f(t,p.config.allow,function(t,r){Object.keys(t).forEach(function(e){r.includes(e)||delete t[e]})});break;case"sample_event":if(n=t,!((l=p.config).sample.percent<=0)&&(l.sample.percent>=1||(l.sample.path?function(t,r){var e=(0,i.default)(t,r.sample.path),n=(0,o.default)(JSON.stringify(e)),c=-64,u=[];s(n.slice(0,8),u);for(var f=0,l=0;l<64&&1!==u[l];l++)f++;if(0!==f){var p=[];s(n.slice(9,16),p),c-=f,u.splice(0,f),p.splice(64-f),u=u.concat(p)}return u[63]=+(0===u[63]),(0,a.default)(parseInt(u.join(""),2),c)<r.sample.percent}(n,l):Math.random()<=l.sample.percent)))break;return null;case"map_properties":!function(t,r){var e=JSON.parse(JSON.stringify(t));for(var n in r.map)if(r.map.hasOwnProperty(n)){var o=r.map[n],a=n.split("."),f=void 0;if(a.length>1?(a.pop(),f=(0,i.default)(e,a.join("."))):f=t,"object"==typeof f){if(o.copy){var s=(0,i.default)(e,o.copy);void 0!==s&&(0,c.dset)(t,n,s)}else if(o.move){var l=(0,i.default)(e,o.move);void 0!==l&&(0,c.dset)(t,n,l),(0,u.unset)(t,o.move)}else o.hasOwnProperty("set")&&(0,c.dset)(t,n,o.set);if(o.to_string){var p=(0,i.default)(t,n);if("string"==typeof p||"object"==typeof p&&null!==p)continue;void 0!==p?(0,c.dset)(t,n,JSON.stringify(p)):(0,c.dset)(t,n,"undefined")}}}}(t,p.config);break;case"hash_properties":break;default:throw Error('Transformer of type "'.concat(p.type,'" is unsupported.'))}}return t}},4966:function(t,r,e){var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.unset=void 0;var o=n(e(7843));r.unset=function(t,r){if((0,o.default)(t,r)){for(var e=r.split("."),n=e.pop();e.length&&"\\"===e[e.length-1].slice(-1);)n=e.pop().slice(0,-1)+"."+n;for(;e.length;)t=t[r=e.shift()];return delete t[n]}return!0}},9014:function(t,r){r.dset=function(t,r,e){r.split&&(r=r.split("."));for(var n,o,i=0,a=r.length,c=t;i<a&&"__proto__"!==(o=r[i++])&&"constructor"!==o&&"prototype"!==o;)c=c[o]=i===a?e:typeof(n=c[o])==typeof r?n:0*r[i]!=0||~(""+r[i]).indexOf(".")?{}:[]}},3304:function(t){t.exports="function"==typeof Float64Array?Float64Array:void 0},7382:function(t,r,e){var n=e(5569),o=e(3304),i=e(8482);t.exports=n()?o:i},8482:function(t){t.exports=function(){throw Error("not implemented")}},6322:function(t,r,e){var n=e(2508),o=e(5679),i=e(882);t.exports=n()?o:i},882:function(t){t.exports=function(){throw Error("not implemented")}},5679:function(t){t.exports="function"==typeof Uint16Array?Uint16Array:void 0},4773:function(t,r,e){var n=e(9773),o=e(3004),i=e(3078);t.exports=n()?o:i},3078:function(t){t.exports=function(){throw Error("not implemented")}},3004:function(t){t.exports="function"==typeof Uint32Array?Uint32Array:void 0},7980:function(t,r,e){var n=e(8114),o=e(6737),i=e(3357);t.exports=n()?o:i},3357:function(t){t.exports=function(){throw Error("not implemented")}},6737:function(t){t.exports="function"==typeof Uint8Array?Uint8Array:void 0},2684:function(t){t.exports="function"==typeof Float64Array?Float64Array:null},5569:function(t,r,e){t.exports=e(3876)},3876:function(t,r,e){var n=e(1448),o=e(2684);t.exports=function(){var t,r;if("function"!=typeof o)return!1;try{r=new o([1,3.14,-3.14,NaN]),t=n(r)&&1===r[0]&&3.14===r[1]&&-3.14===r[2]&&r[3]!=r[3]}catch(r){t=!1}return t}},9048:function(t,r,e){t.exports=e(3763)},3763:function(t){var r=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&r.call(t,e)}},7009:function(t,r,e){t.exports=e(6784)},6784:function(t){t.exports=function(){return"function"==typeof Symbol&&"symbol"==typeof Symbol("foo")}},3123:function(t,r,e){t.exports=e(8481)},8481:function(t,r,e){var n=e(7009)();t.exports=function(){return n&&"symbol"==typeof Symbol.toStringTag}},2508:function(t,r,e){t.exports=e(3403)},3403:function(t,r,e){var n=e(768),o=e(9668),i=e(187);t.exports=function(){var t,r;if("function"!=typeof i)return!1;try{r=new i(r=[1,3.14,-3.14,o+1,o+2]),t=n(r)&&1===r[0]&&3===r[1]&&r[2]===o-2&&0===r[3]&&1===r[4]}catch(r){t=!1}return t}},187:function(t){t.exports="function"==typeof Uint16Array?Uint16Array:null},9773:function(t,r,e){t.exports=e(2822)},2822:function(t,r,e){var n=e(2744),o=e(3899),i=e(746);t.exports=function(){var t,r;if("function"!=typeof i)return!1;try{r=new i(r=[1,3.14,-3.14,o+1,o+2]),t=n(r)&&1===r[0]&&3===r[1]&&r[2]===o-2&&0===r[3]&&1===r[4]}catch(r){t=!1}return t}},746:function(t){t.exports="function"==typeof Uint32Array?Uint32Array:null},8114:function(t,r,e){t.exports=e(8066)},8066:function(t,r,e){var n=e(8279),o=e(3443),i=e(2731);t.exports=function(){var t,r;if("function"!=typeof i)return!1;try{r=new i(r=[1,3.14,-3.14,o+1,o+2]),t=n(r)&&1===r[0]&&3===r[1]&&r[2]===o-2&&0===r[3]&&1===r[4]}catch(r){t=!1}return t}},2731:function(t){t.exports="function"==typeof Uint8Array?Uint8Array:null},1448:function(t,r,e){t.exports=e(1453)},1453:function(t,r,e){var n=e(6208),o="function"==typeof Float64Array;t.exports=function(t){return o&&t instanceof Float64Array||"[object Float64Array]"===n(t)}},9331:function(t,r,e){var n=e(7980);t.exports={uint16:e(6322),uint8:n}},5902:function(t,r,e){t.exports=e(4106)},4106:function(t,r,e){var n,o=e(9331);(n=new o.uint16(1))[0]=4660,t.exports=52===new o.uint8(n.buffer)[0]},768:function(t,r,e){t.exports=e(3823)},3823:function(t,r,e){var n=e(6208),o="function"==typeof Uint16Array;t.exports=function(t){return o&&t instanceof Uint16Array||"[object Uint16Array]"===n(t)}},2744:function(t,r,e){t.exports=e(2326)},2326:function(t,r,e){var n=e(6208),o="function"==typeof Uint32Array;t.exports=function(t){return o&&t instanceof Uint32Array||"[object Uint32Array]"===n(t)}},8279:function(t,r,e){t.exports=e(208)},208:function(t,r,e){var n=e(6208),o="function"==typeof Uint8Array;t.exports=function(t){return o&&t instanceof Uint8Array||"[object Uint8Array]"===n(t)}},6315:function(t){t.exports=1023},1686:function(t){t.exports=0x7fffffff},3105:function(t){t.exports=0x7ff00000},3449:function(t){t.exports=0x80000000},6988:function(t){t.exports=-1023},9777:function(t){t.exports=1023},3690:function(t){t.exports=-1074},2918:function(t,r,e){t.exports=e(4772).NEGATIVE_INFINITY},4165:function(t){t.exports=1/0},6488:function(t){t.exports=22250738585072014e-324},9668:function(t){t.exports=65535},3899:function(t){t.exports=0xffffffff},3443:function(t){t.exports=255},7011:function(t,r,e){t.exports=e(812)},812:function(t,r,e){var n=e(4165),o=e(2918);t.exports=function(t){return t===n||t===o}},1883:function(t,r,e){t.exports=e(1797)},1797:function(t){t.exports=function(t){return t!=t}},513:function(t,r,e){t.exports=e(5760)},5760:function(t){t.exports=function(t){return Math.abs(t)}},5848:function(t,r,e){t.exports=e(677)},677:function(t,r,e){var n=e(3449),o=e(1686),i=e(7838),a=e(1921),c=e(2490),u=[0,0];t.exports=function(t,r){var e;return i.assign(t,u,1,0),c(e=u[0]&o|a(r)&n,u[1])}},5500:function(t,r,e){t.exports=e(8397)},8397:function(t,r,e){var n=e(4165),o=e(2918),i=e(6315),a=e(9777),c=e(6988),u=e(3690),f=e(1883),s=e(7011),l=e(5848),p=e(4948),h=e(8478),y=e(7838),v=e(2490),d=[0,0],g=[0,0];t.exports=function(t,r){var e;return 0===t||f(t)||s(t)?t:(p(d,t),r+=d[1],(r+=h(t=d[0]))<u?l(0,t):r>a?t<0?o:n:(r<=c?(r+=52,e=2220446049250313e-31):e=1,y(g,t),e*v(0x800fffff&g[0]|r+i<<20,g[1])))}},4772:function(t,r,e){t.exports=e(7548)},7548:function(t){t.exports=Number},8478:function(t,r,e){t.exports=e(4500)},4500:function(t,r,e){var n=e(1921),o=e(3105),i=e(6315);t.exports=function(t){var r=n(t);return(r=(r&o)>>>20)-i|0}},2490:function(t,r,e){t.exports=e(9639)},4445:function(t,r,e){var n,o;!0===e(5902)?(n=1,o=0):(n=0,o=1),t.exports={HIGH:n,LOW:o}},9639:function(t,r,e){var n=e(4773),o=e(7382),i=e(4445),a=new o(1),c=new n(a.buffer),u=i.HIGH,f=i.LOW;t.exports=function(t,r){return c[u]=t,c[f]=r,a[0]}},5646:function(t,r,e){t.exports=+(!0===e(5902))},1921:function(t,r,e){t.exports=e(6285)},6285:function(t,r,e){var n=e(4773),o=e(7382),i=e(5646),a=new o(1),c=new n(a.buffer);t.exports=function(t){return a[0]=t,c[i]}},9024:function(t,r,e){var n=e(6488),o=e(7011),i=e(1883),a=e(513);t.exports=function(t,r,e,c){return i(t)||o(t)?(r[c]=t,r[c+e]=0):0!==t&&a(t)<n?(r[c]=0x10000000000000*t,r[c+e]=-52):(r[c]=t,r[c+e]=0),r}},4948:function(t,r,e){var n=e(7576),o=e(9422);n(o,"assign",e(9024)),t.exports=o},9422:function(t,r,e){var n=e(9024);t.exports=function(t){return n(t,[0,0],1,0)}},5239:function(t,r,e){var n=e(4773),o=e(7382),i=e(5782),a=new o(1),c=new n(a.buffer),u=i.HIGH,f=i.LOW;t.exports=function(t,r,e,n){return a[0]=t,r[n]=c[u],r[n+e]=c[f],r}},7838:function(t,r,e){var n=e(7576),o=e(4010);n(o,"assign",e(5239)),t.exports=o},5782:function(t,r,e){var n,o;!0===e(5902)?(n=1,o=0):(n=0,o=1),t.exports={HIGH:n,LOW:o}},4010:function(t,r,e){var n=e(5239);t.exports=function(t){return n(t,[0,0],1,0)}},7576:function(t,r,e){t.exports=e(7063)},7063:function(t,r,e){var n=e(6691);t.exports=function(t,r,e){n(t,r,{configurable:!1,enumerable:!1,writable:!1,value:e})}},2073:function(t){t.exports=Object.defineProperty},1680:function(t){t.exports="function"==typeof Object.defineProperty?Object.defineProperty:null},1471:function(t,r,e){var n=e(1680);t.exports=function(){try{return n({},"x",{}),!0}catch(t){return!1}}},6691:function(t,r,e){var n=e(1471),o=e(2073),i=e(1309);t.exports=n()?o:i},1309:function(t){var r=Object.prototype,e=r.toString,n=r.__defineGetter__,o=r.__defineSetter__,i=r.__lookupGetter__,a=r.__lookupSetter__;t.exports=function(t,c,u){var f,s,l,p;if("object"!=typeof t||null===t||"[object Array]"===e.call(t))throw TypeError("invalid argument. First argument must be an object. Value: `"+t+"`.");if("object"!=typeof u||null===u||"[object Array]"===e.call(u))throw TypeError("invalid argument. Property descriptor must be an object. Value: `"+u+"`.");if((s="value"in u)&&(i.call(t,c)||a.call(t,c)?(f=t.__proto__,t.__proto__=r,delete t[c],t[c]=u.value,t.__proto__=f):t[c]=u.value),l="get"in u,p="set"in u,s&&(l||p))throw Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return l&&n&&n.call(t,c,u.get),p&&o&&o.call(t,c,u.set),t}},6208:function(t,r,e){var n=e(3123),o=e(7407),i=e(4210);t.exports=n()?i:o},7407:function(t,r,e){var n=e(173);t.exports=function(t){return n.call(t)}},4210:function(t,r,e){var n=e(9048),o=e(1403),i=e(173);t.exports=function(t){var r,e,a;if(null==t)return i.call(t);e=t[o],r=n(t,o);try{t[o]=void 0}catch(r){return i.call(t)}return a=i.call(t),r?t[o]=e:delete t[o],a}},173:function(t){t.exports=Object.prototype.toString},1403:function(t){t.exports="function"==typeof Symbol?Symbol.toStringTag:""},7843:function(t){t.exports=function(t,r,e,n,o){for(r=r.split?r.split("."):r,n=0;n<r.length;n++)t=t?t[r[n]]:o;return t===o?e:t}},374:function(t,r,e){e.r(r),e.d(r,{default:function(){return i}});for(var n=[],o=0;o<64;)n[o]=0|0x100000000*Math.sin(++o%Math.PI);function i(t){var r,e,i,a=[r=0x67452301,e=0xefcdab89,~r,~e],c=[],u=unescape(encodeURI(t))+"\x80",f=u.length;for(t=--f/4+2|15,c[--t]=8*f;~f;)c[f>>2]|=u.charCodeAt(f)<<8*f--;for(o=u=0;o<t;o+=16){for(f=a;u<64;f=[i=f[3],r+((i=f[0]+[r&e|~r&i,i&r|~i&e,r^e^i,e^(r|~i)][f=u>>4]+n[u]+~~c[o|15&[u,5*u+1,3*u+5,7*u][f]])<<(f=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*f+u++%4])|i>>>-f),r,e])r=0|f[1],e=f[2];for(u=4;u;)a[--u]+=f[u]}for(t="";u<32;)t+=(a[u>>3]>>4*(1^u++)&15).toString(16);return t}}},r={};function e(n){var o=r[n];if(void 0!==o)return o.exports;var i=r[n]={exports:{}};return t[n].call(i.exports,i,i.exports,e),i.exports}return e.d=function(t,r){for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e(2870)}()},37789:(t,r,e)=>{"use strict";e.r(r),e.d(r,{tsubMiddleware:()=>o});var n=e(10906),o=function(t){return function(r){var e=r.payload,o=r.integration,i=r.next;new n.Store(t).getRulesByDestinationName(o).forEach(function(t){for(var r=t.matchers,o=t.transformers,a=0;a<r.length;a++)if(n.matches(e.obj,r[a])&&(e.obj=n.transform(e.obj,o[a]),null===e.obj))return i(null)}),i(e)}}},88543:(t,r,e)=>{"use strict";e.r(r),e.d(r,{tsubMiddleware:()=>v});var n=function(){function t(t){this.rules=[],this.rules=t||[]}return t.prototype.getRulesByDestinationName=function(t){for(var r=[],e=0,n=this.rules;e<n.length;e++){var o=n[e];(o.destinationName===t||void 0===o.destinationName)&&r.push(o)}return r},t}(),o=e(93823),i=e.n(o);function a(t,r){return Array.isArray(t)?t:"object"==typeof t?t.value:i()(r,t)}function c(t){return!!Array.isArray(t)&&(("lowercase"===t[0]||"length"===t[0]||"typeof"===t[0])&&2===t.length||("contains"===t[0]||"match"===t[0])&&3===t.length)}function u(t,r){for(var e,n,o={t:"",ok:!1,err:!1};t.length>0;){if(0===r.length)return o;switch(t[0]){case"[":var i=r[0];r=r.slice(1);var a=!0;(t=t.slice(1)).length>0&&"^"===t[0]&&(a=!1,t=t.slice(1));for(var c=!1,u=0;;){if(t.length>0&&"]"===t[0]&&u>0){t=t.slice(1);break}var s="",l="";if(s=(e=f(t)).char,t=e.newChunk,e.err||(l=s,"-"===t[0]&&(l=(n=f(t.slice(1))).char,t=n.newChunk,n.err)))return o;s<=i&&i<=l&&(c=!0),u++}if(c!==a)return o;break;case"?":r=r.slice(1),t=t.slice(1);break;case"\\":if(0===(t=t.slice(1)).length)return o.err=!0,o;default:if(t[0]!==r[0])return o;r=r.slice(1),t=t.slice(1)}}return o.t=r,o.ok=!0,o.err=!1,o}function f(t){var r={char:"",newChunk:"",err:!1};return 0===t.length||"-"===t[0]||"]"===t[0]||"\\"===t[0]&&0===(t=t.slice(1)).length?(r.err=!0,r):(r.char=t[0],r.newChunk=t.slice(1),0===r.newChunk.length&&(r.err=!0),r)}var s=e(34012),l=e.n(s),p=e(94968);function h(t,r,e){Object.entries(r).forEach(function(r){var n=r[0],o=r[1],a=function(t){"object"==typeof t&&null!==t&&e(t,o)},c=""===n?t:i()(t,n);Array.isArray(c)?c.forEach(a):a(c)})}function y(t,r){for(var e=0;e<8;e++)for(var n=t[e],o=128;o>=1;o/=2)n-o>=0?(n-=o,r.push(1)):r.push(0)}var v=function(t){return function(r){var e=r.payload,o=r.integration,f=r.next;new n(t).getRulesByDestinationName(o).forEach(function(t){for(var r=t.matchers,n=t.transformers,o=0;o<r.length;o++)if(function(t,r){if(!r)throw Error("No matcher supplied!");switch(r.type){case"all":return!0;case"fql":return function(t,r){if(!t)return!1;try{t=JSON.parse(t)}catch(r){throw Error('Failed to JSON.parse FQL intermediate representation "'.concat(t,'": ').concat(r))}var e=function t(r,e){if(!Array.isArray(r))return!0===a(r,e);var n,o,i,f,s,l,p,h,y=r[0];switch(y){case"!":return!t(r[1],e);case"or":for(var v=1;v<r.length;v++)if(t(r[v],e))return!0;return!1;case"and":for(var v=1;v<r.length;v++)if(!t(r[v],e))return!1;return!0;case"=":case"!=":var d=a(r[1],e),g=a(r[2],e),b=y,x=e;switch(c(d)&&(d=t(d,x)),c(g)&&(g=t(g,x)),"object"==typeof d&&"object"==typeof g&&(d=JSON.stringify(d),g=JSON.stringify(g)),b){case"=":return d===g;case"!=":return d!==g;default:throw Error("Invalid operator in compareItems: ".concat(b))}case"<=":case"<":case">":case">=":var m=a(r[1],e),w=a(r[2],e),_=y,k=e;if(c(m)&&(m=t(m,k)),c(w)&&(w=t(w,k)),"number"!=typeof m||"number"!=typeof w)return!1;switch(_){case"<=":return m<=w;case">=":return m>=w;case"<":return m<w;case">":return m>w;default:throw Error("Invalid operator in compareNumbers: ".concat(_))}case"in":return n=a(r[1],e),o=a(r[2],e),i=e,void 0!==o.find(function(t){return a(t,i)===n});case"contains":return f=a(r[1],e),s=a(r[2],e),"string"==typeof f&&"string"==typeof s&&-1!==f.indexOf(s);case"match":return l=a(r[1],e),p=a(r[2],e),"string"==typeof l&&"string"==typeof p&&function(t,r){var e,n;r:for(;t.length>0;){var o=void 0,i=void 0;if(o=(e=function(t){for(var r,e={star:!1,chunk:"",pattern:""};t.length>0&&"*"===t[0];)t=t.slice(1),e.star=!0;var n=!1;e:for(r=0;r<t.length;r++)switch(t[r]){case"\\":r+1<t.length&&r++;break;case"[":n=!0;break;case"]":n=!1;break;case"*":if(!n)break e}return e.chunk=t.slice(0,r),e.pattern=t.slice(r),e}(t)).star,i=e.chunk,t=e.pattern,o&&""===i)return!0;var a=u(i,r),c=a.t,f=a.ok,s=a.err;if(s)return!1;if(f&&(0===c.length||t.length>0)){r=c;continue}if(o)for(var l=0;l<r.length;l++){if(c=(n=u(i,r.slice(l+1))).t,f=n.ok,s=n.err,f){if(0===t.length&&c.length>0)continue;r=c;continue r}if(s)break}return!1}return 0===r.length}(p,l);case"lowercase":var j=a(r[1],e);if("string"!=typeof j)return null;return j.toLowerCase();case"typeof":return typeof a(r[1],e);case"length":return null===(h=a(r[1],e))?0:Array.isArray(h)||"string"==typeof h?h.length:NaN;default:throw Error("FQL IR could not evaluate for token: ".concat(y))}}(t,r);return"boolean"==typeof e&&e}(r.ir,t);default:throw Error("Matcher of type ".concat(r.type," unsupported."))}}(e.obj,r[o])&&(e.obj=function(t,r){for(var e=0;e<r.length;e++){var n=r[e];switch(n.type){case"drop":return null;case"drop_properties":h(t,n.config.drop,function(t,r){r.forEach(function(r){return delete t[r]})});break;case"allow_properties":h(t,n.config.allow,function(t,r){Object.keys(t).forEach(function(e){r.includes(e)||delete t[e]})});break;case"sample_event":if(function(t,r){return!(r.sample.percent<=0)&&(r.sample.percent>=1||(r.sample.path?function(t,r){var e,n=i()(t,r.sample.path),o=l().hash(JSON.stringify(n)).match(/.{2}/g).map(function(t){return parseInt(t,16)}),a=-64,c=[];y(o.slice(0,8),c);for(var u=0,f=0;f<64&&1!==c[f];f++)u++;if(0!==u){var s=[];y(o.slice(9,16),s),a-=u,c.splice(0,u),s.splice(64-u),c=c.concat(s)}return c[63]=+(0===c[63]),e=parseInt(c.join(""),2),e*Math.pow(2,a)<r.sample.percent}(t,r):Math.random()<=r.sample.percent))}(t,n.config))break;return null;case"map_properties":!function(t,r){var e=JSON.parse(JSON.stringify(t));for(var n in r.map)if(Object.prototype.hasOwnProperty.call(r.map,n)){var o=r.map[n],a=n.split("."),c=void 0;if(a.length>1?(a.pop(),c=i()(e,a.join("."))):c=t,"object"==typeof c){if(o.copy){var u=i()(e,o.copy);void 0!==u&&(0,p.J)(t,n,u)}else if(o.move){var f=i()(e,o.move);void 0!==f&&(0,p.J)(t,n,f),function(t,r){if(i()(t,r)){for(var e=r.split("."),n=e.pop();e.length&&"\\"===e[e.length-1].slice(-1);)n=e.pop().slice(0,-1)+"."+n;for(;e.length;)t=t[r=e.shift()];delete t[n]}}(t,o.move)}else Object.prototype.hasOwnProperty.call(o,"set")&&(0,p.J)(t,n,o.set);if(o.to_string){var s=i()(t,n);if("string"==typeof s||"object"==typeof s&&null!==s)continue;void 0!==s?(0,p.J)(t,n,JSON.stringify(s)):(0,p.J)(t,n,"undefined")}}}}(t,n.config);break;case"hash_properties":break;default:throw Error('Transformer of type "'.concat(n.type,'" is unsupported.'))}}return t}(e.obj,n[o]),null===e.obj))return f(null)}),f(e)}}},93823:function(t){t.exports=function(t,r,e,n,o){for(r=r.split?r.split("."):r,n=0;n<r.length;n++)t=t?t[r[n]]:o;return t===o?e:t}}}]);