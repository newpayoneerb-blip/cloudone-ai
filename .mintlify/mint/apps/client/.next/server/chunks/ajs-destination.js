"use strict";exports.id=5050,exports.ids=[5050],exports.modules={252371:(a,b,c)=>{c.r(b),c.d(b,{LegacyDestination:()=>z,ajsDestinations:()=>A});var d=c(508524),e=c(917897),f=c(819431),g=c(153814),h=c(973272),i=c(792912),j=c(374351),k=c(829157),l=c(452069),m=c(505976),n=c(615960),o=c(597538),p=c(874376),q=c(977137),r=c(671676);function s(a){return a.toLowerCase().replace(".","").replace(/\s+/g,"-")}function t(a,b){return void 0===b&&(b=!1),b?btoa(a).replace(/=/g,""):void 0}var u=c(888398),v=function(a,b){var c,d=b.type,e=b.bundlingStatus,f=b.versionSettings,g="unbundled"!==e&&("browser"===d||(null==(c=null==f?void 0:f.componentTypes)?void 0:c.includes("browser")));return!a.startsWith("Segment")&&"Iterable"!==a&&g},w=function(a,b){var c=!1===b.All&&void 0===b[a];return!1===b[a]||c},x=c(31908),y=c(194080),z=function(){function a(a,b,c,e,f,g){void 0===e&&(e={});var h=this;this.options={},this.type="destination",this.middleware=[],this.initializePromise=(0,y.u)(),this.flushing=!1,this.name=a,this.version=b,this.settings=(0,d.Cl)({},e),this.disableAutoISOConversion=f.disableAutoISOConversion||!1,this.integrationSource=g,this.settings.type&&"browser"===this.settings.type&&delete this.settings.type,this.initializePromise.promise.then(function(a){return h._initialized=a},function(){}),this.options=f,this.buffer=f.disableClientPersistence?new n.M(4,[]):new o.x(4,"".concat(c,":dest-").concat(a)),this.scheduleFlush()}return a.prototype.isLoaded=function(){return!!this._ready},a.prototype.ready=function(){var a=this;return this.initializePromise.promise.then(function(){var b;return null!=(b=a.onReady)?b:Promise.resolve()})},a.prototype.load=function(a,b){var c;return(0,d.sH)(this,void 0,void 0,function(){var e,f,g=this;return(0,d.YH)(this,function(h){switch(h.label){case 0:if(this._ready||void 0!==this.onReady)return[2];if(null==(c=this.integrationSource))return[3,1];return f=c,[3,3];case 1:return[4,function(a,b,c,e){return(0,d.sH)(this,void 0,void 0,function(){var f,g,h,i,j;return(0,d.YH)(this,function(k){switch(k.label){case 0:g=t(f=s(b),e),h=(0,q.YM)(),i="".concat(h,"/integrations/").concat(null!=g?g:f,"/").concat(c,"/").concat(null!=g?g:f,".dynamic.js.gz"),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,(0,r.k)(i)];case 2:k.sent();var l,m,n=i;try{var o=(null!=(m=null==(l=null==window?void 0:window.performance)?void 0:l.getEntriesByName(n,"resource"))?m:[])[0];o&&a.stats.gauge("legacy_destination_time",Math.round(o.duration),(0,d.fX)([b],o.duration<100?["cached"]:[],!0))}catch(a){}return[3,4];case 3:throw j=k.sent(),a.stats.gauge("legacy_destination_time",-1,["plugin:".concat(b),"failed"]),j;case 4:return[4,Promise.all(window["".concat(f,"Deps")].map(function(a){return(0,r.k)(h+a+".gz")}))];case 5:return k.sent(),window["".concat(f,"Loader")](),[2,window["".concat(f,"Integration")]]}})})}(a,this.name,this.version,this.options.obfuscate)];case 2:f=h.sent(),h.label=3;case 3:e=f,this.integration=function(a,b,c){if("Integration"in a){var d;a({user:function(){return c.user()},addIntegration:function(){}}),d=a.Integration}else d=a;var e=new d(b);return e.analytics=c,e}(e,this.settings,b),this.onReady=new Promise(function(a){g.integration.once("ready",function(){g._ready=!0,a(!0)})}),this.integration.on("initialize",function(){g.initializePromise.resolve(!0)});try{(0,x.y)(a,{integrationName:this.name,methodName:"initialize",type:"classic"}),this.integration.initialize()}catch(b){throw(0,x.y)(a,{integrationName:this.name,methodName:"initialize",type:"classic",didError:!0}),this.initializePromise.resolve(!1),b}return[2]}})})},a.prototype.unload=function(a,b){return function(a,b,c){return(0,d.sH)(this,void 0,void 0,function(){var e,f,g,h;return(0,d.YH)(this,function(d){return e=(0,q.YM)(),f=s(a),g=t(a,c),h="".concat(e,"/integrations/").concat(null!=g?g:f,"/").concat(b,"/").concat(null!=g?g:f,".dynamic.js.gz"),[2,(0,r.d)(h)]})})}(this.name,this.version,this.options.obfuscate)},a.prototype.addMiddleware=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];this.middleware=(a=this.middleware).concat.apply(a,b)},a.prototype.shouldBuffer=function(a){return"page"!==a.event.type&&((0,f.a)()||!0!==this._ready||!0!==this._initialized)},a.prototype.send=function(a,b,c){var e,f;return(0,d.sH)(this,void 0,void 0,function(){var g,i,j,l,m,n;return(0,d.YH)(this,function(o){switch(o.label){case 0:if(this.shouldBuffer(a))return this.buffer.push(a),this.scheduleFlush(),[2,a];return g=null==(f=null==(e=this.options)?void 0:e.plan)?void 0:f.track,i=a.event.event,g&&i&&"Segment.io"!==this.name&&(j=g[i],(0,k.j)(g,j)?a.updateEvent("integrations",(0,d.Cl)((0,d.Cl)({},a.event.integrations),null==j?void 0:j.integrations)):(a.updateEvent("integrations",(0,d.Cl)((0,d.Cl)({},a.event.integrations),{All:!1,"Segment.io":!0})),a.cancel(new h.d({retry:!1,reason:"Event ".concat(i," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"}))),(null==j?void 0:j.enabled)&&(null==j?void 0:j.integrations[this.name])===!1&&a.cancel(new h.d({retry:!1,reason:"Event ".concat(i," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"}))),[4,(0,p.applyDestinationMiddleware)(this.name,a.event,this.middleware)];case 1:if(null===(l=o.sent()))return[2,a];m=new b(l,{traverse:!this.disableAutoISOConversion}),(0,x.y)(a,{integrationName:this.name,methodName:c,type:"classic"}),o.label=2;case 2:if(o.trys.push([2,5,,6]),!this.integration)return[3,4];return[4,this.integration.invoke.call(this.integration,c,m)];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:throw n=o.sent(),(0,x.y)(a,{integrationName:this.name,methodName:c,type:"classic",didError:!0}),n;case 6:return[2,a]}})})},a.prototype.track=function(a){return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(b){return[2,this.send(a,e.Track,"track")]})})},a.prototype.page=function(a){var b;return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(c){switch(c.label){case 0:return(null==(b=this.integration)?void 0:b._assumesPageview)&&!this._initialized&&this.integration.initialize(),[4,this.initializePromise.promise];case 1:return c.sent(),[2,this.send(a,e.Page,"page")]}})})},a.prototype.identify=function(a){return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(b){return[2,this.send(a,e.Identify,"identify")]})})},a.prototype.alias=function(a){return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(b){return[2,this.send(a,e.Alias,"alias")]})})},a.prototype.group=function(a){return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(b){return[2,this.send(a,e.Group,"group")]})})},a.prototype.scheduleFlush=function(){var a=this;this.flushing||setTimeout(function(){return(0,d.sH)(a,void 0,void 0,function(){var a;return(0,d.YH)(this,function(b){switch(b.label){case 0:if((0,f.a)()||!0!==this._ready||!0!==this._initialized)return this.scheduleFlush(),[2];return this.flushing=!0,a=this,[4,function(a,b){return(0,d.sH)(this,void 0,void 0,function(){var c,e=this;return(0,d.YH)(this,function(h){switch(h.label){case 0:if(c=[],(0,f.a)())return[2,b];return[4,(0,m._)(function(){return b.length>0&&(0,f.s)()},function(){return(0,d.sH)(e,void 0,void 0,function(){var e;return(0,d.YH)(this,function(d){switch(d.label){case 0:if(!(e=b.pop()))return[2];return[4,(0,j.C)(e,a)];case 1:return d.sent()instanceof g.o||c.push(e),[2]}})})})];case 1:return h.sent(),c.map(function(a){return b.pushWithBackoff(a)}),[2,b]}})})}(this,this.buffer)];case 1:return a.buffer=b.sent(),this.flushing=!1,this.buffer.todo>0&&this.scheduleFlush(),[2]}})})},5e3*Math.random())},a}();function A(a,b,c,e,f,g){if(void 0===c&&(c={}),void 0===e&&(e={}),(0,i.S)())return[];b.plan&&((e=null!=e?e:{}).plan=b.plan);var h,j,k=null!=(j=null==(h=b.middlewareSettings)?void 0:h.routingRules)?j:[],m=b.integrations,n=e.integrations,o=(0,l.J)(b,null!=e?e:{}),p=null==g?void 0:g.reduce(function(a,b){var c;return(0,d.Cl)((0,d.Cl)({},a),((c={})[("Integration"in b?b.Integration:b).prototype.name]=b,c))},{});return Array.from(new Set((0,d.fX)((0,d.fX)([],Object.keys(m).filter(function(a){return v(a,m[a])}),!0),Object.keys(p||{}).filter(function(a){return(0,u.Qd)(m[a])||(0,u.Qd)(null==n?void 0:n[a])}),!0))).filter(function(a){return!w(a,c)}).map(function(b){var c,d,g,h,i,j=null!=(i=null!=(g=null==(d=null==(c=m[b])?void 0:c.versionSettings)?void 0:d.override)?g:null==(h=null==c?void 0:c.versionSettings)?void 0:h.version)?i:"latest",l=new z(b,j,a,o[b],e,null==p?void 0:p[b]);return k.filter(function(a){return a.destinationName===b}).length>0&&f&&l.addMiddleware(f),l})}},351319:(a,b,c)=>{c.r(b),c.d(b,{LegacyDestination:()=>x,ajsDestinations:()=>y});var d=c(508524),e=c(917897),f=c(909035),g=c(3265),h=c(230313),i=c(183964),j=c(477294),k=c(393473),l=c(634209),m=c(803116),n=c(845411),o=c(666590),p=c(17188),q=c(354197),r=c(839576);function s(a){return a.toLowerCase().replace(".","").replace(/\s+/g,"-")}function t(a,b){return void 0===b&&(b=!1),b?btoa(a).replace(/=/g,""):void 0}var u=c(189287),v=function(a,b){var c,d=b.type,e=b.bundlingStatus,f=b.versionSettings,g="unbundled"!==e&&("browser"===d||(null==(c=null==f?void 0:f.componentTypes)?void 0:c.includes("browser")));return!a.startsWith("Hightouch")&&"Iterable"!==a&&g},w=function(a,b){var c=!1===b.All&&void 0===b[a];return!1===b[a]||c},x=function(){function a(a,b,c,e,f,g){void 0===e&&(e={}),this.options={},this.type="destination",this.middleware=[],this._ready=!1,this._initialized=!1,this.flushing=!1,this.name=a,this.version=b,this.settings=(0,d.Cl)({},e),this.disableAutoISOConversion=f.disableAutoISOConversion||!1,this.integrationSource=g,this.settings.type&&"browser"===this.settings.type&&delete this.settings.type,this.options=f,this.buffer=f.disableClientPersistence?new n.M(4,[]):new o.x(4,"".concat(c,":dest-").concat(a)),this.scheduleFlush()}return a.prototype.isLoaded=function(){return this._ready},a.prototype.ready=function(){var a;return null!=(a=this.onReady)?a:Promise.resolve()},a.prototype.load=function(a,b){var c;return(0,d.sH)(this,void 0,void 0,function(){var e,f,g=this;return(0,d.YH)(this,function(h){switch(h.label){case 0:if(this._ready||void 0!==this.onReady)return[2];if(null==(c=this.integrationSource))return[3,1];return f=c,[3,3];case 1:return[4,function(a,b,c,e){return(0,d.sH)(this,void 0,void 0,function(){var f,g,h,i,j;return(0,d.YH)(this,function(k){switch(k.label){case 0:g=t(f=s(b),e),h=(0,q.YM)(),i="".concat(h,"/integrations/").concat(null!=g?g:f,"/").concat(c,"/").concat(null!=g?g:f,".dynamic.js.gz"),k.label=1;case 1:return k.trys.push([1,3,,4]),[4,(0,r.k)(i)];case 2:k.sent();var l,m,n=i;try{var o=(null!=(m=null==(l=null==window?void 0:window.performance)?void 0:l.getEntriesByName(n,"resource"))?m:[])[0];o&&a.stats.gauge("legacy_destination_time",Math.round(o.duration),(0,d.fX)([b],o.duration<100?["cached"]:[],!0))}catch(a){}return[3,4];case 3:throw j=k.sent(),a.stats.gauge("legacy_destination_time",-1,["plugin:".concat(b),"failed"]),j;case 4:return[4,Promise.all(window["".concat(f,"Deps")].map(function(a){return(0,r.k)(h+a+".gz")}))];case 5:return k.sent(),window["".concat(f,"Loader")](),[2,window["".concat(f,"Integration")]]}})})}(a,this.name,this.version,this.options.obfuscate)];case 2:f=h.sent(),h.label=3;case 3:e=f,this.integration=function(a,b,c){if("Integration"in a){var d;a({user:function(){return c.user()},addIntegration:function(){}}),d=a.Integration}else d=a;var e=new d(b);return e.analytics=c,e}(e,this.settings,b),this.onReady=new Promise(function(a){g.integration.once("ready",function(){g._ready=!0,a(!0)})}),this.onInitialize=new Promise(function(a){g.integration.on("initialize",function(){g._initialized=!0,a(!0)})});try{a.stats.increment("analytics_js.integration.invoke",1,["method:initialize","integration_name:".concat(this.name)]),this.integration.initialize()}catch(b){throw a.stats.increment("analytics_js.integration.invoke.error",1,["method:initialize","integration_name:".concat(this.name)]),b}return[2]}})})},a.prototype.unload=function(a,b){return function(a,b,c){return(0,d.sH)(this,void 0,void 0,function(){var e,f,g,h;return(0,d.YH)(this,function(d){return e=(0,q.YM)(),f=s(a),g=t(a,c),h="".concat(e,"/integrations/").concat(null!=g?g:f,"/").concat(b,"/").concat(null!=g?g:f,".dynamic.js.gz"),[2,(0,r.d)(h)]})})}(this.name,this.version,this.options.obfuscate)},a.prototype.addMiddleware=function(){for(var a,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];this.middleware=(a=this.middleware).concat.apply(a,b)},a.prototype.shouldBuffer=function(a){return"page"!==a.event.type&&((0,f.a)()||!1===this._ready||!1===this._initialized)},a.prototype.send=function(a,b,c){var e,f;return(0,d.sH)(this,void 0,void 0,function(){var g,i,j,l,m,n;return(0,d.YH)(this,function(o){switch(o.label){case 0:if(this.shouldBuffer(a))return this.buffer.push(a),this.scheduleFlush(),[2,a];if(g=null==(f=null==(e=this.options)?void 0:e.plan)?void 0:f.track,i=a.event.event,g&&i&&"Hightouch.io"!==this.name){if(j=g[i],!(0,k.j)(g,j))return a.updateEvent("integrations",(0,d.Cl)((0,d.Cl)({},a.event.integrations),{All:!1,"Hightouch.io":!0})),a.cancel(new h.d({retry:!1,reason:"Event ".concat(i," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"})),[2,a];if(a.updateEvent("integrations",(0,d.Cl)((0,d.Cl)({},a.event.integrations),null==j?void 0:j.integrations)),(null==j?void 0:j.enabled)&&(null==j?void 0:j.integrations[this.name])===!1)return a.cancel(new h.d({retry:!1,reason:"Event ".concat(i," disabled for integration ").concat(this.name," in tracking plan"),type:"Dropped by plan"})),[2,a]}return[4,(0,p.applyDestinationMiddleware)(this.name,a.event,this.middleware)];case 1:if(null===(l=o.sent()))return[2,a];m=new b(l,{traverse:!this.disableAutoISOConversion}),a.stats.increment("analytics_js.integration.invoke",1,["method:".concat(c),"integration_name:".concat(this.name)]),o.label=2;case 2:if(o.trys.push([2,5,,6]),!this.integration)return[3,4];return[4,this.integration.invoke.call(this.integration,c,m)];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:throw n=o.sent(),a.stats.increment("analytics_js.integration.invoke.error",1,["method:".concat(c),"integration_name:".concat(this.name)]),n;case 6:return[2,a]}})})},a.prototype.track=function(a){return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(b){return[2,this.send(a,e.Track,"track")]})})},a.prototype.page=function(a){var b;return(0,d.sH)(this,void 0,void 0,function(){var c=this;return(0,d.YH)(this,function(d){return(null==(b=this.integration)?void 0:b._assumesPageview)&&!this._initialized&&this.integration.initialize(),[2,this.onInitialize.then(function(){return c.send(a,e.Page,"page")})]})})},a.prototype.identify=function(a){return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(b){return[2,this.send(a,e.Identify,"identify")]})})},a.prototype.alias=function(a){return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(b){return[2,this.send(a,e.Alias,"alias")]})})},a.prototype.group=function(a){return(0,d.sH)(this,void 0,void 0,function(){return(0,d.YH)(this,function(b){return[2,this.send(a,e.Group,"group")]})})},a.prototype.scheduleFlush=function(){var a=this;this.flushing||setTimeout(function(){return(0,d.sH)(a,void 0,void 0,function(){var a;return(0,d.YH)(this,function(b){switch(b.label){case 0:return this.flushing=!0,a=this,[4,function(a,b){return(0,d.sH)(this,void 0,void 0,function(){var c,e=this;return(0,d.YH)(this,function(h){switch(h.label){case 0:if(c=[],(0,f.a)())return[2,b];return[4,(0,m._)(function(){return b.length>0&&(0,f.s)()},function(){return(0,d.sH)(e,void 0,void 0,function(){var e;return(0,d.YH)(this,function(d){switch(d.label){case 0:if(!(e=b.pop()))return[2];return[4,(0,j.C)(e,a)];case 1:return d.sent()instanceof g.o||c.push(e),[2]}})})})];case 1:return h.sent(),c.map(function(a){return b.pushWithBackoff(a)}),[2,b]}})})}(this,this.buffer)];case 1:return a.buffer=b.sent(),this.flushing=!1,this.buffer.todo>0&&this.scheduleFlush(),[2]}})})},5e3*Math.random())},a}();function y(a,b,c,e,f,g){if(void 0===c&&(c={}),void 0===e&&(e={}),(0,i.S)())return[];b.plan&&((e=null!=e?e:{}).plan=b.plan);var h,j,k=null!=(j=null==(h=b.middlewareSettings)?void 0:h.routingRules)?j:[],m=b.integrations,n=e.integrations,o=(0,l.J)(b,null!=e?e:{}),p=null==g?void 0:g.reduce(function(a,b){var c;return(0,d.Cl)((0,d.Cl)({},a),((c={})[("Integration"in b?b.Integration:b).prototype.name]=b,c))},{});return Array.from(new Set((0,d.fX)((0,d.fX)([],Object.keys(m).filter(function(a){return v(a,m[a])}),!0),Object.keys(p||{}).filter(function(a){return(0,u.Qd)(m[a])||(0,u.Qd)(null==n?void 0:n[a])}),!0))).filter(function(a){return!w(a,c)}).map(function(b){var c,d,g,h,i,j=null!=(i=null!=(g=null==(d=null==(c=m[b])?void 0:c.versionSettings)?void 0:d.override)?g:null==(h=null==c?void 0:c.versionSettings)?void 0:h.version)?i:"latest",l=new x(b,j,a,o[b],e,null==p?void 0:p[b]);return k.filter(function(a){return a.destinationName===b}).length>0&&f&&l.addMiddleware(f),l})}},393473:(a,b,c)=>{c.d(b,{j:()=>d});function d(a,b){var c,d;return"boolean"==typeof(null==b?void 0:b.enabled)?b.enabled:null==(d=null==(c=null==a?void 0:a.__default)?void 0:c.enabled)||d}},829157:(a,b,c)=>{c.d(b,{j:()=>d});function d(a,b){var c,d;return"boolean"==typeof(null==b?void 0:b.enabled)?b.enabled:null==(d=null==(c=null==a?void 0:a.__default)?void 0:c.enabled)||d}}};