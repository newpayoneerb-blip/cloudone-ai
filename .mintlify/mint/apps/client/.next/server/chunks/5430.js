"use strict";exports.id=5430,exports.ids=[5430],exports.modules={185430:(a,b,c)=>{c.r(b),c.d(b,{Controlled:()=>t,default:()=>v});var d=c(631768),e=c(565081);let f=(a,b)=>a===b?.tagName?.toUpperCase?.(),g=a=>f("DIV",a)||f("SPAN",a),h=a=>f("IMG",a),i=a=>a.complete&&0!==a.naturalHeight,j=a=>f("SVG",a),k=({height:a,offset:b,width:c})=>Math.min((window.innerWidth-2*b)/c,(window.innerHeight-2*b)/a),l=({containerHeight:a,containerWidth:b,hasScalableSrc:c,offset:d,targetHeight:e,targetWidth:f})=>a&&b?!c&&e&&f?(({containerHeight:a,containerWidth:b,offset:c,targetHeight:d,targetWidth:e})=>{let f=k({height:d,offset:c,width:e}),g=e>d?e/b:d/a;return f>1?g:f*g})({containerHeight:a,containerWidth:b,offset:d,targetHeight:e,targetWidth:f}):k({height:a,offset:d,width:b}):1,m=/url(?:\(['"]?)(.*?)(?:['"]?\))/,n=a=>{if(a){if(h(a))return a.currentSrc;else if(g(a)){let b=window.getComputedStyle(a).backgroundImage;if(b)return m.exec(b)?.[1]}}},o=({position:a,relativeNum:b})=>{let c=parseFloat(a);return a.endsWith("%")?b*c/100:c},p=/\.svg$/i,q=a=>{if(!a)return{};if(!j(a))return{height:a.offsetHeight,left:a.offsetLeft,width:a.offsetWidth,top:a.offsetTop};{let b=a.parentElement,c=a.getBoundingClientRect();if(!b)return{height:c.height,left:c.left,width:c.width,top:c.top};{let a=b.getBoundingClientRect();return{height:c.height,left:a.left-c.left,top:a.top-c.top,width:c.width}}}},r=["img","svg",'[role="img"]',"[data-zoom]"].map(a=>`${a}:not([aria-hidden="true"])`).join(","),s={overflow:"",width:""};function t(a){return d.createElement(u,{...a})}class u extends d.Component{constructor(){super(...arguments),this.state={id:"",isZoomImgLoaded:!1,loadedImgEl:void 0,modalState:"UNLOADED",shouldRefresh:!1,styleGhost:{}},this.refContent=d.createRef(),this.refDialog=d.createRef(),this.refModalContent=d.createRef(),this.refModalImg=d.createRef(),this.refWrap=d.createRef(),this.imgEl=null,this.isScaling=!1,this.prevBodyAttrs=s,this.styleModalImg={},this.handleModalStateChange=a=>{let{modalState:b}=this.state;"LOADING"!==a&&"LOADING"===b?(this.loadZoomImg(),window.addEventListener("resize",this.handleResize,{passive:!0}),window.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),window.addEventListener("touchmove",this.handleTouchMove,{passive:!0}),window.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),window.addEventListener("touchcancel",this.handleTouchCancel,{passive:!0}),document.addEventListener("keydown",this.handleKeyDown,!0)):"LOADED"!==a&&"LOADED"===b?window.addEventListener("wheel",this.handleWheel,{passive:!0}):"UNLOADING"!==a&&"UNLOADING"===b?(this.ensureImgTransitionEnd(),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),document.removeEventListener("keydown",this.handleKeyDown,!0)):"UNLOADED"!==a&&"UNLOADED"===b&&(this.bodyScrollEnable(),window.removeEventListener("resize",this.handleResize),this.refModalImg.current?.removeEventListener?.("transitionend",this.handleImgTransitionEnd),this.refDialog.current?.close?.())},this.getDialogContainer=()=>{let a=document.querySelector("[data-rmiz-portal]");return null==a&&((a=document.createElement("div")).setAttribute("data-rmiz-portal",""),document.body.appendChild(a)),a},this.setId=()=>{let a=()=>Math.random().toString(16).slice(-4);this.setState({id:a()+a()+a()})},this.setAndTrackImg=()=>{let a=this.refContent.current;a&&(this.imgEl=a.querySelector(r),this.imgEl?(this.contentNotFoundChangeObserver?.disconnect?.(),this.imgEl.addEventListener("load",this.handleImgLoad),this.imgEl.addEventListener("click",this.handleZoom),this.state.loadedImgEl||this.handleImgLoad(),this.imgElResizeObserver=new ResizeObserver(a=>{let b=a[0];b?.target&&(this.imgEl=b.target,this.setState({styleGhost:q(this.imgEl)}))}),this.imgElResizeObserver.observe(this.imgEl),this.contentChangeObserver||(this.contentChangeObserver=new MutationObserver(()=>{this.setState({styleGhost:q(this.imgEl)})}),this.contentChangeObserver.observe(a,{attributes:!0,childList:!0,subtree:!0}))):this.contentNotFoundChangeObserver||(this.contentNotFoundChangeObserver=new MutationObserver(this.setAndTrackImg),this.contentNotFoundChangeObserver.observe(a,{childList:!0,subtree:!0})))},this.handleIfZoomChanged=a=>{let{isZoomed:b}=this.props;!a&&b?this.zoom():a&&!b&&this.unzoom()},this.handleImgLoad=()=>{let a=n(this.imgEl);if(!a)return;let b=new Image;h(this.imgEl)&&(b.sizes=this.imgEl.sizes,b.srcset=this.imgEl.srcset,b.crossOrigin=this.imgEl.crossOrigin),b.src=a;let c=()=>{this.setState({loadedImgEl:b,styleGhost:q(this.imgEl)})};b.decode().then(c).catch(()=>{if(i(b))return void c();b.onload=c})},this.handleZoom=()=>{this.hasImage()&&this.props.onZoomChange?.(!0)},this.handleUnzoom=()=>{this.props.onZoomChange?.(!1)},this.handleBtnUnzoomClick=a=>{a.preventDefault(),a.stopPropagation(),this.handleUnzoom()},this.handleDialogCancel=a=>{a.preventDefault()},this.handleDialogClick=a=>{(a.target===this.refModalContent.current||a.target===this.refModalImg.current)&&(a.stopPropagation(),this.handleUnzoom())},this.handleDialogClose=a=>{a.stopPropagation(),this.handleUnzoom()},this.handleKeyDown=a=>{("Escape"===a.key||27===a.keyCode)&&(a.preventDefault(),a.stopPropagation(),this.handleUnzoom())},this.handleWheel=a=>{a.ctrlKey||(a.stopPropagation(),queueMicrotask(()=>{this.handleUnzoom()}))},this.handleTouchStart=a=>{if(a.touches.length>1){this.isScaling=!0;return}1===a.changedTouches.length&&a.changedTouches[0]&&(this.touchYStart=a.changedTouches[0].screenY)},this.handleTouchMove=a=>{let b=window.visualViewport?.scale??1;this.props.canSwipeToUnzoom&&!this.isScaling&&b<=1&&null!=this.touchYStart&&a.changedTouches[0]&&(this.touchYEnd=a.changedTouches[0].screenY,Math.abs(Math.max(this.touchYStart,this.touchYEnd)-Math.min(this.touchYStart,this.touchYEnd))>this.props.swipeToUnzoomThreshold&&(this.touchYStart=void 0,this.touchYEnd=void 0,this.handleUnzoom()))},this.handleTouchEnd=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleTouchCancel=()=>{this.isScaling=!1,this.touchYStart=void 0,this.touchYEnd=void 0},this.handleResize=()=>{this.setState({shouldRefresh:!0})},this.hasImage=()=>this.imgEl&&(this.state.loadedImgEl||j(this.imgEl))&&"none"!==window.getComputedStyle(this.imgEl).display,this.zoom=()=>{this.bodyScrollDisable(),this.refDialog.current?.showModal?.(),this.refModalImg.current?.addEventListener?.("transitionend",this.handleImgTransitionEnd),this.setState({modalState:"LOADING"})},this.unzoom=()=>{this.setState({modalState:"UNLOADING"})},this.handleImgTransitionEnd=()=>{clearTimeout(this.timeoutTransitionEnd),"LOADING"===this.state.modalState?this.setState({modalState:"LOADED"}):"UNLOADING"===this.state.modalState&&this.setState({shouldRefresh:!1,modalState:"UNLOADED"})},this.ensureImgTransitionEnd=()=>{if(this.refModalImg.current){let a=window.getComputedStyle(this.refModalImg.current).transitionDuration,b=parseFloat(a);if(b){let c=b*(a.endsWith("ms")?1:1e3)+50;this.timeoutTransitionEnd=setTimeout(this.handleImgTransitionEnd,c)}}},this.bodyScrollDisable=()=>{this.prevBodyAttrs={overflow:document.body.style.overflow,width:document.body.style.width};let a=document.body.clientWidth;document.body.style.overflow="hidden",document.body.style.width=`${a}px`},this.bodyScrollEnable=()=>{document.body.style.width=this.prevBodyAttrs.width,document.body.style.overflow=this.prevBodyAttrs.overflow,this.prevBodyAttrs=s},this.loadZoomImg=()=>{let{props:{zoomImg:a}}=this,b=a?.src;if(b){let c=new Image;c.sizes=a?.sizes??"",c.srcset=a?.srcSet??"",c.crossOrigin=a?.crossOrigin??void 0,c.src=b;let d=()=>{this.setState({isZoomImgLoaded:!0})};c.decode().then(d).catch(()=>{if(i(c))return void d();c.onload=d})}},this.UNSAFE_handleSvg=()=>{let{imgEl:a,refModalImg:b,styleModalImg:c}=this;if(j(a)){let d=a.cloneNode(!0);(a=>{let b="-zoom",c=["clip-path","fill","mask","marker-start","marker-mid","marker-end"],d=new Map;if(a.hasAttribute("id")){let c=a.id,e=c+b;d.set(c,e),a.id=e}a.querySelectorAll("[id]").forEach(a=>{let c=a.id,e=c+b;d.set(c,e),a.id=e}),d.forEach((b,d)=>{let e=`url(#${d})`,f=`url(#${b})`,g=c.map(a=>`[${a}="${e}"]`).join(", ");a.querySelectorAll(g).forEach(a=>{c.forEach(b=>{a.getAttribute(b)===e&&a.setAttribute(b,f)})})}),a.querySelectorAll("style").forEach(a=>{d.forEach((b,c)=>{a.textContent&&(a.textContent=a.textContent.replaceAll(`#${c}`,`#${b}`))})})})(d),d.style.width=`${c.width||0}px`,d.style.height=`${c.height||0}px`,d.addEventListener("click",this.handleUnzoom),b.current?.firstChild?.remove?.(),b.current?.appendChild?.(d)}}}render(){let{handleBtnUnzoomClick:a,handleDialogCancel:b,handleDialogClick:c,handleDialogClose:f,handleUnzoom:i,handleZoom:k,imgEl:m,props:{a11yNameButtonUnzoom:q,a11yNameButtonZoom:r,children:s,classDialog:t,IconUnzoom:u,IconZoom:v,isZoomed:w,wrapElement:x,ZoomContent:y,zoomImg:z,zoomMargin:A},refContent:B,refDialog:C,refModalContent:D,refModalImg:E,refWrap:F,state:{id:G,isZoomImgLoaded:H,loadedImgEl:I,modalState:J,shouldRefresh:K,styleGhost:L}}=this,M=`rmiz-modal-${G}`,N=`rmiz-modal-img-${G}`,O=g(m),P=h(m),Q=j(m),R=(a=>{if(a)if(h(a))return a.alt??void 0;else return a.getAttribute("aria-label")??void 0})(m),S=n(m),T=P?m.sizes:void 0,U=P?m.srcset:void 0,V=P?m.crossOrigin:void 0,W=!!z?.src,X=this.hasImage(),Y=R?`${r}: ${R}`:r,Z="LOADING"===J||"LOADED"===J,$=X?"found":"not-found",_="UNLOADED"===J||"UNLOADING"===J?"hidden":"visible";this.styleModalImg=X?(({hasZoomImg:a,imgSrc:b,isSvg:c,isZoomed:d,loadedImgEl:e,offset:f,shouldRefresh:h,targetEl:i})=>{let j=c||b?.slice?.(0,18)==="data:image/svg+xml"||a||!!(b&&p.test(b)),k=i.getBoundingClientRect(),m=window.getComputedStyle(i),n=null!=e&&g(i),q=null!=e&&!n,r=(({containerHeight:a,containerLeft:b,containerTop:c,containerWidth:d,hasScalableSrc:e,offset:f,targetHeight:g,targetWidth:h})=>{let i=l({containerHeight:a,containerWidth:d,hasScalableSrc:e,offset:f,targetHeight:g,targetWidth:h});return{top:c,left:b,width:d*i,height:a*i,transform:`translate(0,0) scale(${1/i})`}})({containerHeight:k.height,containerLeft:k.left,containerTop:k.top,containerWidth:k.width,hasScalableSrc:j,offset:f,targetHeight:e?.naturalHeight||k.height,targetWidth:e?.naturalWidth||k.width}),s=Object.assign({},r,q?(({containerHeight:a,containerLeft:b,containerTop:c,containerWidth:d,hasScalableSrc:e,objectFit:f,objectPosition:g,offset:h,targetHeight:i,targetWidth:j})=>{if("scale-down"===f&&(f=j<=d&&i<=a?"none":"contain"),"cover"===f||"contain"===f){let k=d/j,m=a/i,n="cover"===f?Math.max(k,m):Math.min(k,m),[p="50%",q="50%"]=g.split(" "),r=o({position:p,relativeNum:d-j*n}),s=o({position:q,relativeNum:a-i*n}),t=l({containerHeight:i*n,containerWidth:j*n,hasScalableSrc:e,offset:h,targetHeight:i,targetWidth:j});return{top:c+s,left:b+r,width:j*n*t,height:i*n*t,transform:`translate(0,0) scale(${1/t})`}}if("none"===f){let[f="50%",k="50%"]=g.split(" "),m=o({position:f,relativeNum:d-j}),n=o({position:k,relativeNum:a-i}),p=l({containerHeight:i,containerWidth:j,hasScalableSrc:e,offset:h,targetHeight:i,targetWidth:j});return{top:c+n,left:b+m,width:j*p,height:i*p,transform:`translate(0,0) scale(${1/p})`}}if("fill"!==f)return{};{let b=Math.max(d/j,a/i),c=l({containerHeight:i*b,containerWidth:j*b,hasScalableSrc:e,offset:h,targetHeight:i,targetWidth:j});return{width:d*c,height:a*c,transform:`translate(0,0) scale(${1/c})`}}})({containerHeight:k.height,containerLeft:k.left,containerTop:k.top,containerWidth:k.width,hasScalableSrc:j,objectFit:m.objectFit,objectPosition:m.objectPosition,offset:f,targetHeight:e?.naturalHeight||k.height,targetWidth:e?.naturalWidth||k.width}):void 0,n?(({backgroundPosition:a,backgroundSize:b,containerHeight:c,containerLeft:d,containerTop:e,containerWidth:f,hasScalableSrc:g,offset:h,targetHeight:i,targetWidth:j})=>{if("cover"===b||"contain"===b){let k=f/j,m=c/i,n="cover"===b?Math.max(k,m):Math.min(k,m),[p="50%",q="50%"]=a.split(" "),r=o({position:p,relativeNum:f-j*n}),s=o({position:q,relativeNum:c-i*n}),t=l({containerHeight:i*n,containerWidth:j*n,hasScalableSrc:g,offset:h,targetHeight:i,targetWidth:j});return{top:e+s,left:d+r,width:j*n*t,height:i*n*t,transform:`translate(0,0) scale(${1/t})`}}if("auto"===b){let[b="50%",k="50%"]=a.split(" "),m=o({position:b,relativeNum:f-j}),n=o({position:k,relativeNum:c-i}),p=l({containerHeight:i,containerWidth:j,hasScalableSrc:g,offset:h,targetHeight:i,targetWidth:j});return{top:e+n,left:d+m,width:j*p,height:i*p,transform:`translate(0,0) scale(${1/p})`}}{let[k="50%",m="50%"]=b.split(" "),n=o({position:k,relativeNum:f}),p=Math.min(n/j,o({position:m,relativeNum:c})/i),[q="50%",r="50%"]=a.split(" "),s=o({position:q,relativeNum:f-j*p}),t=o({position:r,relativeNum:c-i*p}),u=l({containerHeight:i*p,containerWidth:j*p,hasScalableSrc:g,offset:h,targetHeight:i,targetWidth:j});return{top:e+t,left:d+s,width:j*p*u,height:i*p*u,transform:`translate(0,0) scale(${1/u})`}}})({backgroundPosition:m.backgroundPosition,backgroundSize:m.backgroundSize,containerHeight:k.height,containerLeft:k.left,containerTop:k.top,containerWidth:k.width,hasScalableSrc:j,offset:f,targetHeight:e?.naturalHeight||k.height,targetWidth:e?.naturalWidth||k.width}):void 0);if(d){let a=window.innerWidth/2,b=window.innerHeight/2,c=parseFloat(String(s.left||0))+parseFloat(String(s.width||0))/2,d=parseFloat(String(s.top||0))+parseFloat(String(s.height||0))/2;h&&(s.transitionDuration="0.01ms"),s.transform=`translate(${a-c}px,${b-d}px) scale(1)`}return s})({hasZoomImg:W,imgSrc:S,isSvg:Q,isZoomed:w&&Z,loadedImgEl:I,offset:A,shouldRefresh:K,targetEl:m}):{};let aa=null;if(X){let b=P||O?d.createElement("img",{alt:R,crossOrigin:V,sizes:T,src:S,srcSet:U,...H&&"LOADED"===J?z:{},"data-rmiz-modal-img":"",height:this.styleModalImg.height||void 0,id:N,ref:E,style:this.styleModalImg,width:this.styleModalImg.width||void 0}):Q?d.createElement("div",{"data-rmiz-modal-img":!0,ref:E,style:this.styleModalImg}):null,c=d.createElement("button",{"aria-label":q,"data-rmiz-btn-unzoom":"",onClick:a,type:"button"},d.createElement(u,null));aa=y?d.createElement(y,{buttonUnzoom:c,modalState:J,img:b,onUnzoom:i}):d.createElement(d.Fragment,null,b,c)}return d.createElement(x,{"aria-owns":M,"data-rmiz":"",ref:F},d.createElement(x,{"data-rmiz-content":$,ref:B,style:{visibility:"UNLOADED"===J?"visible":"hidden"}},s),X&&d.createElement(x,{"data-rmiz-ghost":"",style:L},d.createElement("button",{"aria-label":Y,"data-rmiz-btn-zoom":"",onClick:k,type:"button"},d.createElement(v,null))),X&&e.createPortal(d.createElement("dialog",{"aria-labelledby":N,"aria-modal":"true",className:t,"data-rmiz-modal":"",id:M,onClick:c,onClose:f,onCancel:b,ref:C,role:"dialog"},d.createElement("div",{"data-rmiz-modal-overlay":_}),d.createElement("div",{"data-rmiz-modal-content":"",ref:D},aa)),this.getDialogContainer()))}componentDidMount(){this.setId(),this.setAndTrackImg(),this.handleImgLoad(),this.UNSAFE_handleSvg()}componentWillUnmount(){"UNLOADED"!==this.state.modalState&&this.bodyScrollEnable(),this.contentChangeObserver?.disconnect?.(),this.contentNotFoundChangeObserver?.disconnect?.(),this.imgElResizeObserver?.disconnect?.(),this.imgEl?.removeEventListener?.("load",this.handleImgLoad),this.imgEl?.removeEventListener?.("click",this.handleZoom),this.refModalImg.current?.removeEventListener?.("transitionend",this.handleImgTransitionEnd),window.removeEventListener("wheel",this.handleWheel),window.removeEventListener("touchstart",this.handleTouchStart),window.removeEventListener("touchmove",this.handleTouchMove),window.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("touchcancel",this.handleTouchCancel),window.removeEventListener("resize",this.handleResize),document.removeEventListener("keydown",this.handleKeyDown,!0)}componentDidUpdate(a,b){this.handleModalStateChange(b.modalState),this.UNSAFE_handleSvg(),this.handleIfZoomChanged(a.isZoomed)}}function v(a){let[b,c]=d.useState(!1);return d.createElement(t,{...a,isZoomed:b,onZoomChange:c})}u.defaultProps={a11yNameButtonUnzoom:"Minimize image",a11yNameButtonZoom:"Expand image",canSwipeToUnzoom:!0,IconUnzoom:function(){return d.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-unzoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M 14.144531 1.148438 L 9 6.292969 L 9 3 L 8 3 L 8 8 L 13 8 L 13 7 L 9.707031 7 L 14.855469 1.851563 Z M 8 8 L 3 8 L 3 9 L 6.292969 9 L 1.148438 14.144531 L 1.851563 14.855469 L 7 9.707031 L 7 13 L 8 13 Z"}))},IconZoom:function(){return d.createElement("svg",{"aria-hidden":"true","data-rmiz-btn-zoom-icon":!0,fill:"currentColor",focusable:"false",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M 9 1 L 9 2 L 12.292969 2 L 2 12.292969 L 2 9 L 1 9 L 1 14 L 6 14 L 6 13 L 2.707031 13 L 13 2.707031 L 13 6 L 14 6 L 14 1 Z"}))},swipeToUnzoomThreshold:10,wrapElement:"div",zoomMargin:0}}};